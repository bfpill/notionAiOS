[debug] [2023-06-27T05:50:20.246Z] ----------------------------------------------------------------------
[debug] [2023-06-27T05:50:20.248Z] Command:       /Users/maxadam/.nvm/versions/node/v18.0.0/bin/node /usr/local/bin/firebase emulators:start
[debug] [2023-06-27T05:50:20.249Z] CLI Version:   12.4.0
[debug] [2023-06-27T05:50:20.249Z] Platform:      darwin
[debug] [2023-06-27T05:50:20.249Z] Node Version:  v18.0.0
[debug] [2023-06-27T05:50:20.250Z] Time:          Tue Jun 27 2023 15:50:20 GMT+1000 (Australian Eastern Standard Time)
[debug] [2023-06-27T05:50:20.250Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-06-27T05:50:20.430Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-06-27T05:50:20.431Z] > authorizing via signed-in user (max@v3rv.com)
[debug] [2023-06-27T05:50:20.554Z] openjdk version "11.0.17" 2022-10-18
[debug] [2023-06-27T05:50:20.555Z] 
OpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)
OpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)

[debug] [2023-06-27T05:50:20.567Z] Parsed Java major version: 11
[info] i  emulators: Starting emulators: functions, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, storage"}}
[debug] [2023-06-27T05:50:21.767Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-27T05:50:21.767Z] [storage] Storage Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-27T05:50:21.768Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-06-27T05:50:21.789Z] [hub] writing locator at /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/hub-v3rv-notionaios.json
[debug] [2023-06-27T05:50:22.389Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-27T05:50:22.389Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-27T05:50:22.389Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, hosting, pubsub {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, hosting, pubsub\u001b[22m"}}
[debug] [2023-06-27T05:50:22.406Z] defaultcredentials: writing to file /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json
[debug] [2023-06-27T05:50:22.409Z] Setting GAC to /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json"}}
[debug] [2023-06-27T05:50:22.412Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig [none]
[debug] [2023-06-27T05:50:22.947Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig 200
[debug] [2023-06-27T05:50:22.947Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig {"projectId":"v3rv-notionaios","storageBucket":"v3rv-notionaios.appspot.com","locationId":"us-central"}
[debug] [2023-06-27T05:50:23.008Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-06-27T05:50:24.391Z] Temp file directory for storage emulator: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/firebase/storage/blobs"}}
[debug] [2023-06-27T05:50:24.427Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-06-27T05:50:24.427Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-06-27T05:50:24.427Z] Starting Emulator UI with command {"binary":"node","args":["/Users/maxadam/.cache/firebase/emulators/ui-v1.11.6/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/maxadam/.cache/firebase/emulators/ui-v1.11.6/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-06-27T05:50:24.592Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-06-27T05:50:24.593Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/Users/maxadam/Desktop/Code/notionOS/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/maxadam/Desktop/Code/notionOS/functions\" for Cloud Functions..."}}
[debug] [2023-06-27T05:50:24.696Z] Validating nodejs source
[debug] [2023-06-27T05:50:25.655Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:50:25.656Z] Building nodejs source
[debug] [2023-06-27T05:50:25.656Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:50:25.663Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T05:50:25.673Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T05:50:25.975Z] Serving at port 8350

[debug] [2023-06-27T05:50:26.514Z] Got response from /__/functions.yaml Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')
[debug] [2023-06-27T05:50:26.518Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:
     ...  from function source: TypeError: Cannot read properties of unde ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')\n\u0000","position":59,"line":0,"column":59},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:\n     ...  from function source: TypeError: Cannot read properties of unde ... \n                                         ^"}
[debug] [2023-06-27T05:50:26.522Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key') {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')"}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├───────────┼────────────────┼─────────────────────────────────┤
│ Storage   │ 127.0.0.1:9199 │ http://127.0.0.1:4000/storage   │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-06-27T05:51:03.875Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T05:51:04.876Z] Validating nodejs source
[debug] [2023-06-27T05:51:05.791Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:51:05.792Z] Building nodejs source
[debug] [2023-06-27T05:51:05.792Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:51:05.794Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T05:51:05.796Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T05:51:06.049Z] Serving at port 8962

[debug] [2023-06-27T05:51:06.416Z] Got response from /__/functions.yaml Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')
[debug] [2023-06-27T05:51:06.416Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:
     ...  from function source: TypeError: Cannot read properties of unde ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')\n\u0000","position":59,"line":0,"column":59},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:\n     ...  from function source: TypeError: Cannot read properties of unde ... \n                                         ^"}
[debug] [2023-06-27T05:51:06.419Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key') {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')"}}
[debug] [2023-06-27T05:51:16.058Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.059Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.059Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.059Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.060Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.060Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.060Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.060Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.061Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.061Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.061Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.061Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.061Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.062Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.062Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.062Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.065Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.066Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.066Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:51:16.067Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T05:51:17.069Z] Validating nodejs source
[debug] [2023-06-27T05:51:17.952Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:51:17.953Z] Building nodejs source
[debug] [2023-06-27T05:51:17.953Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:51:17.954Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T05:51:17.955Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T05:51:18.269Z] Serving at port 8722

[debug] [2023-06-27T05:51:18.810Z] Got response from /__/functions.yaml Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')
[debug] [2023-06-27T05:51:18.811Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:
     ...  from function source: TypeError: Cannot read properties of unde ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')\n\u0000","position":59,"line":0,"column":59},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:\n     ...  from function source: TypeError: Cannot read properties of unde ... \n                                         ^"}
[debug] [2023-06-27T05:51:18.814Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key') {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')"}}
[debug] [2023-06-27T05:54:19.849Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T05:54:20.851Z] Validating nodejs source
[debug] [2023-06-27T05:54:21.745Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:54:21.745Z] Building nodejs source
[debug] [2023-06-27T05:54:21.745Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:54:21.748Z] Failed to validate key FIREBASE_API_KEY: Error: Key FIREBASE_API_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load environment variables from .env. {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load environment variables from .env."}}
[debug] [2023-06-27T05:54:39.325Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.326Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.326Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.326Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.326Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.326Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.327Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.327Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.327Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.327Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.327Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.327Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.328Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.328Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.328Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.328Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.328Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.328Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.329Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.329Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.329Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:54:39.329Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T05:54:40.332Z] Validating nodejs source
[debug] [2023-06-27T05:54:41.314Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:54:41.315Z] Building nodejs source
[debug] [2023-06-27T05:54:41.315Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:54:41.316Z] Failed to validate key FIREBASE_API_KEY: Error: Key FIREBASE_API_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load environment variables from .env. {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load environment variables from .env."}}
[debug] [2023-06-27T05:55:21.738Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.738Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.741Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.742Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:55:21.742Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T05:55:22.743Z] Validating nodejs source
[debug] [2023-06-27T05:55:24.538Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:55:24.539Z] Building nodejs source
[debug] [2023-06-27T05:55:24.539Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:55:24.540Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T05:55:24.542Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T05:55:24.838Z] Serving at port 8875

[debug] [2023-06-27T05:55:25.371Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T05:55:25.376Z] Initialized and ready to roll

[debug] [2023-06-27T05:55:25.377Z] App initialized

[debug] [2023-06-27T05:55:25.378Z] connector initialized

[debug] [2023-06-27T05:55:25.385Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T05:55:25.391Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/api)."}}
[info] ✔  functions[us-central1-generateFiles]: http function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/generateFiles). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/generateFiles)."}}
[debug] [2023-06-27T05:55:32.715Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T05:55:32.714Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T05:55:32.715Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T05:55:32.714Z"],"workRunningCount":1}
[debug] [2023-06-27T05:55:32.715Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-27T05:55:32.733Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T05:55:32.733Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-27T05:55:32.741Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-27T05:55:32.742Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-27T05:55:34.395Z] [runtime-status] [5383] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T05:55:34.395Z] [runtime-status] [5383] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:55:34.396Z] [runtime-status] [5383] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T05:55:34.396Z] [runtime-status] [5383] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T05:55:34.397Z] [runtime-status] [5383] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:55:34.605Z] [runtime-status] [5383] Checked functions.config() {"config":{"api":{"NOTION_TOKEN":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","NOTION_DB":"244fbd2336dc46d5a2612c7dc9609f67"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Checked functions.config() {\"config\":{\"api\":{\"NOTION_TOKEN\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"NOTION_DB\":\"244fbd2336dc46d5a2612c7dc9609f67\"}}}"}}
[debug] [2023-06-27T05:55:34.606Z] [runtime-status] [5383] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T05:55:34.606Z] [runtime-status] [5383] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:55:34.607Z] [runtime-status] [5383] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T05:55:34.609Z] [runtime-status] [5383] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:55:34.609Z] [runtime-status] [5383] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T05:55:34.826Z] [runtime-status] [5383] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T05:55:34.826Z] [runtime-status] [5383] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_27ce1277d74a0c49.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5383] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_27ce1277d74a0c49.sock"}}
[debug] [2023-06-27T05:55:34.865Z] [worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: IDLE"}}
[debug] [2023-06-27T05:55:34.865Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T05:55:34.866Z] [worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' } {"user":"@notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: API token is invalid. {"user":"APIResponseError: API token is invalid.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: API token is invalid."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20) {"user":"    at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {"}}
[info] >    code: 'unauthorized', {"user":"  code: 'unauthorized',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'unauthorized',"}}
[info] >    status: 401, {"user":"  status: 401,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 401,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Tue, 27 Jun 2023 05:55:36 GMT' ], {"user":"      date: [ 'Tue, 27 Jun 2023 05:55:36 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Tue, 27 Jun 2023 05:55:36 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '87' ], {"user":"      'content-length': [ '87' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '87' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"57-QCRLT3IovYEW+CkwyJQlFtiXiG8"' ], {"user":"      etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=zeIRN6buBBnD8BW5jrw6LaUmMBf3IPN2ALzixht1O3g-1687845336-0-Ad+BZ2I2D0ONERPJ9s2Pk+hXbrrK/TsoIZCpgcF4cAx21Zd53BRyylSj0z5ZU0aNvEiJ5f4iTSqp24hqLZFF9YM=; path=/; expires=Tue, 27-Jun-23 06:25:36 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=zeIRN6buBBnD8BW5jrw6LaUmMBf3IPN2ALzixht1O3g-1687845336-0-Ad+BZ2I2D0ONERPJ9s2Pk+hXbrrK/TsoIZCpgcF4cAx21Zd53BRyylSj0z5ZU0aNvEiJ5f4iTSqp24hqLZFF9YM=; path=/; expires=Tue, 27-Jun-23 06:25:36 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=zeIRN6buBBnD8BW5jrw6LaUmMBf3IPN2ALzixht1O3g-1687845336-0-Ad+BZ2I2D0ONERPJ9s2Pk+hXbrrK/TsoIZCpgcF4cAx21Zd53BRyylSj0z5ZU0aNvEiJ5f4iTSqp24hqLZFF9YM=; path=/; expires=Tue, 27-Jun-23 06:25:36 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7ddb71214ec82e9a-MEL' ] {"user":"      'cf-ray': [ '7ddb71214ec82e9a-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7ddb71214ec82e9a-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":401,"code":"unauthorized","message":"API token is invalid."}' {"user":"  body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-27T05:55:36.152Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T05:55:36.152Z] [worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: exited"}}
[debug] [2023-06-27T05:55:36.153Z] [worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c161245-3ba5-4ee6-bad3-4286c7263222]: FINISHED"}}
[debug] [2023-06-27T05:58:17.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.886Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.886Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.886Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.886Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.886Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.886Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.887Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.887Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.888Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.888Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.888Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.889Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.889Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.889Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.889Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.889Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T05:58:17.889Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T05:58:18.891Z] Validating nodejs source
[debug] [2023-06-27T05:58:19.907Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T05:58:19.908Z] Building nodejs source
[debug] [2023-06-27T05:58:19.908Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T05:58:19.909Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T05:58:19.910Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T05:58:20.157Z] Serving at port 8030

[debug] [2023-06-27T05:58:20.541Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T05:58:20.545Z] Initialized and ready to roll

[debug] [2023-06-27T05:58:20.546Z] App initialized

[debug] [2023-06-27T05:58:20.547Z] connector initialized

[debug] [2023-06-27T05:58:20.555Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T05:58:20.561Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T05:58:26.579Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T05:58:26.579Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T05:58:26.580Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T05:58:26.579Z"],"workRunningCount":1}
[debug] [2023-06-27T05:58:26.580Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-27T05:58:26.594Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T05:58:26.594Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-27T05:58:26.594Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-27T05:58:26.601Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-27T05:58:26.601Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-27T05:58:27.601Z] [runtime-status] [5758] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T05:58:27.602Z] [runtime-status] [5758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:58:27.602Z] [runtime-status] [5758] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T05:58:27.603Z] [runtime-status] [5758] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T05:58:27.604Z] [runtime-status] [5758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:58:27.816Z] [runtime-status] [5758] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-06-27T05:58:27.817Z] [runtime-status] [5758] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T05:58:27.820Z] [runtime-status] [5758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:58:27.821Z] [runtime-status] [5758] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T05:58:27.821Z] [runtime-status] [5758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T05:58:27.821Z] [runtime-status] [5758] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T05:58:28.034Z] [runtime-status] [5758] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T05:58:28.034Z] [runtime-status] [5758] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fb3ca9a2aad56087.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5758] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fb3ca9a2aad56087.sock"}}
[debug] [2023-06-27T05:58:28.125Z] [worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: IDLE"}}
[debug] [2023-06-27T05:58:28.125Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T05:58:28.125Z] [worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' } {"user":"@notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: API token is invalid. {"user":"APIResponseError: API token is invalid.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: API token is invalid."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20) {"user":"    at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {"}}
[info] >    code: 'unauthorized', {"user":"  code: 'unauthorized',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'unauthorized',"}}
[info] >    status: 401, {"user":"  status: 401,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 401,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Tue, 27 Jun 2023 05:58:29 GMT' ], {"user":"      date: [ 'Tue, 27 Jun 2023 05:58:29 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Tue, 27 Jun 2023 05:58:29 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '87' ], {"user":"      'content-length': [ '87' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '87' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"57-QCRLT3IovYEW+CkwyJQlFtiXiG8"' ], {"user":"      etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=Ue7Y5MJpBk.Cn2ipKO_Mbisz2YvnLNDgATLlcDWSCgc-1687845509-0-AdoXs98QBNTReohdp9jrKF6+6c28jYK8hQzGBivVMYddjlsYp17UEY/iGqfDPOMIVn4K8EQ3CWMMkHwjCCQQWBk=; path=/; expires=Tue, 27-Jun-23 06:28:29 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=Ue7Y5MJpBk.Cn2ipKO_Mbisz2YvnLNDgATLlcDWSCgc-1687845509-0-AdoXs98QBNTReohdp9jrKF6+6c28jYK8hQzGBivVMYddjlsYp17UEY/iGqfDPOMIVn4K8EQ3CWMMkHwjCCQQWBk=; path=/; expires=Tue, 27-Jun-23 06:28:29 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=Ue7Y5MJpBk.Cn2ipKO_Mbisz2YvnLNDgATLlcDWSCgc-1687845509-0-AdoXs98QBNTReohdp9jrKF6+6c28jYK8hQzGBivVMYddjlsYp17UEY/iGqfDPOMIVn4K8EQ3CWMMkHwjCCQQWBk=; path=/; expires=Tue, 27-Jun-23 06:28:29 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7ddb755c08463772-MEL' ] {"user":"      'cf-ray': [ '7ddb755c08463772-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7ddb755c08463772-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":401,"code":"unauthorized","message":"API token is invalid."}' {"user":"  body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-27T05:58:29.522Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T05:58:29.523Z] [worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: exited"}}
[debug] [2023-06-27T05:58:29.523Z] [worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c8f17686-b89b-48be-83e3-412b9746213a]: FINISHED"}}
[debug] [2023-06-27T06:00:14.279Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T06:00:15.279Z] Validating nodejs source
[debug] [2023-06-27T06:00:16.056Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:00:16.056Z] Building nodejs source
[debug] [2023-06-27T06:00:16.056Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:00:16.057Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:00:16.059Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:00:16.291Z] Serving at port 8213

[debug] [2023-06-27T06:00:16.659Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:00:16.662Z] Initialized and ready to roll

[debug] [2023-06-27T06:00:16.663Z] App initialized

[debug] [2023-06-27T06:00:16.665Z] connector initialized

[debug] [2023-06-27T06:00:16.671Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:00:16.676Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:00:25.297Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.297Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.297Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.297Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.297Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.297Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.298Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.299Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.300Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:00:25.300Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T06:00:26.301Z] Validating nodejs source
[debug] [2023-06-27T06:00:28.110Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:00:28.111Z] Building nodejs source
[debug] [2023-06-27T06:00:28.111Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:00:28.112Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:00:28.114Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:00:28.120Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:00:28.120Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:00:28.121Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:00:28.120Z"],"workRunningCount":1}
[debug] [2023-06-27T06:00:28.121Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-27T06:00:28.135Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T06:00:28.135Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-27T06:00:28.135Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-27T06:00:28.141Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-27T06:00:28.141Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-27T06:00:28.376Z] Serving at port 8174

[debug] [2023-06-27T06:00:28.741Z] Notion token: undefined

[debug] [2023-06-27T06:00:28.741Z] Database ID: undefined

[debug] [2023-06-27T06:00:28.741Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:00:28.745Z] Initialized and ready to roll

[debug] [2023-06-27T06:00:28.746Z] App initialized

[debug] [2023-06-27T06:00:28.747Z] connector initialized

[debug] [2023-06-27T06:00:28.760Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:00:28.765Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:00:29.196Z] [runtime-status] [5824] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:00:29.198Z] [runtime-status] [5824] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:00:29.198Z] [runtime-status] [5824] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T06:00:29.198Z] [runtime-status] [5824] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T06:00:29.199Z] [runtime-status] [5824] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:00:29.416Z] [runtime-status] [5824] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-06-27T06:00:29.416Z] [runtime-status] [5824] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T06:00:29.417Z] [runtime-status] [5824] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:00:29.418Z] [runtime-status] [5824] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:00:29.420Z] [runtime-status] [5824] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:00:29.420Z] [runtime-status] [5824] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: undefined {"user":"Notion token: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: undefined"}}
[info] >  Database ID: undefined {"user":"Database ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: undefined"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T06:00:29.649Z] [runtime-status] [5824] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T06:00:29.649Z] [runtime-status] [5824] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_43b5b7204640a881.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5824] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_43b5b7204640a881.sock"}}
[debug] [2023-06-27T06:00:29.664Z] [worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: IDLE"}}
[debug] [2023-06-27T06:00:29.664Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T06:00:29.665Z] [worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' } {"user":"@notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: API token is invalid. {"user":"APIResponseError: API token is invalid.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: API token is invalid."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20) {"user":"    at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {"}}
[info] >    code: 'unauthorized', {"user":"  code: 'unauthorized',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'unauthorized',"}}
[info] >    status: 401, {"user":"  status: 401,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 401,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Tue, 27 Jun 2023 06:00:30 GMT' ], {"user":"      date: [ 'Tue, 27 Jun 2023 06:00:30 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Tue, 27 Jun 2023 06:00:30 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '87' ], {"user":"      'content-length': [ '87' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '87' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"57-QCRLT3IovYEW+CkwyJQlFtiXiG8"' ], {"user":"      etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=WbAeIedPnipl_6xQ5SdJsbmrGleWWyFSaycqPBncr8U-1687845630-0-AW7C/kUSPjMQ0kfs65DB+zi0uUOOMBIp/bH1NoCuelEwgOUcUQno44xsA1zvzO69wuWERcgH2AfwzHDT4nrexCc=; path=/; expires=Tue, 27-Jun-23 06:30:30 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=WbAeIedPnipl_6xQ5SdJsbmrGleWWyFSaycqPBncr8U-1687845630-0-AW7C/kUSPjMQ0kfs65DB+zi0uUOOMBIp/bH1NoCuelEwgOUcUQno44xsA1zvzO69wuWERcgH2AfwzHDT4nrexCc=; path=/; expires=Tue, 27-Jun-23 06:30:30 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=WbAeIedPnipl_6xQ5SdJsbmrGleWWyFSaycqPBncr8U-1687845630-0-AW7C/kUSPjMQ0kfs65DB+zi0uUOOMBIp/bH1NoCuelEwgOUcUQno44xsA1zvzO69wuWERcgH2AfwzHDT4nrexCc=; path=/; expires=Tue, 27-Jun-23 06:30:30 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7ddb78543e011f62-MEL' ] {"user":"      'cf-ray': [ '7ddb78543e011f62-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7ddb78543e011f62-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":401,"code":"unauthorized","message":"API token is invalid."}' {"user":"  body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-27T06:00:30.208Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:00:30.208Z] [worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: exited"}}
[debug] [2023-06-27T06:00:30.209Z] [worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4bac746e-1ad9-4127-8789-555de463c5cd]: FINISHED"}}
[debug] [2023-06-27T06:02:32.708Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.708Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.708Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.709Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.709Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.709Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.709Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.709Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.709Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.710Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.711Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.711Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.711Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.711Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.711Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:02:32.711Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T06:02:33.711Z] Validating nodejs source
[debug] [2023-06-27T06:02:34.576Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:02:34.576Z] Building nodejs source
[debug] [2023-06-27T06:02:34.576Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:02:34.577Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:02:34.579Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:02:34.885Z] Serving at port 8861

[debug] [2023-06-27T06:02:35.407Z] Notion token: undefined

[debug] [2023-06-27T06:02:35.408Z] Database ID: undefined

[debug] [2023-06-27T06:02:35.408Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:02:35.412Z] Initialized and ready to roll

[debug] [2023-06-27T06:02:35.412Z] App initialized

[debug] [2023-06-27T06:02:35.414Z] connector initialized

[debug] [2023-06-27T06:02:35.420Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:02:35.425Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:02:41.875Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:02:41.875Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:02:41.875Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:02:41.875Z"],"workRunningCount":1}
[debug] [2023-06-27T06:02:41.875Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-27T06:02:41.890Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T06:02:41.890Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-27T06:02:41.890Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-27T06:02:41.896Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-27T06:02:41.896Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-27T06:02:43.445Z] [runtime-status] [5902] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:02:43.447Z] [runtime-status] [5902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:02:43.447Z] [runtime-status] [5902] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T06:02:43.447Z] [runtime-status] [5902] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T06:02:43.449Z] [runtime-status] [5902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:02:43.661Z] [runtime-status] [5902] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"}}}"}}
[debug] [2023-06-27T06:02:43.661Z] [runtime-status] [5902] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T06:02:43.662Z] [runtime-status] [5902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:02:43.663Z] [runtime-status] [5902] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:02:43.665Z] [runtime-status] [5902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:02:43.665Z] [runtime-status] [5902] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: undefined {"user":"Notion token: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: undefined"}}
[info] >  Database ID: undefined {"user":"Database ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: undefined"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T06:02:43.885Z] [runtime-status] [5902] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T06:02:43.885Z] [runtime-status] [5902] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_6f1974802122c2de.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [5902] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_6f1974802122c2de.sock"}}
[debug] [2023-06-27T06:02:43.919Z] [worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: IDLE"}}
[debug] [2023-06-27T06:02:43.920Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T06:02:43.920Z] [worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' } {"user":"@notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail { code: 'unauthorized', message: 'API token is invalid.' }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: API token is invalid. {"user":"APIResponseError: API token is invalid.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: API token is invalid."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20) {"user":"    at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:17:20)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:55:29) {"}}
[info] >    code: 'unauthorized', {"user":"  code: 'unauthorized',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'unauthorized',"}}
[info] >    status: 401, {"user":"  status: 401,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 401,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Tue, 27 Jun 2023 06:02:45 GMT' ], {"user":"      date: [ 'Tue, 27 Jun 2023 06:02:45 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Tue, 27 Jun 2023 06:02:45 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '87' ], {"user":"      'content-length': [ '87' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '87' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"57-QCRLT3IovYEW+CkwyJQlFtiXiG8"' ], {"user":"      etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"57-QCRLT3IovYEW+CkwyJQlFtiXiG8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=LayAb7Mak7jFFw8Xu44KG2O0yoH5lV0LTLTSJUWNhW8-1687845765-0-AW6osQPUsGflxBXKPIpfxnHbKVCdYPViuHrGlHcDiZ2aFDxX3sn7/2B1pv0MDCeuAkQmYlCaFkyRYZ6zHHOh5eI=; path=/; expires=Tue, 27-Jun-23 06:32:45 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=LayAb7Mak7jFFw8Xu44KG2O0yoH5lV0LTLTSJUWNhW8-1687845765-0-AW6osQPUsGflxBXKPIpfxnHbKVCdYPViuHrGlHcDiZ2aFDxX3sn7/2B1pv0MDCeuAkQmYlCaFkyRYZ6zHHOh5eI=; path=/; expires=Tue, 27-Jun-23 06:32:45 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=LayAb7Mak7jFFw8Xu44KG2O0yoH5lV0LTLTSJUWNhW8-1687845765-0-AW6osQPUsGflxBXKPIpfxnHbKVCdYPViuHrGlHcDiZ2aFDxX3sn7/2B1pv0MDCeuAkQmYlCaFkyRYZ6zHHOh5eI=; path=/; expires=Tue, 27-Jun-23 06:32:45 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7ddb7b9b6d5a29a2-MEL' ] {"user":"      'cf-ray': [ '7ddb7b9b6d5a29a2-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7ddb7b9b6d5a29a2-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":401,"code":"unauthorized","message":"API token is invalid."}' {"user":"  body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":401,\"code\":\"unauthorized\",\"message\":\"API token is invalid.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-27T06:02:45.205Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:02:45.206Z] [worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: exited"}}
[debug] [2023-06-27T06:02:45.206Z] [worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2f9f0f2e-9410-46ce-9c39-cb8eaf55bcde]: FINISHED"}}
[debug] [2023-06-27T06:04:08.389Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T06:04:09.390Z] Validating nodejs source
[debug] [2023-06-27T06:04:10.226Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:04:10.226Z] Building nodejs source
[debug] [2023-06-27T06:04:10.227Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:04:10.228Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:04:10.229Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:04:10.441Z] Serving at port 8923

[debug] [2023-06-27T06:04:10.797Z] Notion token: undefined

[debug] [2023-06-27T06:04:10.797Z] Database ID: undefined
parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:04:10.801Z] Initialized and ready to roll

[debug] [2023-06-27T06:04:10.801Z] App initialized

[debug] [2023-06-27T06:04:10.803Z] connector initialized

[debug] [2023-06-27T06:04:10.810Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:04:10.814Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:04:18.674Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T06:04:19.675Z] Validating nodejs source
[debug] [2023-06-27T06:04:20.466Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:04:20.466Z] Building nodejs source
[debug] [2023-06-27T06:04:20.466Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:04:20.470Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:04:20.471Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:04:20.709Z] Serving at port 8445

[debug] [2023-06-27T06:04:21.069Z] Notion token: undefined

[debug] [2023-06-27T06:04:21.069Z] Database ID: undefined

[debug] [2023-06-27T06:04:21.069Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:04:21.073Z] Initialized and ready to roll

[debug] [2023-06-27T06:04:21.073Z] App initialized

[debug] [2023-06-27T06:04:21.075Z] connector initialized

[debug] [2023-06-27T06:04:21.081Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:04:21.086Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:04:47.968Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T06:04:48.969Z] Validating nodejs source
[debug] [2023-06-27T06:04:49.775Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:04:49.776Z] Building nodejs source
[debug] [2023-06-27T06:04:49.776Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:04:49.777Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:04:49.778Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:04:50.049Z] Serving at port 8135

[debug] [2023-06-27T06:04:50.440Z] Notion token: undefined

[debug] [2023-06-27T06:04:50.440Z] Database ID: undefined
parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:04:50.444Z] Initialized and ready to roll

[debug] [2023-06-27T06:04:50.444Z] App initialized

[debug] [2023-06-27T06:04:50.446Z] connector initialized

[debug] [2023-06-27T06:04:50.452Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:04:50.457Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:05:18.071Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T06:05:19.073Z] Validating nodejs source
[debug] [2023-06-27T06:05:19.971Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:05:19.972Z] Building nodejs source
[debug] [2023-06-27T06:05:19.972Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:05:19.973Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:05:19.975Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:05:20.209Z] Serving at port 8948

[debug] [2023-06-27T06:05:20.577Z] Notion token: undefined
Database ID: undefined

[debug] [2023-06-27T06:05:20.577Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:05:20.580Z] Initialized and ready to roll

[debug] [2023-06-27T06:05:20.581Z] App initialized

[debug] [2023-06-27T06:05:20.583Z] connector initialized

[debug] [2023-06-27T06:05:20.590Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:05:20.595Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:05:27.068Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.069Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.169Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.169Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.169Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.169Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.170Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.170Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.170Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.172Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.172Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.172Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.173Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.173Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.173Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.173Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.173Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.173Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.174Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.174Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.174Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:05:27.174Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T06:05:28.177Z] Validating nodejs source
[debug] [2023-06-27T06:05:29.328Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:05:29.328Z] Building nodejs source
[debug] [2023-06-27T06:05:29.328Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:05:29.329Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:05:29.331Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:05:29.592Z] Serving at port 8394

[debug] [2023-06-27T06:05:29.955Z] Got response from /__/functions.yaml Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')
[debug] [2023-06-27T06:05:29.957Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:
     ...  from function source: TypeError: Cannot read properties of unde ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')\n\u0000","position":59,"line":0,"column":59},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:\n     ...  from function source: TypeError: Cannot read properties of unde ... \n                                         ^"}
[debug] [2023-06-27T06:05:29.960Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key') {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')"}}
[debug] [2023-06-27T06:06:13.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/notionManager/notion.ts changed, reloading triggers"}}
[debug] [2023-06-27T06:06:14.154Z] Validating nodejs source
[debug] [2023-06-27T06:06:15.051Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:06:15.052Z] Building nodejs source
[debug] [2023-06-27T06:06:15.052Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:06:15.054Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:06:15.055Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:06:15.362Z] Serving at port 8374

[debug] [2023-06-27T06:06:15.735Z] Got response from /__/functions.yaml Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')
[debug] [2023-06-27T06:06:15.735Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:
     ...  from function source: TypeError: Cannot read properties of unde ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')\n\u0000","position":59,"line":0,"column":59},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 60:\n     ...  from function source: TypeError: Cannot read properties of unde ... \n                                         ^"}
[debug] [2023-06-27T06:06:15.739Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key') {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: TypeError: Cannot read properties of undefined (reading 'key')"}}
[debug] [2023-06-27T06:06:25.379Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-27T06:06:25.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-27T06:06:26.385Z] Validating nodejs source
[debug] [2023-06-27T06:06:27.139Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:06:27.140Z] Building nodejs source
[debug] [2023-06-27T06:06:27.140Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:06:27.141Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:06:27.142Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:06:27.367Z] Serving at port 8851

[debug] [2023-06-27T06:06:27.718Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-27T06:06:27.719Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-27T06:06:27.719Z] Notion token: undefined

[debug] [2023-06-27T06:06:27.719Z] Database ID: undefined

[debug] [2023-06-27T06:06:27.719Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:06:27.723Z] Initialized and ready to roll

[debug] [2023-06-27T06:06:27.724Z] App initialized

[debug] [2023-06-27T06:06:27.725Z] connector initialized

[debug] [2023-06-27T06:06:27.732Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:06:27.736Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:06:33.605Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:06:33.605Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:06:33.606Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:06:33.605Z"],"workRunningCount":1}
[debug] [2023-06-27T06:06:33.606Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-27T06:06:33.623Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T06:06:33.623Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-27T06:06:33.623Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-27T06:06:33.631Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-27T06:06:33.631Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-27T06:06:35.268Z] [runtime-status] [6012] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:06:35.270Z] [runtime-status] [6012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:06:35.270Z] [runtime-status] [6012] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T06:06:35.271Z] [runtime-status] [6012] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T06:06:35.272Z] [runtime-status] [6012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:06:35.484Z] [runtime-status] [6012] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"}}}"}}
[debug] [2023-06-27T06:06:35.484Z] [runtime-status] [6012] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T06:06:35.485Z] [runtime-status] [6012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:06:35.486Z] [runtime-status] [6012] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:06:35.487Z] [runtime-status] [6012] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:06:35.488Z] [runtime-status] [6012] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Notion token: undefined {"user":"Notion token: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: undefined"}}
[info] >  Database ID: undefined {"user":"Database ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: undefined"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T06:06:35.706Z] [runtime-status] [6012] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T06:06:35.706Z] [runtime-status] [6012] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0ac59738bfc83c3c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6012] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0ac59738bfc83c3c.sock"}}
[debug] [2023-06-27T06:06:35.759Z] [worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: IDLE"}}
[debug] [2023-06-27T06:06:35.759Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T06:06:35.760Z] [worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: root {"user":"parent: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: root"}}
[info] >  Found parent node {"user":"Found parent node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Found parent node"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'in dah wataah12', {"user":"  name: 'in dah wataah12',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'in dah wataah12',"}}
[info] >    id: '31003113-b58d-4ee0-ac8c-ed86f7feb240', {"user":"  id: '31003113-b58d-4ee0-ac8c-ed86f7feb240',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: '31003113-b58d-4ee0-ac8c-ed86f7feb240',"}}
[info] >    type: 'rust' {"user":"  type: 'rust'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'rust'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-27T06:06:37.061Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1300.8824749999999ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1300.8824749999999ms"}}
[debug] [2023-06-27T06:06:37.061Z] [worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: IDLE"}}
[debug] [2023-06-27T06:06:37.061Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-27T06:06:37.062Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-27T06:06:37.062Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:06:37.168Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/data/pageTree.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/data/pageTree.json changed, reloading triggers"}}
[debug] [2023-06-27T06:06:38.169Z] Validating nodejs source
[debug] [2023-06-27T06:06:38.887Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-27T06:06:38.888Z] Building nodejs source
[debug] [2023-06-27T06:06:38.888Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-27T06:06:38.889Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-27T06:06:38.890Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-27T06:06:39.118Z] Serving at port 8441

[debug] [2023-06-27T06:06:39.463Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-27T06:06:39.464Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-27T06:06:39.464Z] Notion token: undefined

[debug] [2023-06-27T06:06:39.464Z] Database ID: undefined

[debug] [2023-06-27T06:06:39.464Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-27T06:06:39.468Z] Initialized and ready to roll

[debug] [2023-06-27T06:06:39.469Z] App initialized

[debug] [2023-06-27T06:06:39.470Z] connector initialized

[debug] [2023-06-27T06:06:39.477Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-27T06:06:39.482Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-27T06:06:39.491Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-27T06:06:39.491Z] [worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: FINISHING"}}
[debug] [2023-06-27T06:06:39.500Z] [worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: exited"}}
[debug] [2023-06-27T06:06:39.500Z] [worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-be295150-32c6-4e67-af57-f11633fde21a]: FINISHED"}}
[debug] [2023-06-27T06:08:56.076Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:08:56.075Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:08:56.076Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-27T06:08:56.075Z"],"workRunningCount":1}
[debug] [2023-06-27T06:08:56.076Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-27T06:08:56.090Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T06:08:56.090Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-27T06:08:56.091Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-27T06:08:56.096Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-27T06:08:56.097Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-27T06:08:57.115Z] [runtime-status] [6043] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:08:57.117Z] [runtime-status] [6043] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:08:57.117Z] [runtime-status] [6043] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T06:08:57.117Z] [runtime-status] [6043] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T06:08:57.118Z] [runtime-status] [6043] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:08:57.332Z] [runtime-status] [6043] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"}}}"}}
[debug] [2023-06-27T06:08:57.332Z] [runtime-status] [6043] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T06:08:57.333Z] [runtime-status] [6043] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:08:57.335Z] [runtime-status] [6043] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:08:57.337Z] [runtime-status] [6043] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:08:57.337Z] [runtime-status] [6043] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Notion token: undefined {"user":"Notion token: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: undefined"}}
[info] >  Database ID: undefined {"user":"Database ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: undefined"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T06:08:57.552Z] [runtime-status] [6043] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T06:08:57.552Z] [runtime-status] [6043] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_65c424bd29fa1283.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [6043] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_65c424bd29fa1283.sock"}}
[debug] [2023-06-27T06:08:57.618Z] [worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: IDLE"}}
[debug] [2023-06-27T06:08:57.618Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T06:08:57.619Z] [worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-27T06:08:57.639Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 20.264902ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 20.264902ms"}}
[debug] [2023-06-27T06:08:57.639Z] [worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: IDLE"}}
[debug] [2023-06-27T06:08:57.639Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-27T06:08:57.639Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-27T06:08:57.639Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:09:31.639Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/downloadLink-2023-06-27T06:09:31.639Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-27T06:09:31.639Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/downloadLink-2023-06-27T06:09:31.639Z"],"workRunningCount":1}
[debug] [2023-06-27T06:09:31.639Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/downloadLink --> us-central1-api
[debug] [2023-06-27T06:09:31.653Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T06:09:31.653Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/downloadLink, mapping to path=/notion_manager/downloadLink {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/downloadLink, mapping to path=/notion_manager/downloadLink"}}
[debug] [2023-06-27T06:09:31.653Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-27T06:09:31.653Z] [worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: BUSY"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  [ {"user":"[","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      id: 'root-node', {"user":"    id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node',"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      children: [ [Object] ] {"user":"    children: [ [Object] ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ]"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[debug] [2023-06-27T06:09:31.667Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/generateFiles-2023-06-27T06:09:31.667Z"],"queueLength":1,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/downloadLink-2023-06-27T06:09:31.639Z"],"workRunningCount":1}
[debug] [2023-06-27T06:09:31.667Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/downloadLink-2023-06-27T06:09:31.639Z","/v3rv-notionaios/us-central1/generateFiles-2023-06-27T06:09:31.667Z"],"workRunningCount":2}
[debug] [2023-06-27T06:09:31.667Z] Accepted request POST /v3rv-notionaios/us-central1/generateFiles --> us-central1-generateFiles
[debug] [2023-06-27T06:09:31.681Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-27T06:09:31.681Z] [functions] Got req.url=/v3rv-notionaios/us-central1/generateFiles, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/generateFiles, mapping to path=/"}}
[debug] [2023-06-27T06:09:31.687Z] [worker-pool] addWorker(us-central1-generateFiles) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-generateFiles)"}}
[debug] [2023-06-27T06:09:31.687Z] [worker-pool] Adding worker with key us-central1-generateFiles, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-generateFiles, total=1"}}
[debug] [2023-06-27T06:09:32.714Z] [runtime-status] [6051] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:09:32.716Z] [runtime-status] [6051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:09:32.716Z] [runtime-status] [6051] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-27T06:09:32.716Z] [runtime-status] [6051] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-27T06:09:32.717Z] [runtime-status] [6051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:09:32.935Z] [runtime-status] [6051] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"}}}"}}
[debug] [2023-06-27T06:09:32.935Z] [runtime-status] [6051] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-27T06:09:32.936Z] [runtime-status] [6051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:09:32.937Z] [runtime-status] [6051] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-27T06:09:32.939Z] [runtime-status] [6051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-27T06:09:32.939Z] [runtime-status] [6051] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Notion token: undefined {"user":"Notion token: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: undefined"}}
[info] >  Database ID: undefined {"user":"Database ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: undefined"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  App initialized {"user":"App initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m App initialized"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[debug] [2023-06-27T06:09:33.156Z] [runtime-status] [6051] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-27T06:09:33.156Z] [runtime-status] [6051] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_07eda0a1d24ad2e9.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_07eda0a1d24ad2e9.sock"}}
[debug] [2023-06-27T06:09:33.211Z] [worker-us-central1-generateFiles-5c5c6096-bcdd-4545-bbe4-927c3a170557]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[worker-us-central1-generateFiles-5c5c6096-bcdd-4545-bbe4-927c3a170557]: IDLE"}}
[debug] [2023-06-27T06:09:33.212Z] [worker-pool] submitRequest(triggerId=us-central1-generateFiles) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-generateFiles)"}}
[info] i  functions: Beginning execution of "us-central1-generateFiles" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"Beginning execution of \"us-central1-generateFiles\""}}
[debug] [2023-06-27T06:09:33.212Z] [worker-us-central1-generateFiles-5c5c6096-bcdd-4545-bbe4-927c3a170557]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[worker-us-central1-generateFiles-5c5c6096-bcdd-4545-bbe4-927c3a170557]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  JSON: [object Object] {"user":"JSON: [object Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m JSON: [object Object]"}}
[debug] [2023-06-27T06:09:33.233Z] [runtime-status] [6051] No callable functions auth found {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[runtime-status] [6051] No callable functions auth found"}}
[info] >  [ {"user":"[","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      id: 'root-node', {"user":"    id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node',"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      children: [ [Object] ] {"user":"    children: [ [Object] ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ]"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  {"severity":"ERROR","message":"Unhandled error TypeError [ERR_INVALID_ARG_TYPE]: The \"path\" argument must be of type string. Received undefined\n    at new NodeError (node:internal/errors:372:5)\n    at validateString (node:internal/validators:119:11)\n    at Object.join (node:path:1172:7)\n    at createFilesAndFolders (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:50:30)\n    at createDownloadable (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:71:5)\n    at file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:19:5\n    at newHandler (/Users/maxadam/.config/yarn/global/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:317:16)\n    at fixedLen (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/providers/https.js:74:41)\n    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/common/providers/https.js:458:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\n  code: 'ERR_INVALID_ARG_TYPE'\n}"} {"user":{"severity":"ERROR","message":"Unhandled error TypeError [ERR_INVALID_ARG_TYPE]: The \"path\" argument must be of type string. Received undefined\n    at new NodeError (node:internal/errors:372:5)\n    at validateString (node:internal/validators:119:11)\n    at Object.join (node:path:1172:7)\n    at createFilesAndFolders (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:50:30)\n    at createDownloadable (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:71:5)\n    at file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:19:5\n    at newHandler (/Users/maxadam/.config/yarn/global/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:317:16)\n    at fixedLen (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/providers/https.js:74:41)\n    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/common/providers/https.js:458:32\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\n  code: 'ERR_INVALID_ARG_TYPE'\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"Unhandled error TypeError [ERR_INVALID_ARG_TYPE]: The \\\"path\\\" argument must be of type string. Received undefined\\n    at new NodeError (node:internal/errors:372:5)\\n    at validateString (node:internal/validators:119:11)\\n    at Object.join (node:path:1172:7)\\n    at createFilesAndFolders (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:50:30)\\n    at createDownloadable (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:71:5)\\n    at file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js:19:5\\n    at newHandler (/Users/maxadam/.config/yarn/global/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:317:16)\\n    at fixedLen (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/providers/https.js:74:41)\\n    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/common/providers/https.js:458:32\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\\n  code: 'ERR_INVALID_ARG_TYPE'\\n}\"}"}}
[debug] [2023-06-27T06:09:33.240Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-generateFiles" in 28.196136ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"Finished \"us-central1-generateFiles\" in 28.196136ms"}}
[debug] [2023-06-27T06:09:33.240Z] [worker-us-central1-generateFiles-5c5c6096-bcdd-4545-bbe4-927c3a170557]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"[worker-us-central1-generateFiles-5c5c6096-bcdd-4545-bbe4-927c3a170557]: IDLE"}}
[debug] [2023-06-27T06:09:33.240Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-27T06:09:33.241Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-generateFiles"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-27T06:09:33.241Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/downloadLink-2023-06-27T06:09:31.639Z"],"workRunningCount":1}
[debug] [2023-06-27T06:09:33.245Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1591.611426ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1591.611426ms"}}
[debug] [2023-06-27T06:09:33.245Z] [worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8488a360-06f6-4433-ba51-c020d4d47e33]: IDLE"}}
[debug] [2023-06-27T06:09:33.245Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-27T06:09:33.246Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-27T06:09:33.246Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
