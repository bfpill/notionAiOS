[debug] [2023-06-28T03:40:41.303Z] ----------------------------------------------------------------------
[debug] [2023-06-28T03:40:41.305Z] Command:       /Users/maxadam/.nvm/versions/node/v18.0.0/bin/node /usr/local/bin/firebase emulators:start
[debug] [2023-06-28T03:40:41.305Z] CLI Version:   12.4.0
[debug] [2023-06-28T03:40:41.306Z] Platform:      darwin
[debug] [2023-06-28T03:40:41.306Z] Node Version:  v18.0.0
[debug] [2023-06-28T03:40:41.307Z] Time:          Wed Jun 28 2023 13:40:41 GMT+1000 (Australian Eastern Standard Time)
[debug] [2023-06-28T03:40:41.307Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-06-28T03:40:41.491Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-06-28T03:40:41.492Z] > authorizing via signed-in user (max@v3rv.com)
[debug] [2023-06-28T03:40:41.634Z] openjdk version "11.0.17" 2022-10-18
OpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)
OpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)

[debug] [2023-06-28T03:40:41.636Z] Parsed Java major version: 11
[info] i  emulators: Starting emulators: functions, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, storage"}}
[debug] [2023-06-28T03:40:43.103Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.103Z] [storage] Storage Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.104Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-06-28T03:40:43.134Z] [hub] writing locator at /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/hub-v3rv-notionaios.json
[debug] [2023-06-28T03:40:43.872Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.872Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.872Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, hosting, pubsub {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, hosting, pubsub\u001b[22m"}}
[debug] [2023-06-28T03:40:43.890Z] defaultcredentials: writing to file /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json
[debug] [2023-06-28T03:40:43.893Z] Setting GAC to /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json"}}
[debug] [2023-06-28T03:40:43.895Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig [none]
[debug] [2023-06-28T03:40:44.521Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig 200
[debug] [2023-06-28T03:40:44.521Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig {"projectId":"v3rv-notionaios","storageBucket":"v3rv-notionaios.appspot.com","locationId":"us-central"}
[debug] [2023-06-28T03:40:44.581Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-06-28T03:40:45.718Z] Temp file directory for storage emulator: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/firebase/storage/blobs"}}
[debug] [2023-06-28T03:40:45.755Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-06-28T03:40:45.756Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-06-28T03:40:45.756Z] Starting Emulator UI with command {"binary":"node","args":["/Users/maxadam/.cache/firebase/emulators/ui-v1.11.6/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/maxadam/.cache/firebase/emulators/ui-v1.11.6/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-06-28T03:40:45.936Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-06-28T03:40:45.936Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/Users/maxadam/Desktop/Code/notionOS/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/maxadam/Desktop/Code/notionOS/functions\" for Cloud Functions..."}}
[debug] [2023-06-28T03:40:46.025Z] Validating nodejs source
[debug] [2023-06-28T03:40:47.251Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:40:47.252Z] Building nodejs source
[debug] [2023-06-28T03:40:47.252Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:40:47.256Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:40:47.265Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:40:47.568Z] Serving at port 8223

[debug] [2023-06-28T03:40:48.029Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:40:48.029Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:40:48.030Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:40:48.038Z] Setting up firebase config

[debug] [2023-06-28T03:40:48.043Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:40:48.048Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:40:48.051Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├───────────┼────────────────┼─────────────────────────────────┤
│ Storage   │ 127.0.0.1:9199 │ http://127.0.0.1:4000/storage   │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-06-28T03:41:38.133Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:41:39.137Z] Validating nodejs source
[debug] [2023-06-28T03:41:39.973Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:41:39.974Z] Building nodejs source
[debug] [2023-06-28T03:41:39.974Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:41:39.976Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:41:39.978Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:41:40.233Z] Serving at port 8263

[debug] [2023-06-28T03:41:40.769Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:41:40.770Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:41:40.770Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:41:40.778Z] Setting up firebase config

[debug] [2023-06-28T03:41:40.789Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:41:40.790Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:41:40.794Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:41:49.481Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.481Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.481Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:50.488Z] Validating nodejs source
[debug] [2023-06-28T03:41:51.403Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:41:51.403Z] Building nodejs source
[debug] [2023-06-28T03:41:51.403Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:41:51.404Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:41:51.406Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:41:51.667Z] Serving at port 8037

[debug] [2023-06-28T03:41:51.976Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:41:51.976Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:41:51.976Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:41:51.983Z] Setting up firebase config

[debug] [2023-06-28T03:41:51.988Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:41:51.988Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:41:51.994Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:43:01.287Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:43:02.288Z] Validating nodejs source
[debug] [2023-06-28T03:43:03.170Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:43:03.171Z] Building nodejs source
[debug] [2023-06-28T03:43:03.171Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:43:03.172Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:43:03.172Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:43:03.174Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:43:03.456Z] Serving at port 8100

[debug] [2023-06-28T03:43:03.997Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:43:03.998Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:43:03.999Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:43:04.007Z] Setting up firebase config

[debug] [2023-06-28T03:43:04.012Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:43:04.012Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:43:04.023Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:43:04.173Z] Validating nodejs source
[debug] [2023-06-28T03:43:05.160Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:43:05.160Z] Building nodejs source
[debug] [2023-06-28T03:43:05.160Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:43:05.161Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:43:05.162Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:43:05.454Z] Serving at port 8776

[debug] [2023-06-28T03:43:05.899Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:43:05.900Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:43:05.907Z] Setting up firebase config

[debug] [2023-06-28T03:43:05.916Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:43:05.917Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:43:05.940Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:13.206Z] Validating nodejs source
[debug] [2023-06-28T03:43:14.027Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:43:14.027Z] Building nodejs source
[debug] [2023-06-28T03:43:14.027Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:43:14.028Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:43:14.030Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:43:14.257Z] Serving at port 8778

[debug] [2023-06-28T03:43:14.570Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:43:14.570Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:43:14.571Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:43:14.576Z] Setting up firebase config

[debug] [2023-06-28T03:43:14.582Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:43:14.582Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:43:14.588Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:51:02.958Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:51:03.962Z] Validating nodejs source
[debug] [2023-06-28T03:51:05.099Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:51:05.100Z] Building nodejs source
[debug] [2023-06-28T03:51:05.100Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:51:05.101Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:51:05.102Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:51:05.389Z] Serving at port 8628

[debug] [2023-06-28T03:51:05.858Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:51:05.858Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:51:05.859Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:51:05.867Z] Setting up firebase config

[debug] [2023-06-28T03:51:05.872Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:51:05.873Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:51:05.879Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:51:08.502Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:51:09.504Z] Validating nodejs source
[debug] [2023-06-28T03:51:10.244Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:51:10.245Z] Building nodejs source
[debug] [2023-06-28T03:51:10.245Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:51:10.246Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:51:10.248Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:51:10.475Z] Serving at port 8779

[debug] [2023-06-28T03:51:10.805Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:51:10.805Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:51:10.805Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:51:10.811Z] Setting up firebase config

[debug] [2023-06-28T03:51:10.817Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:51:10.817Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:51:10.823Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:51:14.320Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:51:15.322Z] Validating nodejs source
[debug] [2023-06-28T03:51:16.073Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:51:16.073Z] Building nodejs source
[debug] [2023-06-28T03:51:16.074Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:51:16.075Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:51:16.076Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:51:16.331Z] Serving at port 8871

[debug] [2023-06-28T03:51:16.771Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:51:16.771Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:51:16.771Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:51:16.777Z] Setting up firebase config

[debug] [2023-06-28T03:51:16.783Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:51:16.783Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:51:16.790Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:52:24.225Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:52:25.227Z] Validating nodejs source
[debug] [2023-06-28T03:52:26.062Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:52:26.062Z] Building nodejs source
[debug] [2023-06-28T03:52:26.063Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:52:26.065Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:52:26.067Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:52:26.287Z] Serving at port 8167

[debug] [2023-06-28T03:52:26.628Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:52:26.629Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:52:26.629Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:52:26.635Z] Setting up firebase config

[debug] [2023-06-28T03:52:26.640Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:52:26.641Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:52:26.646Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:52:26.843Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:52:27.846Z] Validating nodejs source
[debug] [2023-06-28T03:52:28.577Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:52:28.577Z] Building nodejs source
[debug] [2023-06-28T03:52:28.577Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:52:28.578Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:52:28.579Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:52:28.806Z] Serving at port 8022

[debug] [2023-06-28T03:52:29.134Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:52:29.134Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:52:29.135Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:52:29.141Z] Setting up firebase config

[debug] [2023-06-28T03:52:29.146Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:52:29.146Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:52:29.152Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:53:53.123Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:53:54.125Z] Validating nodejs source
[debug] [2023-06-28T03:53:55.083Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:53:55.083Z] Building nodejs source
[debug] [2023-06-28T03:53:55.083Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:53:55.084Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:53:55.086Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:53:55.378Z] Serving at port 8188

[debug] [2023-06-28T03:53:55.845Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:53:55.846Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:53:55.846Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:53:55.854Z] Setting up firebase config

[debug] [2023-06-28T03:53:55.859Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:53:55.860Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:53:55.866Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:57:31.214Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:57:32.217Z] Validating nodejs source
[debug] [2023-06-28T03:57:33.160Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:57:33.160Z] Building nodejs source
[debug] [2023-06-28T03:57:33.161Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:57:33.162Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:57:33.163Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:57:33.497Z] Serving at port 8003

[debug] [2023-06-28T03:57:33.950Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:57:33.950Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:57:33.950Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:57:33.959Z] Setting up firebase config

[debug] [2023-06-28T03:57:33.964Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:57:33.965Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:57:33.971Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:57:36.723Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:57:37.724Z] Validating nodejs source
[debug] [2023-06-28T03:57:38.469Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:57:38.469Z] Building nodejs source
[debug] [2023-06-28T03:57:38.469Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:57:38.470Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:57:38.472Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:57:38.734Z] Serving at port 8203

[debug] [2023-06-28T03:57:39.092Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:57:39.092Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:57:39.093Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:57:39.099Z] Setting up firebase config

[debug] [2023-06-28T03:57:39.104Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:57:39.105Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:57:39.111Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:58:24.144Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:25.151Z] Validating nodejs source
[debug] [2023-06-28T03:58:27.153Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:58:27.154Z] Building nodejs source
[debug] [2023-06-28T03:58:27.155Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:58:27.158Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:58:27.161Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:58:27.481Z] Serving at port 8653

[debug] [2023-06-28T03:58:27.576Z] Got response from /__/functions.yaml Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'
[debug] [2023-06-28T03:58:27.578Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:
     ... rom function source: SyntaxError: The requested module 'firebase ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'\n\u0000","position":61,"line":0,"column":61},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:\n     ... rom function source: SyntaxError: The requested module 'firebase ... \n                                         ^"}
[debug] [2023-06-28T03:58:27.581Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default' {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'"}}
[debug] [2023-06-28T03:58:41.950Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:58:42.951Z] Validating nodejs source
[debug] [2023-06-28T03:58:43.744Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:58:43.744Z] Building nodejs source
[debug] [2023-06-28T03:58:43.744Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:58:43.745Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:58:43.747Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:58:44.024Z] Serving at port 8256

[debug] [2023-06-28T03:58:44.176Z] Got response from /__/functions.yaml Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'
[debug] [2023-06-28T03:58:44.176Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:
     ... rom function source: SyntaxError: The requested module 'firebase ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'\n\u0000","position":61,"line":0,"column":61},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:\n     ... rom function source: SyntaxError: The requested module 'firebase ... \n                                         ^"}
[debug] [2023-06-28T03:58:44.195Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default' {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:54.455Z] Validating nodejs source
[debug] [2023-06-28T03:58:55.361Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:58:55.361Z] Building nodejs source
[debug] [2023-06-28T03:58:55.361Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:58:55.364Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:58:55.365Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:58:55.605Z] Serving at port 8509

[debug] [2023-06-28T03:58:56.058Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:58:56.058Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:58:56.058Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:58:56.063Z] Setting up firebase config

[debug] [2023-06-28T03:58:56.065Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T03:58:56.066Z] here in the api

[debug] [2023-06-28T03:58:56.142Z] Initializing file generator

[debug] [2023-06-28T03:58:56.149Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T03:58:56.157Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/api)."}}
[info] ✔  functions[us-central1-generateFiles]: http function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/generateFiles). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/generateFiles)."}}
[debug] [2023-06-28T04:00:11.368Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T04:00:11.751Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T04:00:12.753Z] Validating nodejs source
[debug] [2023-06-28T04:00:13.511Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:13.511Z] Building nodejs source
[debug] [2023-06-28T04:00:13.511Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:13.512Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:13.514Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:13.737Z] Serving at port 8143

[debug] [2023-06-28T04:00:14.074Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:14.074Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:14.075Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:14.082Z] Setting up firebase config

[debug] [2023-06-28T04:00:14.084Z] Initialized and ready to roll

[debug] [2023-06-28T04:00:14.085Z] connector initialized

[debug] [2023-06-28T04:00:14.086Z] here in the api

[debug] [2023-06-28T04:00:14.138Z] Initializing file generator

[debug] [2023-06-28T04:00:14.145Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:14.153Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:00:27.333Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.333Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:28.338Z] Validating nodejs source
[debug] [2023-06-28T04:00:29.232Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:29.232Z] Building nodejs source
[debug] [2023-06-28T04:00:29.232Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:29.233Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:29.234Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:29.519Z] Serving at port 8825

[debug] [2023-06-28T04:00:30.046Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:30.046Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:30.047Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:30.186Z] Setting up firebase config

[debug] [2023-06-28T04:00:30.186Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T04:00:30.187Z] here in the api

[debug] [2023-06-28T04:00:30.259Z] Initializing file generator

[debug] [2023-06-28T04:00:30.266Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:30.270Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:00:44.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T04:00:45.053Z] Validating nodejs source
[debug] [2023-06-28T04:00:45.885Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:45.886Z] Building nodejs source
[debug] [2023-06-28T04:00:45.886Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:45.887Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:45.889Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:46.268Z] Serving at port 8802

[debug] [2023-06-28T04:00:46.616Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:46.617Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:46.617Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:46.688Z] Setting up firebase config

[debug] [2023-06-28T04:00:46.689Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T04:00:46.690Z] here in the api

[debug] [2023-06-28T04:00:46.723Z] Initializing file generator

[debug] [2023-06-28T04:00:46.730Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:46.734Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:00:54.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:55.585Z] Validating nodejs source
[debug] [2023-06-28T04:00:56.315Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:56.316Z] Building nodejs source
[debug] [2023-06-28T04:00:56.316Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:56.318Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:56.320Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:56.549Z] Serving at port 8833

[debug] [2023-06-28T04:00:56.896Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:56.896Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:56.897Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:56.966Z] Setting up firebase config

[debug] [2023-06-28T04:00:56.967Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T04:00:56.968Z] here in the api

[debug] [2023-06-28T04:00:57.001Z] Initializing file generator

[debug] [2023-06-28T04:00:57.007Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:57.011Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:01:07.274Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T04:01:07.274Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T04:01:07.274Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T04:01:07.274Z"],"workRunningCount":1}
[debug] [2023-06-28T04:01:07.275Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T04:01:07.294Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T04:01:07.294Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T04:01:07.303Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T04:01:07.304Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T04:01:08.826Z] [runtime-status] [9148] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T04:01:08.826Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:08.827Z] [runtime-status] [9148] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T04:01:08.827Z] [runtime-status] [9148] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T04:01:08.828Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:09.040Z] [runtime-status] [9148] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T04:01:09.041Z] [runtime-status] [9148] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T04:01:09.041Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:09.043Z] [runtime-status] [9148] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T04:01:09.044Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:09.045Z] [runtime-status] [9148] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T04:01:09.368Z] [runtime-status] [9148] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T04:01:09.368Z] [runtime-status] [9148] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_79a451ede202c315.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_79a451ede202c315.sock"}}
[debug] [2023-06-28T04:01:09.436Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: IDLE"}}
[debug] [2023-06-28T04:01:09.437Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T04:01:09.438Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97"}}
[info] >      const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get(); {"user":"    const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();"}}
[info] >                                    ^ {"user":"                                  ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                   ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: db.collection is not a function {"user":"TypeError: db.collection is not a function","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: db.collection is not a function"}}
[info] >      at Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97:35) {"user":"    at Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97:35)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T04:01:09.476Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T04:01:09.476Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: exited"}}
[debug] [2023-06-28T04:01:09.477Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: FINISHED"}}
[debug] [2023-06-28T05:47:56.323Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:47:57.325Z] Validating nodejs source
[debug] [2023-06-28T05:47:58.366Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:47:58.366Z] Building nodejs source
[debug] [2023-06-28T05:47:58.366Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:47:58.367Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:47:58.371Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:47:58.751Z] Serving at port 8882

[debug] [2023-06-28T05:47:59.332Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:47:59.332Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:47:59.333Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:47:59.457Z] Setting up firebase config

[debug] [2023-06-28T05:47:59.463Z] Initialized and ready to roll
connector initialized
here in the api

[debug] [2023-06-28T05:47:59.572Z] Initializing file generator

[debug] [2023-06-28T05:47:59.580Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:47:59.588Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:48:02.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:48:03.163Z] Validating nodejs source
[debug] [2023-06-28T05:48:04.200Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:48:04.200Z] Building nodejs source
[debug] [2023-06-28T05:48:04.200Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:48:04.201Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:48:04.203Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:48:04.582Z] Serving at port 8470

[debug] [2023-06-28T05:48:05.080Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:48:05.081Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:48:05.081Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:48:05.186Z] Setting up firebase config

[debug] [2023-06-28T05:48:05.187Z] Initialized and ready to roll

[debug] [2023-06-28T05:48:05.187Z] connector initialized

[debug] [2023-06-28T05:48:05.188Z] here in the api

[debug] [2023-06-28T05:48:05.245Z] Initializing file generator

[debug] [2023-06-28T05:48:05.253Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:48:05.258Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:11.989Z] Validating nodejs source
[debug] [2023-06-28T05:48:13.026Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:48:13.026Z] Building nodejs source
[debug] [2023-06-28T05:48:13.026Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:48:13.028Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:48:13.029Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:48:13.336Z] Serving at port 8092

[debug] [2023-06-28T05:48:13.852Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:48:13.852Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:48:13.966Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:48:13.973Z] Setting up firebase config

[debug] [2023-06-28T05:48:13.974Z] Initialized and ready to roll

[debug] [2023-06-28T05:48:13.974Z] connector initialized

[debug] [2023-06-28T05:48:13.975Z] here in the api

[debug] [2023-06-28T05:48:14.043Z] Initializing file generator

[debug] [2023-06-28T05:48:14.050Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:48:14.056Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:48:20.624Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:48:20.624Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:48:20.624Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:48:20.624Z"],"workRunningCount":1}
[debug] [2023-06-28T05:48:20.624Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:48:20.639Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:48:20.640Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:48:20.640Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:48:20.646Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:48:20.647Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:48:22.397Z] [runtime-status] [11432] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:48:22.398Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.398Z] [runtime-status] [11432] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:48:22.399Z] [runtime-status] [11432] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:48:22.400Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.612Z] [runtime-status] [11432] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:48:22.612Z] [runtime-status] [11432] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:48:22.613Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.614Z] [runtime-status] [11432] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:48:22.616Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.616Z] [runtime-status] [11432] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:48:22.951Z] [runtime-status] [11432] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:48:22.952Z] [runtime-status] [11432] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_5ab7d2732f13df5e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_5ab7d2732f13df5e.sock"}}
[debug] [2023-06-28T05:48:22.979Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: IDLE"}}
[debug] [2023-06-28T05:48:22.979Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:48:22.980Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  [2023-06-28T05:48:24.088Z]  @firebase/firestore: Firestore (9.23.0): GrpcConnection RPC 'Write' stream 0x49ebb4bb error. Code: 7 Message: 7 PERMISSION_DENIED: Missing or insufficient permissions. {"user":"[2023-06-28T05:48:24.088Z]  @firebase/firestore: Firestore (9.23.0): GrpcConnection RPC 'Write' stream 0x49ebb4bb error. Code: 7 Message: 7 PERMISSION_DENIED: Missing or insufficient permissions.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [2023-06-28T05:48:24.088Z]  @firebase/firestore: Firestore (9.23.0): GrpcConnection RPC 'Write' stream 0x49ebb4bb error. Code: 7 Message: 7 PERMISSION_DENIED: Missing or insufficient permissions."}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  [FirebaseError: 7 PERMISSION_DENIED: Missing or insufficient permissions.] { {"user":"[FirebaseError: 7 PERMISSION_DENIED: Missing or insufficient permissions.] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [FirebaseError: 7 PERMISSION_DENIED: Missing or insufficient permissions.] {"}}
[info] >    code: 'permission-denied', {"user":"  code: 'permission-denied',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'permission-denied',"}}
[info] >    customData: undefined, {"user":"  customData: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customData: undefined,"}}
[info] >    toString: [Function (anonymous)] {"user":"  toString: [Function (anonymous)]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   toString: [Function (anonymous)]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T05:48:24.108Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:48:24.109Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: exited"}}
[debug] [2023-06-28T05:48:24.109Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: FINISHED"}}
[debug] [2023-06-28T05:50:12.265Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:50:13.267Z] Validating nodejs source
[debug] [2023-06-28T05:50:14.166Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:50:14.166Z] Building nodejs source
[debug] [2023-06-28T05:50:14.167Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:50:14.168Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:50:14.170Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:50:14.546Z] Serving at port 8031

[debug] [2023-06-28T05:50:15.212Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:50:15.212Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:50:15.332Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:50:15.338Z] Setting up firebase config

[debug] [2023-06-28T05:50:15.339Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:50:15.340Z] here in the api

[debug] [2023-06-28T05:50:15.413Z] Initializing file generator

[debug] [2023-06-28T05:50:15.420Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:50:15.431Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:50:23.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:24.384Z] Validating nodejs source
[debug] [2023-06-28T05:50:25.275Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:50:25.275Z] Building nodejs source
[debug] [2023-06-28T05:50:25.275Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:50:25.276Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:50:25.278Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:50:25.592Z] Serving at port 8310

[debug] [2023-06-28T05:50:26.122Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:50:26.122Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:50:26.236Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:50:26.243Z] Setting up firebase config

[debug] [2023-06-28T05:50:26.244Z] Initialized and ready to roll

[debug] [2023-06-28T05:50:26.244Z] connector initialized

[debug] [2023-06-28T05:50:26.245Z] here in the api

[debug] [2023-06-28T05:50:26.309Z] Initializing file generator

[debug] [2023-06-28T05:50:26.316Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:50:26.320Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:50:32.877Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:50:32.877Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:50:32.877Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:50:32.877Z"],"workRunningCount":1}
[debug] [2023-06-28T05:50:32.878Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:50:32.894Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:50:32.895Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:50:32.895Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:50:32.902Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:50:32.903Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:50:34.445Z] [runtime-status] [11491] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:50:34.446Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.447Z] [runtime-status] [11491] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:50:34.447Z] [runtime-status] [11491] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:50:34.448Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.665Z] [runtime-status] [11491] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:50:34.665Z] [runtime-status] [11491] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:50:34.669Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.670Z] [runtime-status] [11491] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:50:34.672Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.672Z] [runtime-status] [11491] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:50:35.007Z] [runtime-status] [11491] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:50:35.007Z] [runtime-status] [11491] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_a7456f37a7c0f74e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_a7456f37a7c0f74e.sock"}}
[debug] [2023-06-28T05:50:35.031Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE"}}
[debug] [2023-06-28T05:50:35.032Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:50:35.032Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T05:50:35.971Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 939.153613ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 939.153613ms"}}
[debug] [2023-06-28T05:50:35.972Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE"}}
[debug] [2023-06-28T05:50:35.972Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T05:50:35.972Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T05:50:35.972Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:53:06.701Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:53:07.703Z] Validating nodejs source
[debug] [2023-06-28T05:53:08.661Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:53:08.661Z] Building nodejs source
[debug] [2023-06-28T05:53:08.661Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:53:08.662Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:53:08.663Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:53:09.133Z] Serving at port 8420

[debug] [2023-06-28T05:53:09.674Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:53:09.674Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:53:09.782Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:53:09.789Z] Setting up firebase config

[debug] [2023-06-28T05:53:09.790Z] Initialized and ready to roll

[debug] [2023-06-28T05:53:09.790Z] connector initialized

[debug] [2023-06-28T05:53:09.790Z] here in the api

[debug] [2023-06-28T05:53:09.853Z] Initializing file generator

[debug] [2023-06-28T05:53:09.861Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:53:09.865Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:53:09.877Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T05:53:09.877Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHING"}}
[debug] [2023-06-28T05:53:09.892Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: exited"}}
[debug] [2023-06-28T05:53:09.892Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHED"}}
[debug] [2023-06-28T05:53:13.713Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:53:14.715Z] Validating nodejs source
[debug] [2023-06-28T05:53:15.510Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:53:15.510Z] Building nodejs source
[debug] [2023-06-28T05:53:15.510Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:53:15.511Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:53:15.513Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:53:15.726Z] Serving at port 8853

[debug] [2023-06-28T05:53:16.075Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:53:16.076Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:53:16.144Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:53:16.150Z] Setting up firebase config

[debug] [2023-06-28T05:53:16.151Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:53:16.151Z] here in the api

[debug] [2023-06-28T05:53:16.185Z] Initializing file generator

[debug] [2023-06-28T05:53:16.192Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:53:16.196Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:53:31.775Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:53:32.777Z] Validating nodejs source
[debug] [2023-06-28T05:53:33.574Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:53:33.574Z] Building nodejs source
[debug] [2023-06-28T05:53:33.575Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:53:33.576Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:53:33.577Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:53:33.841Z] Serving at port 8209

[debug] [2023-06-28T05:53:34.203Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:53:34.204Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:53:34.271Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:53:34.276Z] Setting up firebase config

[debug] [2023-06-28T05:53:34.277Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:53:34.278Z] here in the api

[debug] [2023-06-28T05:53:34.311Z] Initializing file generator

[debug] [2023-06-28T05:53:34.318Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:53:34.323Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:54:42.917Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:54:43.919Z] Validating nodejs source
[debug] [2023-06-28T05:54:44.688Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:54:44.688Z] Building nodejs source
[debug] [2023-06-28T05:54:44.689Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:54:44.690Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:54:44.692Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:54:45.016Z] Serving at port 8666

[debug] [2023-06-28T05:54:45.387Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:54:45.387Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:54:45.452Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:54:45.457Z] Setting up firebase config

[debug] [2023-06-28T05:54:45.457Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:54:45.458Z] here in the api

[debug] [2023-06-28T05:54:45.491Z] Initializing file generator

[debug] [2023-06-28T05:54:45.497Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:54:45.502Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:54:58.082Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:54:59.083Z] Validating nodejs source
[debug] [2023-06-28T05:54:59.835Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:54:59.835Z] Building nodejs source
[debug] [2023-06-28T05:54:59.835Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:54:59.836Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:54:59.838Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:55:00.074Z] Serving at port 8399

[debug] [2023-06-28T05:55:00.430Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:55:00.430Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:55:00.496Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:55:00.501Z] Setting up firebase config

[debug] [2023-06-28T05:55:00.502Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:55:00.503Z] here in the api

[debug] [2023-06-28T05:55:00.536Z] Initializing file generator

[debug] [2023-06-28T05:55:00.543Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:55:00.548Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:55:43.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:55:44.750Z] Validating nodejs source
[debug] [2023-06-28T05:55:45.526Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:55:45.526Z] Building nodejs source
[debug] [2023-06-28T05:55:45.526Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:55:45.527Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:55:45.528Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:55:45.761Z] Serving at port 8223

[debug] [2023-06-28T05:55:46.158Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:55:46.159Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:55:46.226Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:55:46.231Z] Setting up firebase config

[debug] [2023-06-28T05:55:46.232Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:55:46.233Z] here in the api

[debug] [2023-06-28T05:55:46.267Z] Initializing file generator

[debug] [2023-06-28T05:55:46.274Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:55:46.279Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:57.683Z] Validating nodejs source
[debug] [2023-06-28T05:55:58.587Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:55:58.587Z] Building nodejs source
[debug] [2023-06-28T05:55:58.587Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:55:58.588Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:55:58.589Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:55:58.870Z] Serving at port 8446

[debug] [2023-06-28T05:55:59.398Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:55:59.398Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:55:59.524Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:55:59.530Z] Setting up firebase config

[debug] [2023-06-28T05:55:59.530Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:55:59.531Z] here in the api

[debug] [2023-06-28T05:55:59.604Z] Initializing file generator

[debug] [2023-06-28T05:55:59.611Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:55:59.615Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:56:15.080Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:56:16.082Z] Validating nodejs source
[debug] [2023-06-28T05:56:16.917Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:56:16.918Z] Building nodejs source
[debug] [2023-06-28T05:56:16.918Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:56:16.919Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:56:16.921Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:56:17.323Z] Serving at port 8139

[debug] [2023-06-28T05:56:17.694Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:56:17.695Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:56:17.763Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:56:17.768Z] Setting up firebase config

[debug] [2023-06-28T05:56:17.769Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:56:17.770Z] here in the api

[debug] [2023-06-28T05:56:17.803Z] Initializing file generator

[debug] [2023-06-28T05:56:17.809Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:56:17.814Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:56:24.475Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.477Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.477Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.477Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:25.580Z] Validating nodejs source
[debug] [2023-06-28T05:56:26.321Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:56:26.321Z] Building nodejs source
[debug] [2023-06-28T05:56:26.321Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:56:26.322Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:56:26.323Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:56:26.554Z] Serving at port 8964

[debug] [2023-06-28T05:56:26.907Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:56:26.907Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:56:26.976Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:56:26.981Z] Setting up firebase config

[debug] [2023-06-28T05:56:26.982Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:56:26.983Z] here in the api

[debug] [2023-06-28T05:56:27.017Z] Initializing file generator

[debug] [2023-06-28T05:56:27.024Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:56:27.028Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:56:41.552Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:56:41.552Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:56:41.553Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:56:41.552Z"],"workRunningCount":1}
[debug] [2023-06-28T05:56:41.553Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:56:41.570Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:56:41.570Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:56:41.571Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:56:41.578Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:56:41.578Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:56:43.147Z] [runtime-status] [11641] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:56:43.148Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.148Z] [runtime-status] [11641] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:56:43.149Z] [runtime-status] [11641] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:56:43.149Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.367Z] [runtime-status] [11641] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:56:43.367Z] [runtime-status] [11641] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:56:43.368Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.370Z] [runtime-status] [11641] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:56:43.372Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.372Z] [runtime-status] [11641] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:56:43.699Z] [runtime-status] [11641] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:56:43.699Z] [runtime-status] [11641] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0a40200165b4e81f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0a40200165b4e81f.sock"}}
[debug] [2023-06-28T05:56:43.711Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: IDLE"}}
[debug] [2023-06-28T05:56:43.711Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:56:43.713Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151"}}
[info] >      const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get(); {"user":"    const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();"}}
[info] >                                    ^ {"user":"                                  ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                   ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: db.collection is not a function {"user":"TypeError: db.collection is not a function","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: db.collection is not a function"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T05:56:43.752Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:56:43.753Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: exited"}}
[debug] [2023-06-28T05:56:43.754Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: FINISHED"}}
[debug] [2023-06-28T05:59:13.246Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:14.248Z] Validating nodejs source
[debug] [2023-06-28T05:59:15.024Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:15.024Z] Building nodejs source
[debug] [2023-06-28T05:59:15.024Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:15.025Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:15.027Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:15.292Z] Serving at port 8624

[debug] [2023-06-28T05:59:15.664Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:15.664Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:15.736Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:15.742Z] Setting up firebase config

[debug] [2023-06-28T05:59:15.743Z] Initialized and ready to roll

[debug] [2023-06-28T05:59:15.743Z] connector initialized

[debug] [2023-06-28T05:59:15.744Z] here in the api

[debug] [2023-06-28T05:59:15.803Z] Initializing file generator

[debug] [2023-06-28T05:59:15.810Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:15.815Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:20.507Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:20.607Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:21.610Z] Validating nodejs source
[debug] [2023-06-28T05:59:22.344Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:22.344Z] Building nodejs source
[debug] [2023-06-28T05:59:22.345Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:22.346Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:22.347Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:22.585Z] Serving at port 8575

[debug] [2023-06-28T05:59:22.936Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:22.936Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:23.004Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:23.010Z] Setting up firebase config

[debug] [2023-06-28T05:59:23.011Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:59:23.011Z] here in the api

[debug] [2023-06-28T05:59:23.053Z] Initializing file generator

[debug] [2023-06-28T05:59:23.054Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:23.059Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:26.895Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:26.995Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:27.997Z] Validating nodejs source
[debug] [2023-06-28T05:59:28.745Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:28.746Z] Building nodejs source
[debug] [2023-06-28T05:59:28.746Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:28.747Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:28.748Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:29.011Z] Serving at port 8028

[debug] [2023-06-28T05:59:29.358Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:29.358Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:29.428Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:29.434Z] Setting up firebase config

[debug] [2023-06-28T05:59:29.434Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:59:29.435Z] here in the api

[debug] [2023-06-28T05:59:29.469Z] Initializing file generator

[debug] [2023-06-28T05:59:29.475Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:29.480Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:39.675Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.675Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:40.681Z] Validating nodejs source
[debug] [2023-06-28T05:59:41.659Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:41.660Z] Building nodejs source
[debug] [2023-06-28T05:59:41.660Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:41.661Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:41.663Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:41.950Z] Serving at port 8175

[debug] [2023-06-28T05:59:42.453Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:42.454Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:42.575Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:42.580Z] Setting up firebase config

[debug] [2023-06-28T05:59:42.581Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:59:42.582Z] here in the api

[debug] [2023-06-28T05:59:42.654Z] Initializing file generator

[debug] [2023-06-28T05:59:42.661Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:42.670Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:46.706Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:59:46.706Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:59:46.706Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:59:46.706Z"],"workRunningCount":1}
[debug] [2023-06-28T05:59:46.706Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:59:46.724Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:59:46.724Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:59:46.725Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:59:46.732Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:59:46.733Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:59:48.375Z] [runtime-status] [11716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:59:48.376Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.376Z] [runtime-status] [11716] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:59:48.377Z] [runtime-status] [11716] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:59:48.378Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.595Z] [runtime-status] [11716] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:59:48.595Z] [runtime-status] [11716] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:59:48.596Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.598Z] [runtime-status] [11716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:59:48.599Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.600Z] [runtime-status] [11716] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:59:48.932Z] [runtime-status] [11716] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:59:48.933Z] [runtime-status] [11716] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_bcf010199fefcce8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_bcf010199fefcce8.sock"}}
[debug] [2023-06-28T05:59:48.963Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE"}}
[debug] [2023-06-28T05:59:48.963Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:59:48.964Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T05:59:49.912Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 948.296698ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 948.296698ms"}}
[debug] [2023-06-28T05:59:49.912Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE"}}
[debug] [2023-06-28T05:59:49.913Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T05:59:49.913Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T05:59:49.913Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:00:59.813Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:00:59.813Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:00:59.813Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:00:59.813Z"],"workRunningCount":1}
[debug] [2023-06-28T06:00:59.813Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:00:59.827Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:00:59.827Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:00:59.828Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:00:59.828Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"root"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"root"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"root\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"root\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16) {"user":"    at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:01:01 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:01:01 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:01:01 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '240' ], {"user":"      'content-length': [ '240' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '240' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8"' ], {"user":"      etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=bBZmI29uenOatK3O9I12cF.O8gZVd0Hc8gGKF4lVDZ0-1687932061-0-AbuF1VAKcEvIa1YRzI3fspYc9fEbvK8oZOEUlkDSKIR6Ohx/NnLmq3KgBNFpvFqyXXL1ftBAXEvF2TvpFJy3+zo=; path=/; expires=Wed, 28-Jun-23 06:31:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=bBZmI29uenOatK3O9I12cF.O8gZVd0Hc8gGKF4lVDZ0-1687932061-0-AbuF1VAKcEvIa1YRzI3fspYc9fEbvK8oZOEUlkDSKIR6Ohx/NnLmq3KgBNFpvFqyXXL1ftBAXEvF2TvpFJy3+zo=; path=/; expires=Wed, 28-Jun-23 06:31:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=bBZmI29uenOatK3O9I12cF.O8gZVd0Hc8gGKF4lVDZ0-1687932061-0-AbuF1VAKcEvIa1YRzI3fspYc9fEbvK8oZOEUlkDSKIR6Ohx/NnLmq3KgBNFpvFqyXXL1ftBAXEvF2TvpFJy3+zo=; path=/; expires=Wed, 28-Jun-23 06:31:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3b6730c072e94-MEL' ] {"user":"      'cf-ray': [ '7de3b6730c072e94-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3b6730c072e94-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"root\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:01:01.428Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:01:01.428Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: exited"}}
[debug] [2023-06-28T06:01:01.429Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: FINISHED"}}
[debug] [2023-06-28T06:02:02.097Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:02:02.097Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:02:02.097Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:02:02.097Z"],"workRunningCount":1}
[debug] [2023-06-28T06:02:02.097Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:02:02.111Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:02:02.111Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:02:02.111Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:02:02.118Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:02:02.118Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:02:03.869Z] [runtime-status] [11753] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:02:03.871Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:03.871Z] [runtime-status] [11753] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:02:03.872Z] [runtime-status] [11753] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:02:03.873Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:04.225Z] [runtime-status] [11753] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:02:04.225Z] [runtime-status] [11753] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:02:04.226Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:04.228Z] [runtime-status] [11753] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:02:04.231Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:04.231Z] [runtime-status] [11753] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:02:04.710Z] [runtime-status] [11753] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:02:04.711Z] [runtime-status] [11753] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_f0b3bb9135214e50.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_f0b3bb9135214e50.sock"}}
[debug] [2023-06-28T06:02:04.750Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: IDLE"}}
[debug] [2023-06-28T06:02:04.751Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:02:04.751Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16) {"user":"    at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:02:06 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:02:06 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:02:06 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '256' ], {"user":"      'content-length': [ '256' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '256' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"100-MNtleM2Y9bevYOfEyKimA9N2L9s"' ], {"user":"      etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=TL6slLn0W8O60aciAXDZaPffLV0J6sEwyRqw4vpkKlQ-1687932126-0-ARMAg6UXaT9LmzOzIvillSuE+srC0edAs9UQ3uiaSLaUJ+KKE8Gx7eK7UM6deYDqjbX58D6a1bQk04sPowwMmY8=; path=/; expires=Wed, 28-Jun-23 06:32:06 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=TL6slLn0W8O60aciAXDZaPffLV0J6sEwyRqw4vpkKlQ-1687932126-0-ARMAg6UXaT9LmzOzIvillSuE+srC0edAs9UQ3uiaSLaUJ+KKE8Gx7eK7UM6deYDqjbX58D6a1bQk04sPowwMmY8=; path=/; expires=Wed, 28-Jun-23 06:32:06 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=TL6slLn0W8O60aciAXDZaPffLV0J6sEwyRqw4vpkKlQ-1687932126-0-ARMAg6UXaT9LmzOzIvillSuE+srC0edAs9UQ3uiaSLaUJ+KKE8Gx7eK7UM6deYDqjbX58D6a1bQk04sPowwMmY8=; path=/; expires=Wed, 28-Jun-23 06:32:06 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3b80b5cc73772-MEL' ] {"user":"      'cf-ray': [ '7de3b80b5cc73772-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3b80b5cc73772-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"V9LxiYXUeTklJ7Op5HKU\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:02:06.751Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:02:06.751Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: exited"}}
[debug] [2023-06-28T06:02:06.751Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: FINISHED"}}
[debug] [2023-06-28T06:04:00.945Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:04:00.945Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:04:00.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:04:00.945Z"],"workRunningCount":1}
[debug] [2023-06-28T06:04:00.945Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:04:00.959Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:04:00.959Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:04:00.959Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:04:00.965Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:04:00.965Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:04:01.979Z] [runtime-status] [11773] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:04:01.981Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:01.981Z] [runtime-status] [11773] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:04:01.981Z] [runtime-status] [11773] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:04:01.982Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:02.201Z] [runtime-status] [11773] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:04:02.201Z] [runtime-status] [11773] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:04:02.202Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:02.203Z] [runtime-status] [11773] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:04:02.205Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:02.205Z] [runtime-status] [11773] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:04:02.516Z] [runtime-status] [11773] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:04:02.517Z] [runtime-status] [11773] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0b160c73015058da.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0b160c73015058da.sock"}}
[debug] [2023-06-28T06:04:02.588Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: IDLE"}}
[debug] [2023-06-28T06:04:02.588Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:04:02.589Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16) {"user":"    at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:04:04 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:04:04 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:04:04 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '256' ], {"user":"      'content-length': [ '256' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '256' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"100-MNtleM2Y9bevYOfEyKimA9N2L9s"' ], {"user":"      etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=Uz7C0mUQTgdkn4qU6.6QvG.6B3moeeIMNbzB4OgUxmE-1687932244-0-ASS9zLOSIDj5UHMbJy1d6TigVXyx3BPVKsLEXc/Ws+eDf6RW0qcXKxDRRdnjNqePdFt0NhtcQtJwc8EL7iIEHjg=; path=/; expires=Wed, 28-Jun-23 06:34:04 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=Uz7C0mUQTgdkn4qU6.6QvG.6B3moeeIMNbzB4OgUxmE-1687932244-0-ASS9zLOSIDj5UHMbJy1d6TigVXyx3BPVKsLEXc/Ws+eDf6RW0qcXKxDRRdnjNqePdFt0NhtcQtJwc8EL7iIEHjg=; path=/; expires=Wed, 28-Jun-23 06:34:04 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=Uz7C0mUQTgdkn4qU6.6QvG.6B3moeeIMNbzB4OgUxmE-1687932244-0-ASS9zLOSIDj5UHMbJy1d6TigVXyx3BPVKsLEXc/Ws+eDf6RW0qcXKxDRRdnjNqePdFt0NhtcQtJwc8EL7iIEHjg=; path=/; expires=Wed, 28-Jun-23 06:34:04 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3baeb88082b38-MEL' ] {"user":"      'cf-ray': [ '7de3baeb88082b38-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3baeb88082b38-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"V9LxiYXUeTklJ7Op5HKU\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:04:04.630Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:04:04.631Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: exited"}}
[debug] [2023-06-28T06:04:04.631Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: FINISHED"}}
[debug] [2023-06-28T06:06:21.849Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:06:22.850Z] Validating nodejs source
[debug] [2023-06-28T06:06:23.820Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:06:23.820Z] Building nodejs source
[debug] [2023-06-28T06:06:23.820Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:06:23.821Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:06:23.823Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:06:24.054Z] Serving at port 8539

[debug] [2023-06-28T06:06:24.421Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:06:24.421Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:06:24.491Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:06:24.496Z] Setting up firebase config

[debug] [2023-06-28T06:06:24.498Z] Initialized and ready to roll

[debug] [2023-06-28T06:06:24.498Z] connector initialized

[debug] [2023-06-28T06:06:24.498Z] here in the api

[debug] [2023-06-28T06:06:24.536Z] Initializing file generator

[debug] [2023-06-28T06:06:24.542Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:06:24.547Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:07:09.092Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:07:10.093Z] Validating nodejs source
[debug] [2023-06-28T06:07:10.989Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:07:10.990Z] Building nodejs source
[debug] [2023-06-28T06:07:10.990Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:07:10.991Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:07:10.992Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:07:11.264Z] Serving at port 8076

[debug] [2023-06-28T06:07:11.617Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:07:11.618Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:07:11.685Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:07:11.690Z] Setting up firebase config

[debug] [2023-06-28T06:07:11.691Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:07:11.692Z] here in the api

[debug] [2023-06-28T06:07:11.726Z] Initializing file generator

[debug] [2023-06-28T06:07:11.732Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:07:11.737Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:08:21.562Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.562Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:22.568Z] Validating nodejs source
[debug] [2023-06-28T06:08:23.500Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:08:23.500Z] Building nodejs source
[debug] [2023-06-28T06:08:23.500Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:08:23.501Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:08:23.502Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:08:23.829Z] Serving at port 8557

[debug] [2023-06-28T06:08:24.355Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:08:24.356Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:08:24.483Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:08:24.489Z] Setting up firebase config

[debug] [2023-06-28T06:08:24.490Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:08:24.491Z] here in the api

[debug] [2023-06-28T06:08:24.562Z] Initializing file generator

[debug] [2023-06-28T06:08:24.568Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:08:24.573Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:08:28.714Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:08:28.714Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:08:28.714Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:08:28.714Z"],"workRunningCount":1}
[debug] [2023-06-28T06:08:28.714Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:08:28.729Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:08:28.730Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:08:28.730Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:08:28.736Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:08:28.736Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:08:30.328Z] [runtime-status] [11861] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:08:30.329Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.329Z] [runtime-status] [11861] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:08:30.330Z] [runtime-status] [11861] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:08:30.331Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.560Z] [runtime-status] [11861] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:08:30.561Z] [runtime-status] [11861] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:08:30.561Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.562Z] [runtime-status] [11861] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:08:30.564Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.564Z] [runtime-status] [11861] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:08:30.922Z] [runtime-status] [11861] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:08:30.922Z] [runtime-status] [11861] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b232095aa8e21cc0.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b232095aa8e21cc0.sock"}}
[debug] [2023-06-28T06:08:30.968Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: IDLE"}}
[debug] [2023-06-28T06:08:30.968Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:08:30.969Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151"}}
[info] >      const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get(); {"user":"    const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();"}}
[info] >                                    ^ {"user":"                                  ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                   ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: db.collection is not a function {"user":"TypeError: db.collection is not a function","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: db.collection is not a function"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:08:31.012Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:08:31.012Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: exited"}}
[debug] [2023-06-28T06:08:31.012Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: FINISHED"}}
[debug] [2023-06-28T06:08:40.048Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:08:41.049Z] Validating nodejs source
[debug] [2023-06-28T06:08:41.921Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:08:41.921Z] Building nodejs source
[debug] [2023-06-28T06:08:41.921Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:08:41.922Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:08:41.923Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:08:42.182Z] Serving at port 8592

[debug] [2023-06-28T06:08:42.567Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:08:42.567Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:08:42.634Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:08:42.639Z] Setting up firebase config

[debug] [2023-06-28T06:08:42.640Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:08:42.640Z] here in the api

[debug] [2023-06-28T06:08:42.674Z] Initializing file generator

[debug] [2023-06-28T06:08:42.681Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:08:42.685Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:09:17.358Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:18.359Z] Validating nodejs source
[debug] [2023-06-28T06:09:19.188Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:09:19.188Z] Building nodejs source
[debug] [2023-06-28T06:09:19.188Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:09:19.190Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:09:19.191Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:09:19.433Z] Serving at port 8890

[debug] [2023-06-28T06:09:19.781Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:09:19.782Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:09:19.847Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:09:19.852Z] Setting up firebase config

[debug] [2023-06-28T06:09:19.853Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:09:19.854Z] here in the api

[debug] [2023-06-28T06:09:19.887Z] Initializing file generator

[debug] [2023-06-28T06:09:19.894Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:09:19.898Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:09:24.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:25.240Z] Validating nodejs source
[debug] [2023-06-28T06:09:26.006Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:09:26.007Z] Building nodejs source
[debug] [2023-06-28T06:09:26.007Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:09:26.008Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:09:26.009Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:09:26.256Z] Serving at port 8961

[debug] [2023-06-28T06:09:26.610Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:09:26.610Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:09:26.682Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:09:26.688Z] Setting up firebase config

[debug] [2023-06-28T06:09:26.689Z] Initialized and ready to roll

[debug] [2023-06-28T06:09:26.689Z] connector initialized

[debug] [2023-06-28T06:09:26.690Z] here in the api

[debug] [2023-06-28T06:09:26.729Z] Initializing file generator

[debug] [2023-06-28T06:09:26.736Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:09:26.741Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:09:29.990Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:30.089Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:31.090Z] Validating nodejs source
[debug] [2023-06-28T06:09:31.856Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:09:31.856Z] Building nodejs source
[debug] [2023-06-28T06:09:31.856Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:09:31.858Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:09:31.860Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:09:32.161Z] Serving at port 8741

[debug] [2023-06-28T06:09:32.526Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:09:32.527Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:09:32.594Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:09:32.599Z] Setting up firebase config

[debug] [2023-06-28T06:09:32.600Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:09:32.600Z] here in the api

[debug] [2023-06-28T06:09:32.633Z] Initializing file generator

[debug] [2023-06-28T06:09:32.640Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:09:32.644Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:10:33.524Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:10:34.525Z] Validating nodejs source
[debug] [2023-06-28T06:10:35.522Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:10:35.522Z] Building nodejs source
[debug] [2023-06-28T06:10:35.522Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:10:35.523Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:10:35.525Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:10:35.812Z] Serving at port 8383

[debug] [2023-06-28T06:10:36.376Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:10:36.376Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:10:36.465Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:10:36.471Z] Setting up firebase config

[debug] [2023-06-28T06:10:36.473Z] Initialized and ready to roll

[debug] [2023-06-28T06:10:36.473Z] connector initialized

[debug] [2023-06-28T06:10:36.474Z] here in the api

[debug] [2023-06-28T06:10:36.516Z] Initializing file generator

[debug] [2023-06-28T06:10:36.523Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:10:36.528Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:43.576Z] Validating nodejs source
[debug] [2023-06-28T06:10:44.417Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:10:44.418Z] Building nodejs source
[debug] [2023-06-28T06:10:44.418Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:10:44.419Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:10:44.420Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:10:44.643Z] Serving at port 8982

[debug] [2023-06-28T06:10:44.986Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:10:44.987Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:10:45.052Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:10:45.057Z] Setting up firebase config

[debug] [2023-06-28T06:10:45.058Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:10:45.058Z] here in the api

[debug] [2023-06-28T06:10:45.091Z] Initializing file generator

[debug] [2023-06-28T06:10:45.098Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:10:45.102Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:10:47.893Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:10:47.893Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:10:47.893Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:10:47.893Z"],"workRunningCount":1}
[debug] [2023-06-28T06:10:47.894Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:10:47.910Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:10:47.910Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:10:47.911Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:10:47.918Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:10:47.919Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:10:49.480Z] [runtime-status] [11927] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:10:49.481Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.481Z] [runtime-status] [11927] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:10:49.482Z] [runtime-status] [11927] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:10:49.483Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.696Z] [runtime-status] [11927] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:10:49.696Z] [runtime-status] [11927] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:10:49.697Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.698Z] [runtime-status] [11927] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:10:49.700Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.700Z] [runtime-status] [11927] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:10:50.028Z] [runtime-status] [11927] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:10:50.028Z] [runtime-status] [11927] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9b45d6098d53da6b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9b45d6098d53da6b.sock"}}
[debug] [2023-06-28T06:10:50.044Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE"}}
[debug] [2023-06-28T06:10:50.045Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:10:50.046Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:10:50.995Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 949.964941ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 949.964941ms"}}
[debug] [2023-06-28T06:10:50.996Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE"}}
[debug] [2023-06-28T06:10:50.996Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:10:50.996Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:10:50.996Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:11:32.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:11:33.224Z] Validating nodejs source
[debug] [2023-06-28T06:11:34.010Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:11:34.011Z] Building nodejs source
[debug] [2023-06-28T06:11:34.011Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:11:34.012Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:11:34.014Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:11:34.264Z] Serving at port 8755

[debug] [2023-06-28T06:11:34.624Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:11:34.625Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:11:34.694Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:11:34.700Z] Setting up firebase config

[debug] [2023-06-28T06:11:34.701Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:11:34.702Z] here in the api

[debug] [2023-06-28T06:11:34.775Z] Initializing file generator

[debug] [2023-06-28T06:11:34.782Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:11:34.786Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:11:34.799Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:11:34.799Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHING"}}
[debug] [2023-06-28T06:11:34.809Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: exited"}}
[debug] [2023-06-28T06:11:34.809Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHED"}}
[debug] [2023-06-28T06:11:44.882Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.882Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:45.887Z] Validating nodejs source
[debug] [2023-06-28T06:11:46.813Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:11:46.813Z] Building nodejs source
[debug] [2023-06-28T06:11:46.813Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:11:46.814Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:11:46.816Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:11:47.103Z] Serving at port 8470

[debug] [2023-06-28T06:11:47.725Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:11:47.726Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:11:47.850Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:11:47.856Z] Setting up firebase config

[debug] [2023-06-28T06:11:47.857Z] Initialized and ready to roll

[debug] [2023-06-28T06:11:47.857Z] connector initialized

[debug] [2023-06-28T06:11:47.857Z] here in the api

[debug] [2023-06-28T06:11:47.930Z] Initializing file generator

[debug] [2023-06-28T06:11:47.937Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:11:47.941Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:11:49.029Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:11:49.029Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:11:49.029Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:11:49.029Z"],"workRunningCount":1}
[debug] [2023-06-28T06:11:49.030Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:11:49.048Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:11:49.049Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:11:49.049Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:11:49.058Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:11:49.059Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:11:50.606Z] [runtime-status] [11966] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:11:50.608Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.608Z] [runtime-status] [11966] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:11:50.608Z] [runtime-status] [11966] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:11:50.609Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.821Z] [runtime-status] [11966] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:11:50.821Z] [runtime-status] [11966] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:11:50.822Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.823Z] [runtime-status] [11966] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:11:50.825Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.825Z] [runtime-status] [11966] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:11:51.159Z] [runtime-status] [11966] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:11:51.159Z] [runtime-status] [11966] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_7a49e3d841177147.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_7a49e3d841177147.sock"}}
[debug] [2023-06-28T06:11:51.188Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:11:51.189Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:11:51.189Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:11:52.228Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1038.644523ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1038.644523ms"}}
[debug] [2023-06-28T06:11:52.228Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:11:52.228Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:11:52.228Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:11:52.228Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:22.211Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:22.211Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:22.212Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:22.211Z"],"workRunningCount":1}
[debug] [2023-06-28T06:12:22.212Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:12:22.225Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:12:22.226Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:12:22.226Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:12:22.226Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:12:23.031Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 805.367672ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 805.367672ms"}}
[debug] [2023-06-28T06:12:23.032Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:12:23.032Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:12:23.032Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:12:23.032Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:28.285Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:28.285Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:28.286Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:28.285Z"],"workRunningCount":1}
[debug] [2023-06-28T06:12:28.286Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:12:28.299Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:12:28.299Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:12:28.299Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:12:28.299Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:12:28.872Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 572.61838ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 572.61838ms"}}
[debug] [2023-06-28T06:12:28.872Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:12:28.872Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:12:28.872Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:12:28.872Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:55.567Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:12:56.568Z] Validating nodejs source
[debug] [2023-06-28T06:12:57.606Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:12:57.606Z] Building nodejs source
[debug] [2023-06-28T06:12:57.606Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:12:57.607Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:12:57.608Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:12:57.845Z] Serving at port 8290

[debug] [2023-06-28T06:12:58.361Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:12:58.362Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:12:58.487Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:12:58.496Z] Setting up firebase config

[debug] [2023-06-28T06:12:58.498Z] Initialized and ready to roll

[debug] [2023-06-28T06:12:58.499Z] connector initialized

[debug] [2023-06-28T06:12:58.503Z] here in the api

[debug] [2023-06-28T06:12:58.569Z] Initializing file generator

[debug] [2023-06-28T06:12:58.582Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:12:58.590Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:12:58.611Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:12:58.611Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHING"}}
[debug] [2023-06-28T06:12:58.628Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: exited"}}
[debug] [2023-06-28T06:12:58.628Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHED"}}
[debug] [2023-06-28T06:13:05.227Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.231Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.231Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.231Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.233Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.233Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.233Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:06.234Z] Validating nodejs source
[debug] [2023-06-28T06:13:07.046Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:13:07.047Z] Building nodejs source
[debug] [2023-06-28T06:13:07.047Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:13:07.048Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:13:07.049Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:13:07.279Z] Serving at port 8404

[debug] [2023-06-28T06:13:07.625Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:13:07.626Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:13:07.693Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:13:07.698Z] Setting up firebase config

[debug] [2023-06-28T06:13:07.699Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:13:07.699Z] here in the api

[debug] [2023-06-28T06:13:07.733Z] Initializing file generator

[debug] [2023-06-28T06:13:07.739Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:13:07.745Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:13:11.147Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:13:11.147Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:13:11.147Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:13:11.147Z"],"workRunningCount":1}
[debug] [2023-06-28T06:13:11.147Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:13:11.161Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:13:11.161Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:13:11.161Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:13:11.167Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:13:11.168Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:13:12.156Z] [runtime-status] [12006] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:13:12.158Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.158Z] [runtime-status] [12006] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:13:12.158Z] [runtime-status] [12006] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:13:12.159Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.373Z] [runtime-status] [12006] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:13:12.373Z] [runtime-status] [12006] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:13:12.374Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.375Z] [runtime-status] [12006] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:13:12.377Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.377Z] [runtime-status] [12006] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:13:12.634Z] [runtime-status] [12006] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:13:12.634Z] [runtime-status] [12006] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_d7f8b7d1893c573a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_d7f8b7d1893c573a.sock"}}
[debug] [2023-06-28T06:13:12.729Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: IDLE"}}
[debug] [2023-06-28T06:13:12.729Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:13:12.730Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"root"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"root"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"root\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"root\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:167:16) {"user":"    at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:167:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:167:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:13:14 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:13:14 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:13:14 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '240' ], {"user":"      'content-length': [ '240' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '240' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8"' ], {"user":"      etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=RIeYCfv8Q8jJvhv7HxaZ09SkT.QOTcjpqzwpDxRwDdQ-1687932794-0-ATbdsEyEgPjVVWZOLwZCR1pAtA1DyObxRmVNo3YySidhxjiw87snbIAGppjOpTJgaYc9JtKJipQN/hznEmkDhWo=; path=/; expires=Wed, 28-Jun-23 06:43:14 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=RIeYCfv8Q8jJvhv7HxaZ09SkT.QOTcjpqzwpDxRwDdQ-1687932794-0-ATbdsEyEgPjVVWZOLwZCR1pAtA1DyObxRmVNo3YySidhxjiw87snbIAGppjOpTJgaYc9JtKJipQN/hznEmkDhWo=; path=/; expires=Wed, 28-Jun-23 06:43:14 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=RIeYCfv8Q8jJvhv7HxaZ09SkT.QOTcjpqzwpDxRwDdQ-1687932794-0-ATbdsEyEgPjVVWZOLwZCR1pAtA1DyObxRmVNo3YySidhxjiw87snbIAGppjOpTJgaYc9JtKJipQN/hznEmkDhWo=; path=/; expires=Wed, 28-Jun-23 06:43:14 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3c85b4d132e9a-MEL' ] {"user":"      'cf-ray': [ '7de3c85b4d132e9a-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3c85b4d132e9a-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"root\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:13:14.188Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:13:14.189Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: exited"}}
[debug] [2023-06-28T06:13:14.189Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: FINISHED"}}
[debug] [2023-06-28T06:15:58.629Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:15:59.631Z] Validating nodejs source
[debug] [2023-06-28T06:16:00.601Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:16:00.601Z] Building nodejs source
[debug] [2023-06-28T06:16:00.601Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:16:00.602Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:16:00.604Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:16:00.889Z] Serving at port 8989

[debug] [2023-06-28T06:16:01.264Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:16:01.264Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:16:01.334Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:16:01.339Z] Setting up firebase config

[debug] [2023-06-28T06:16:01.340Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:16:01.341Z] here in the api

[debug] [2023-06-28T06:16:01.376Z] Initializing file generator

[debug] [2023-06-28T06:16:01.382Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:16:01.388Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:18:16.723Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:18:17.724Z] Validating nodejs source
[debug] [2023-06-28T06:18:19.657Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:18:19.658Z] Building nodejs source
[debug] [2023-06-28T06:18:19.658Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:18:19.659Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:18:19.660Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:18:19.983Z] Serving at port 8288

[debug] [2023-06-28T06:18:20.512Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:18:20.513Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:18:20.628Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:18:20.634Z] Setting up firebase config

[debug] [2023-06-28T06:18:20.635Z] Initialized and ready to roll

[debug] [2023-06-28T06:18:20.635Z] connector initialized

[debug] [2023-06-28T06:18:20.636Z] here in the api

[debug] [2023-06-28T06:18:20.730Z] Initializing file generator

[debug] [2023-06-28T06:18:20.741Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:18:20.757Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:30.791Z] Validating nodejs source
[debug] [2023-06-28T06:18:31.740Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:18:31.740Z] Building nodejs source
[debug] [2023-06-28T06:18:31.741Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:18:31.744Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:18:31.745Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:18:32.035Z] Serving at port 8782

[debug] [2023-06-28T06:18:32.560Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:18:32.560Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:18:32.685Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:18:32.691Z] Setting up firebase config

[debug] [2023-06-28T06:18:32.692Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:18:32.692Z] here in the api

[debug] [2023-06-28T06:18:32.764Z] Initializing file generator

[debug] [2023-06-28T06:18:32.771Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:18:32.775Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:18:48.481Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:18:48.481Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:18:48.481Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:18:48.481Z"],"workRunningCount":1}
[debug] [2023-06-28T06:18:48.481Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:18:48.495Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:18:48.496Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:18:48.496Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:18:48.503Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:18:48.503Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:18:50.099Z] [runtime-status] [12500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:18:50.101Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.101Z] [runtime-status] [12500] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:18:50.101Z] [runtime-status] [12500] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:18:50.102Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.318Z] [runtime-status] [12500] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:18:50.319Z] [runtime-status] [12500] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:18:50.319Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.321Z] [runtime-status] [12500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:18:50.323Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.323Z] [runtime-status] [12500] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:18:50.648Z] [runtime-status] [12500] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:18:50.648Z] [runtime-status] [12500] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_df0b9cf43f79788f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_df0b9cf43f79788f.sock"}}
[debug] [2023-06-28T06:18:50.731Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE"}}
[debug] [2023-06-28T06:18:50.731Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:18:50.731Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:18:52.966Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2234.942609ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2234.942609ms"}}
[debug] [2023-06-28T06:18:52.966Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE"}}
[debug] [2023-06-28T06:18:52.966Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:18:52.967Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:18:52.967Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:19:42.625Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:19:43.626Z] Validating nodejs source
[debug] [2023-06-28T06:19:44.901Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:19:44.901Z] Building nodejs source
[debug] [2023-06-28T06:19:44.901Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:19:44.902Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:19:44.903Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:19:45.320Z] Serving at port 8799

[debug] [2023-06-28T06:19:45.862Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:19:45.862Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:19:45.980Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:19:45.986Z] Setting up firebase config

[debug] [2023-06-28T06:19:45.987Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:19:45.988Z] here in the api

[debug] [2023-06-28T06:19:46.045Z] Initializing file generator

[debug] [2023-06-28T06:19:46.052Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:19:46.057Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:19:46.070Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:19:46.070Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHING"}}
[debug] [2023-06-28T06:19:46.085Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: exited"}}
[debug] [2023-06-28T06:19:46.085Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHED"}}
[debug] [2023-06-28T06:19:52.105Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.105Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.105Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.106Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.106Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.108Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.108Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:53.112Z] Validating nodejs source
[debug] [2023-06-28T06:19:53.912Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:19:53.912Z] Building nodejs source
[debug] [2023-06-28T06:19:53.912Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:19:53.913Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:19:53.914Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:19:54.149Z] Serving at port 8369

[debug] [2023-06-28T06:19:54.495Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:19:54.495Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:19:54.560Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:19:54.566Z] Setting up firebase config

[debug] [2023-06-28T06:19:54.566Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:19:54.567Z] here in the api

[debug] [2023-06-28T06:19:54.601Z] Initializing file generator

[debug] [2023-06-28T06:19:54.607Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:19:54.612Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:19:55.375Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:19:55.375Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:19:55.375Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:19:55.375Z"],"workRunningCount":1}
[debug] [2023-06-28T06:19:55.375Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:19:55.389Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:19:55.390Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:19:55.390Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:19:55.396Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:19:55.396Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:19:56.953Z] [runtime-status] [12533] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:57.170Z] [runtime-status] [12533] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:19:57.171Z] [runtime-status] [12533] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:19:57.171Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:57.173Z] [runtime-status] [12533] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:19:57.175Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:57.175Z] [runtime-status] [12533] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:19:57.510Z] [runtime-status] [12533] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:19:57.510Z] [runtime-status] [12533] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b14b0e575a4b07b8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b14b0e575a4b07b8.sock"}}
[debug] [2023-06-28T06:19:57.522Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:19:57.522Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:19:57.523Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:19:58.444Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 921.575266ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 921.575266ms"}}
[debug] [2023-06-28T06:19:58.444Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:19:58.444Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:19:58.444Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:19:58.445Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:09.822Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:09.822Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:09.823Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:09.822Z"],"workRunningCount":1}
[debug] [2023-06-28T06:20:09.823Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:20:09.837Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:20:09.837Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:20:09.837Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:20:09.838Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:20:10.159Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 321.097799ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 321.097799ms"}}
[debug] [2023-06-28T06:20:10.159Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:20:10.159Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:20:10.159Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:20:10.159Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:18.777Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:18.777Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:18.778Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:18.777Z"],"workRunningCount":1}
[debug] [2023-06-28T06:20:18.778Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:20:18.791Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:20:18.792Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:20:18.792Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:20:18.792Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  parentID: root {"user":"parentID: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentID: root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:20:21.284Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2491.751246ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2491.751246ms"}}
[debug] [2023-06-28T06:20:21.284Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:20:21.284Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:20:21.284Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:20:21.284Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:39.775Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:20:40.777Z] Validating nodejs source
[debug] [2023-06-28T06:20:41.615Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:20:41.615Z] Building nodejs source
[debug] [2023-06-28T06:20:41.615Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:20:41.617Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:20:41.619Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:20:41.873Z] Serving at port 8817

[debug] [2023-06-28T06:20:42.264Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:20:42.266Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:20:42.335Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:20:42.341Z] Setting up firebase config

[debug] [2023-06-28T06:20:42.342Z] Initialized and ready to roll

[debug] [2023-06-28T06:20:42.342Z] connector initialized

[debug] [2023-06-28T06:20:42.343Z] here in the api

[debug] [2023-06-28T06:20:42.412Z] Initializing file generator

[debug] [2023-06-28T06:20:42.419Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:20:42.424Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:20:42.435Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:20:42.435Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHING"}}
[debug] [2023-06-28T06:20:42.446Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: exited"}}
[debug] [2023-06-28T06:20:42.446Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHED"}}
[debug] [2023-06-28T06:20:47.662Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:47.662Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:47.662Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:47.662Z"],"workRunningCount":1}
[debug] [2023-06-28T06:20:47.662Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:20:47.676Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:20:47.676Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:20:47.676Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:20:47.683Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:20:47.684Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:20:49.216Z] [runtime-status] [12551] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:20:49.217Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.217Z] [runtime-status] [12551] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:20:49.218Z] [runtime-status] [12551] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:20:49.219Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.434Z] [runtime-status] [12551] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:20:49.435Z] [runtime-status] [12551] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:20:49.435Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.437Z] [runtime-status] [12551] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:20:49.438Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.439Z] [runtime-status] [12551] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:20:49.778Z] [runtime-status] [12551] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:20:49.779Z] [runtime-status] [12551] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ff22b36508e5d894.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ff22b36508e5d894.sock"}}
[debug] [2023-06-28T06:20:49.814Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE"}}
[debug] [2023-06-28T06:20:49.814Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:20:49.815Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  parentID: root {"user":"parentID: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentID: root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:20:52.702Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2887.593342ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2887.593342ms"}}
[debug] [2023-06-28T06:20:52.702Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE"}}
[debug] [2023-06-28T06:20:52.702Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:20:52.702Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:20:52.703Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:21:50.085Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:21:51.087Z] Validating nodejs source
[debug] [2023-06-28T06:21:52.034Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:21:52.034Z] Building nodejs source
[debug] [2023-06-28T06:21:52.034Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:21:52.035Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:21:52.036Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:21:52.414Z] Serving at port 8920

[debug] [2023-06-28T06:21:52.973Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:21:52.973Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:21:53.106Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:21:53.112Z] Setting up firebase config

[debug] [2023-06-28T06:21:53.113Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:21:53.114Z] here in the api

[debug] [2023-06-28T06:21:53.189Z] Initializing file generator

[debug] [2023-06-28T06:21:53.196Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:21:53.201Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:21:53.213Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:21:53.213Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHING"}}
[debug] [2023-06-28T06:21:53.225Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: exited"}}
[debug] [2023-06-28T06:21:53.225Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHED"}}
[debug] [2023-06-28T06:22:20.997Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:22:21.998Z] Validating nodejs source
[debug] [2023-06-28T06:22:22.757Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:22:22.758Z] Building nodejs source
[debug] [2023-06-28T06:22:22.758Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:22:22.759Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:22:22.760Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:22:22.996Z] Serving at port 8253

[debug] [2023-06-28T06:22:23.342Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:22:23.342Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:22:23.407Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:22:23.412Z] Setting up firebase config

[debug] [2023-06-28T06:22:23.413Z] Initialized and ready to roll

[debug] [2023-06-28T06:22:23.413Z] connector initialized

[debug] [2023-06-28T06:22:23.414Z] here in the api

[debug] [2023-06-28T06:22:23.447Z] Initializing file generator

[debug] [2023-06-28T06:22:23.453Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:22:23.458Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:22:44.311Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:22:45.311Z] Validating nodejs source
[debug] [2023-06-28T06:22:46.167Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:22:46.168Z] Building nodejs source
[debug] [2023-06-28T06:22:46.168Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:22:46.169Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:22:46.170Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:22:46.563Z] Serving at port 8250

[debug] [2023-06-28T06:22:47.035Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:22:47.036Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:22:47.160Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:22:47.170Z] Setting up firebase config

[debug] [2023-06-28T06:22:47.171Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:22:47.173Z] here in the api

[debug] [2023-06-28T06:22:47.215Z] Initializing file generator

[debug] [2023-06-28T06:22:47.224Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:22:47.231Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:22:54.560Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:55.666Z] Validating nodejs source
[debug] [2023-06-28T06:22:56.441Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:22:56.441Z] Building nodejs source
[debug] [2023-06-28T06:22:56.441Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:22:56.444Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:22:56.445Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:22:56.678Z] Serving at port 8762

[debug] [2023-06-28T06:22:57.033Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:22:57.033Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:22:57.101Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:22:57.106Z] Setting up firebase config

[debug] [2023-06-28T06:22:57.107Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:22:57.108Z] here in the api

[debug] [2023-06-28T06:22:57.141Z] Initializing file generator

[debug] [2023-06-28T06:22:57.147Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:22:57.152Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:23:06.638Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:06.638Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:23:06.638Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:06.638Z"],"workRunningCount":1}
[debug] [2023-06-28T06:23:06.638Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:23:06.654Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:23:06.654Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:23:06.654Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:23:06.660Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:23:06.661Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:23:08.298Z] [runtime-status] [12710] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:23:08.299Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.299Z] [runtime-status] [12710] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:23:08.300Z] [runtime-status] [12710] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:23:08.301Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.513Z] [runtime-status] [12710] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:23:08.513Z] [runtime-status] [12710] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:23:08.514Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.515Z] [runtime-status] [12710] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:23:08.517Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.517Z] [runtime-status] [12710] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:23:08.848Z] [runtime-status] [12710] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:23:08.848Z] [runtime-status] [12710] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_accf3a2d743228fb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_accf3a2d743228fb.sock"}}
[debug] [2023-06-28T06:23:08.892Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE"}}
[debug] [2023-06-28T06:23:08.892Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:23:08.893Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:23:09.630Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 737.098487ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 737.098487ms"}}
[debug] [2023-06-28T06:23:09.631Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE"}}
[debug] [2023-06-28T06:23:09.631Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:23:09.631Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:23:09.632Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:23:19.916Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:19.916Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:23:19.916Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:19.916Z"],"workRunningCount":1}
[debug] [2023-06-28T06:23:19.916Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:23:19.929Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:23:19.930Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:23:19.930Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:23:19.930Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa {"user":"notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:23:21.524Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1594.374839ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1594.374839ms"}}
[debug] [2023-06-28T06:23:21.524Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE"}}
[debug] [2023-06-28T06:23:21.525Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:23:21.525Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:23:21.525Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:50:15.331Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:50:16.333Z] Validating nodejs source
[debug] [2023-06-28T06:50:18.306Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:50:18.308Z] Building nodejs source
[debug] [2023-06-28T06:50:18.308Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:50:18.309Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:50:18.311Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:50:18.599Z] Serving at port 8965

[debug] [2023-06-28T06:50:19.156Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:50:19.157Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:50:19.289Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:50:19.295Z] Setting up firebase config

[debug] [2023-06-28T06:50:19.296Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:50:19.296Z] here in the api

[debug] [2023-06-28T06:50:19.368Z] Initializing file generator

[debug] [2023-06-28T06:50:19.375Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:50:19.379Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:50:19.392Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:50:19.392Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: FINISHING"}}
[debug] [2023-06-28T06:50:19.406Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: exited"}}
[debug] [2023-06-28T06:50:19.406Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: FINISHED"}}
[debug] [2023-06-28T06:52:19.306Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:52:20.307Z] Validating nodejs source
[debug] [2023-06-28T06:52:21.084Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:52:21.084Z] Building nodejs source
[debug] [2023-06-28T06:52:21.084Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:52:21.088Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:52:21.089Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:52:21.323Z] Serving at port 8356

[debug] [2023-06-28T06:52:21.699Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:52:21.699Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:52:21.770Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:52:21.775Z] Setting up firebase config

[debug] [2023-06-28T06:52:21.776Z] Initialized and ready to roll

[debug] [2023-06-28T06:52:21.777Z] connector initialized

[debug] [2023-06-28T06:52:21.777Z] here in the api

[debug] [2023-06-28T06:52:21.813Z] Initializing file generator

[debug] [2023-06-28T06:52:21.820Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:52:21.824Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:52:34.188Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.188Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.188Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.189Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.190Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.191Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.191Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.191Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:52:34.191Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:52:35.193Z] Validating nodejs source
[debug] [2023-06-28T06:52:36.188Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:52:36.188Z] Building nodejs source
[debug] [2023-06-28T06:52:36.188Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:52:36.189Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:52:36.190Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:52:36.483Z] Serving at port 8023

[debug] [2023-06-28T06:52:37.002Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:52:37.002Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:52:37.121Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:52:37.127Z] Setting up firebase config

[debug] [2023-06-28T06:52:37.128Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:52:37.128Z] here in the api

[debug] [2023-06-28T06:52:37.200Z] Initializing file generator

[debug] [2023-06-28T06:52:37.207Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:52:37.211Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:52:52.645Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:52:52.645Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:52:52.645Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:52:52.645Z"],"workRunningCount":1}
[debug] [2023-06-28T06:52:52.645Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:52:52.659Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:52:52.660Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:52:52.660Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:52:52.666Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:52:52.667Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:52:54.308Z] [runtime-status] [13170] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:52:54.309Z] [runtime-status] [13170] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:52:54.309Z] [runtime-status] [13170] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:52:54.310Z] [runtime-status] [13170] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:52:54.311Z] [runtime-status] [13170] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:52:54.524Z] [runtime-status] [13170] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:52:54.524Z] [runtime-status] [13170] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:52:54.525Z] [runtime-status] [13170] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:52:54.526Z] [runtime-status] [13170] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:52:54.528Z] [runtime-status] [13170] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:52:54.528Z] [runtime-status] [13170] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:52:54.869Z] [runtime-status] [13170] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:52:54.870Z] [runtime-status] [13170] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0e494d0d22017ecb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13170] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0e494d0d22017ecb.sock"}}
[debug] [2023-06-28T06:52:54.893Z] [worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: IDLE"}}
[debug] [2023-06-28T06:52:54.893Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:52:54.894Z] [worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:147 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:147","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:147"}}
[info] >      type = type.toLowerCase(); {"user":"    type = type.toLowerCase();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type = type.toLowerCase();"}}
[info] >                  ^ {"user":"                ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                 ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'toLowerCase') {"user":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'toLowerCase')"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:147:17) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:147:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:147:17)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:52:54.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:52:54.946Z] [worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: exited"}}
[debug] [2023-06-28T06:52:54.946Z] [worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-792af934-918a-4412-b113-8bdff2ae9dc5]: FINISHED"}}
[debug] [2023-06-28T06:53:14.717Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:53:15.717Z] Validating nodejs source
[debug] [2023-06-28T06:53:16.596Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:53:16.597Z] Building nodejs source
[debug] [2023-06-28T06:53:16.597Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:53:16.598Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:53:16.599Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:53:16.861Z] Serving at port 8413

[debug] [2023-06-28T06:53:17.243Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:53:17.243Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:53:17.311Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:53:17.316Z] Setting up firebase config

[debug] [2023-06-28T06:53:17.317Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:53:17.317Z] here in the api

[debug] [2023-06-28T06:53:17.351Z] Initializing file generator

[debug] [2023-06-28T06:53:17.358Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:53:17.363Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:53:24.815Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:53:24.915Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:53:25.916Z] Validating nodejs source
[debug] [2023-06-28T06:53:26.669Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:53:26.669Z] Building nodejs source
[debug] [2023-06-28T06:53:26.669Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:53:26.672Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:53:26.674Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:53:26.949Z] Serving at port 8249

[debug] [2023-06-28T06:53:27.310Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:53:27.311Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:53:27.379Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:53:27.384Z] Setting up firebase config

[debug] [2023-06-28T06:53:27.385Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:53:27.386Z] here in the api

[debug] [2023-06-28T06:53:27.421Z] Initializing file generator

[debug] [2023-06-28T06:53:27.428Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:53:27.438Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:53:34.106Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:53:35.107Z] Validating nodejs source
[debug] [2023-06-28T06:53:36.091Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:53:36.091Z] Building nodejs source
[debug] [2023-06-28T06:53:36.092Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:53:36.093Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:53:36.094Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:53:36.331Z] Serving at port 8245

[debug] [2023-06-28T06:53:36.705Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:53:36.705Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:53:36.771Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:53:36.776Z] Setting up firebase config

[debug] [2023-06-28T06:53:36.777Z] Initialized and ready to roll

[debug] [2023-06-28T06:53:36.777Z] connector initialized

[debug] [2023-06-28T06:53:36.777Z] here in the api

[debug] [2023-06-28T06:53:36.810Z] Initializing file generator

[debug] [2023-06-28T06:53:36.817Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:53:36.821Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:53:44.331Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:53:45.334Z] Validating nodejs source
[debug] [2023-06-28T06:53:46.116Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:53:46.117Z] Building nodejs source
[debug] [2023-06-28T06:53:46.117Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:53:46.120Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:53:46.121Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:53:46.366Z] Serving at port 8578

[debug] [2023-06-28T06:53:46.737Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:53:46.812Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:53:46.817Z] Setting up firebase config

[debug] [2023-06-28T06:53:46.818Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:53:46.818Z] here in the api

[debug] [2023-06-28T06:53:46.868Z] Initializing file generator

[debug] [2023-06-28T06:53:46.876Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:53:46.895Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:54:37.226Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.226Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.227Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.230Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.230Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.230Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:54:37.230Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:54:38.234Z] Validating nodejs source
[debug] [2023-06-28T06:54:39.222Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:54:39.222Z] Building nodejs source
[debug] [2023-06-28T06:54:39.222Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:54:39.223Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:54:39.224Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:54:39.692Z] Serving at port 8666

[debug] [2023-06-28T06:54:40.255Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:54:40.255Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:54:40.380Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:54:40.387Z] Setting up firebase config

[debug] [2023-06-28T06:54:40.387Z] Initialized and ready to roll

[debug] [2023-06-28T06:54:40.387Z] connector initialized

[debug] [2023-06-28T06:54:40.388Z] here in the api

[debug] [2023-06-28T06:54:40.454Z] Initializing file generator

[debug] [2023-06-28T06:54:40.461Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:54:40.466Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:54:41.329Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:54:41.329Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:54:41.329Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:54:41.329Z"],"workRunningCount":1}
[debug] [2023-06-28T06:54:41.329Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:54:41.344Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:54:41.345Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:54:41.345Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:54:41.351Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:54:41.351Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:54:42.888Z] [runtime-status] [13225] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:54:42.889Z] [runtime-status] [13225] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:54:42.889Z] [runtime-status] [13225] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:54:42.890Z] [runtime-status] [13225] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:54:42.891Z] [runtime-status] [13225] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:54:43.104Z] [runtime-status] [13225] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:54:43.104Z] [runtime-status] [13225] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:54:43.105Z] [runtime-status] [13225] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:54:43.106Z] [runtime-status] [13225] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:54:43.108Z] [runtime-status] [13225] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:54:43.109Z] [runtime-status] [13225] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:54:43.437Z] [runtime-status] [13225] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:54:43.438Z] [runtime-status] [13225] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c39865d19b72940e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13225] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c39865d19b72940e.sock"}}
[debug] [2023-06-28T06:54:43.477Z] [worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: IDLE"}}
[debug] [2023-06-28T06:54:43.477Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:54:43.477Z] [worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:54:44.178Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 700.5457ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 700.5457ms"}}
[debug] [2023-06-28T06:54:44.178Z] [worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: IDLE"}}
[debug] [2023-06-28T06:54:44.178Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:54:44.178Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:54:44.178Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:55:36.547Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:55:37.548Z] Validating nodejs source
[debug] [2023-06-28T06:55:38.507Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:55:38.507Z] Building nodejs source
[debug] [2023-06-28T06:55:38.507Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:55:38.508Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:55:38.510Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:55:38.763Z] Serving at port 8569

[debug] [2023-06-28T06:55:39.133Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:55:39.133Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:55:39.201Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:55:39.207Z] Setting up firebase config

[debug] [2023-06-28T06:55:39.208Z] Initialized and ready to roll

[debug] [2023-06-28T06:55:39.208Z] connector initialized

[debug] [2023-06-28T06:55:39.209Z] here in the api

[debug] [2023-06-28T06:55:39.243Z] Initializing file generator

[debug] [2023-06-28T06:55:39.250Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:55:39.254Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:55:39.266Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:55:39.266Z] [worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: FINISHING"}}
[debug] [2023-06-28T06:55:39.276Z] [worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: exited"}}
[debug] [2023-06-28T06:55:39.276Z] [worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d73f0db2-9a3f-4666-b5dc-9d426b1efd76]: FINISHED"}}
[debug] [2023-06-28T06:55:51.303Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:55:52.304Z] Validating nodejs source
[debug] [2023-06-28T06:55:53.146Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:55:53.146Z] Building nodejs source
[debug] [2023-06-28T06:55:53.146Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:55:53.147Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:55:53.148Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:55:53.461Z] Serving at port 8103

[debug] [2023-06-28T06:55:53.827Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:55:53.827Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:55:53.899Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:55:53.904Z] Setting up firebase config

[debug] [2023-06-28T06:55:53.905Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:55:53.906Z] here in the api

[debug] [2023-06-28T06:55:53.942Z] Initializing file generator

[debug] [2023-06-28T06:55:53.949Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:55:53.953Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:56:08.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.453Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.453Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.453Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.454Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.454Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.454Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.454Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.455Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.455Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.455Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.456Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.456Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.456Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.457Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.457Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.457Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.457Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.458Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.458Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:56:08.458Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:56:09.460Z] Validating nodejs source
[debug] [2023-06-28T06:56:10.445Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:56:10.446Z] Building nodejs source
[debug] [2023-06-28T06:56:10.446Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:56:10.448Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:56:10.450Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:56:10.797Z] Serving at port 8176

[debug] [2023-06-28T06:56:11.296Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:56:11.296Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:56:11.416Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:56:11.423Z] Setting up firebase config

[debug] [2023-06-28T06:56:11.423Z] Initialized and ready to roll

[debug] [2023-06-28T06:56:11.423Z] connector initialized

[debug] [2023-06-28T06:56:11.424Z] here in the api

[debug] [2023-06-28T06:56:11.494Z] Initializing file generator

[debug] [2023-06-28T06:56:11.501Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:56:11.510Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:56:16.599Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:56:16.599Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:56:16.599Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:56:16.599Z"],"workRunningCount":1}
[debug] [2023-06-28T06:56:16.599Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:56:16.614Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:56:16.614Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:56:16.615Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:56:16.621Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:56:16.622Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:56:18.144Z] [runtime-status] [13270] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:56:18.146Z] [runtime-status] [13270] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:56:18.146Z] [runtime-status] [13270] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:56:18.146Z] [runtime-status] [13270] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:56:18.147Z] [runtime-status] [13270] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:56:18.361Z] [runtime-status] [13270] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:56:18.361Z] [runtime-status] [13270] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:56:18.362Z] [runtime-status] [13270] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:56:18.363Z] [runtime-status] [13270] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:56:18.365Z] [runtime-status] [13270] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:56:18.365Z] [runtime-status] [13270] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:56:18.699Z] [runtime-status] [13270] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:56:18.699Z] [runtime-status] [13270] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_08462c2bcfcd87aa.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13270] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_08462c2bcfcd87aa.sock"}}
[debug] [2023-06-28T06:56:18.752Z] [worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: IDLE"}}
[debug] [2023-06-28T06:56:18.752Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:56:18.753Z] [worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa {"user":"notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:56:21.347Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2593.983441ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2593.983441ms"}}
[debug] [2023-06-28T06:56:21.347Z] [worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: IDLE"}}
[debug] [2023-06-28T06:56:21.347Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:56:21.347Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:56:21.347Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:57:17.143Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:57:18.144Z] Validating nodejs source
[debug] [2023-06-28T06:57:18.949Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:57:18.949Z] Building nodejs source
[debug] [2023-06-28T06:57:18.949Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:57:18.950Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:57:18.951Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:57:19.194Z] Serving at port 8932

[debug] [2023-06-28T06:57:19.541Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:57:19.541Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:57:19.607Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:57:19.613Z] Setting up firebase config

[debug] [2023-06-28T06:57:19.613Z] Initialized and ready to roll

[debug] [2023-06-28T06:57:19.614Z] connector initialized

[debug] [2023-06-28T06:57:19.614Z] here in the api

[debug] [2023-06-28T06:57:19.648Z] Initializing file generator

[debug] [2023-06-28T06:57:19.655Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:57:19.659Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:57:19.670Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:57:19.670Z] [worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: FINISHING"}}
[debug] [2023-06-28T06:57:19.680Z] [worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: exited"}}
[debug] [2023-06-28T06:57:19.680Z] [worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d0d3af3b-15cb-4ee1-96d4-f45b18083f1d]: FINISHED"}}
[debug] [2023-06-28T07:02:02.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:02:03.241Z] Validating nodejs source
[debug] [2023-06-28T07:02:04.095Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:02:04.095Z] Building nodejs source
[debug] [2023-06-28T07:02:04.096Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:02:04.097Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:02:04.098Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:02:04.344Z] Serving at port 8825

[debug] [2023-06-28T07:02:04.811Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:02:04.811Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:02:04.879Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:02:04.884Z] Setting up firebase config

[debug] [2023-06-28T07:02:04.885Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:02:04.886Z] here in the api

[debug] [2023-06-28T07:02:04.925Z] Initializing file generator

[debug] [2023-06-28T07:02:04.932Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:02:04.937Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:02:11.463Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:02:12.464Z] Validating nodejs source
[debug] [2023-06-28T07:02:13.219Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:02:13.219Z] Building nodejs source
[debug] [2023-06-28T07:02:13.219Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:02:13.220Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:02:13.222Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:02:13.507Z] Serving at port 8819

[debug] [2023-06-28T07:02:13.868Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:02:13.868Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:02:13.936Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:02:13.942Z] Setting up firebase config

[debug] [2023-06-28T07:02:13.943Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:02:13.943Z] here in the api

[debug] [2023-06-28T07:02:13.978Z] Initializing file generator

[debug] [2023-06-28T07:02:13.984Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:02:13.989Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:02:22.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:02:23.269Z] Validating nodejs source
[debug] [2023-06-28T07:02:24.118Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:02:24.119Z] Building nodejs source
[debug] [2023-06-28T07:02:24.119Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:02:24.120Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:02:24.121Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:02:24.365Z] Serving at port 8867

[debug] [2023-06-28T07:02:24.723Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:02:24.723Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:02:24.792Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:02:24.798Z] Setting up firebase config

[debug] [2023-06-28T07:02:24.799Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:02:24.800Z] here in the api

[debug] [2023-06-28T07:02:24.835Z] Initializing file generator

[debug] [2023-06-28T07:02:24.842Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:02:24.847Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:02:35.973Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:02:36.974Z] Validating nodejs source
[debug] [2023-06-28T07:02:37.736Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:02:37.736Z] Building nodejs source
[debug] [2023-06-28T07:02:37.737Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:02:37.737Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:02:37.738Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:02:38.023Z] Serving at port 8442

[debug] [2023-06-28T07:02:38.395Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:02:38.395Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:02:38.469Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:02:38.474Z] Setting up firebase config

[debug] [2023-06-28T07:02:38.475Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:02:38.476Z] here in the api

[debug] [2023-06-28T07:02:38.511Z] Initializing file generator

[debug] [2023-06-28T07:02:38.518Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:02:38.524Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:03:20.374Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:03:21.375Z] Validating nodejs source
[debug] [2023-06-28T07:03:22.186Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:03:22.186Z] Building nodejs source
[debug] [2023-06-28T07:03:22.186Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:03:22.187Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:03:22.188Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:03:22.420Z] Serving at port 8328

[debug] [2023-06-28T07:03:22.766Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:03:22.766Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:03:22.833Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:03:22.838Z] Setting up firebase config

[debug] [2023-06-28T07:03:22.839Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:03:22.840Z] here in the api

[debug] [2023-06-28T07:03:22.873Z] Initializing file generator

[debug] [2023-06-28T07:03:22.880Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:03:22.885Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:03:26.811Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:03:27.811Z] Validating nodejs source
[debug] [2023-06-28T07:03:28.611Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:03:28.611Z] Building nodejs source
[debug] [2023-06-28T07:03:28.611Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:03:28.612Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:03:28.613Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:03:28.851Z] Serving at port 8532

[debug] [2023-06-28T07:03:29.211Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:03:29.211Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:03:29.280Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:03:29.286Z] Setting up firebase config

[debug] [2023-06-28T07:03:29.286Z] Initialized and ready to roll

[debug] [2023-06-28T07:03:29.286Z] connector initialized

[debug] [2023-06-28T07:03:29.287Z] here in the api

[debug] [2023-06-28T07:03:29.322Z] Initializing file generator

[debug] [2023-06-28T07:03:29.329Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:03:29.334Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:03:31.871Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:03:32.872Z] Validating nodejs source
[debug] [2023-06-28T07:03:33.674Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:03:33.674Z] Building nodejs source
[debug] [2023-06-28T07:03:33.674Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:03:33.675Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:03:33.676Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:03:33.942Z] Serving at port 8665

[debug] [2023-06-28T07:03:34.296Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:03:34.296Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:03:34.363Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:03:34.368Z] Setting up firebase config

[debug] [2023-06-28T07:03:34.369Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:03:34.370Z] here in the api

[debug] [2023-06-28T07:03:34.405Z] Initializing file generator

[debug] [2023-06-28T07:03:34.411Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:03:34.416Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:03:37.422Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:03:38.423Z] Validating nodejs source
[debug] [2023-06-28T07:03:39.242Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:03:39.243Z] Building nodejs source
[debug] [2023-06-28T07:03:39.243Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:03:39.246Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:03:39.247Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:03:39.544Z] Serving at port 8095

[debug] [2023-06-28T07:03:39.913Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:03:39.914Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:03:39.983Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:03:39.989Z] Setting up firebase config

[debug] [2023-06-28T07:03:39.989Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:03:39.990Z] here in the api

[debug] [2023-06-28T07:03:40.025Z] Initializing file generator

[debug] [2023-06-28T07:03:40.033Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:03:40.037Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:04:28.140Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:04:29.142Z] Validating nodejs source
[debug] [2023-06-28T07:04:29.977Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:04:29.978Z] Building nodejs source
[debug] [2023-06-28T07:04:29.978Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:04:29.979Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:04:29.980Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:04:30.227Z] Serving at port 8344

[debug] [2023-06-28T07:04:30.581Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:04:30.581Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:04:30.648Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:04:30.653Z] Setting up firebase config

[debug] [2023-06-28T07:04:30.654Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:04:30.655Z] here in the api

[debug] [2023-06-28T07:04:30.693Z] Initializing file generator

[debug] [2023-06-28T07:04:30.700Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:04:30.705Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:04:31.725Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:04:32.727Z] Validating nodejs source
[debug] [2023-06-28T07:04:33.469Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:04:33.470Z] Building nodejs source
[debug] [2023-06-28T07:04:33.470Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:04:33.470Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:04:33.472Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:04:33.748Z] Serving at port 8091

[debug] [2023-06-28T07:04:34.133Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:04:34.134Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:04:34.213Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:04:34.219Z] Setting up firebase config

[debug] [2023-06-28T07:04:34.220Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:04:34.221Z] here in the api

[debug] [2023-06-28T07:04:34.261Z] Initializing file generator

[debug] [2023-06-28T07:04:34.268Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:04:34.272Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:04:46.964Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:04:47.964Z] Validating nodejs source
[debug] [2023-06-28T07:04:48.773Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:04:48.773Z] Building nodejs source
[debug] [2023-06-28T07:04:48.773Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:04:48.775Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:04:48.777Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:04:49.059Z] Serving at port 8083

[debug] [2023-06-28T07:04:49.415Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:04:49.415Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:04:49.481Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:04:49.487Z] Setting up firebase config

[debug] [2023-06-28T07:04:49.487Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:04:49.488Z] here in the api

[debug] [2023-06-28T07:04:49.521Z] Initializing file generator

[debug] [2023-06-28T07:04:49.528Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:04:49.533Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:05:04.171Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:05:05.172Z] Validating nodejs source
[debug] [2023-06-28T07:05:05.956Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:05:05.956Z] Building nodejs source
[debug] [2023-06-28T07:05:05.956Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:05:05.959Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:05:05.961Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:05:06.209Z] Serving at port 8520

[debug] [2023-06-28T07:05:06.566Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:05:06.567Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:05:06.634Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:05:06.639Z] Setting up firebase config

[debug] [2023-06-28T07:05:06.640Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:05:06.640Z] here in the api

[debug] [2023-06-28T07:05:06.673Z] Initializing file generator

[debug] [2023-06-28T07:05:06.680Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:05:06.685Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:05:47.471Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:05:48.472Z] Validating nodejs source
[debug] [2023-06-28T07:05:49.441Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:05:49.441Z] Building nodejs source
[debug] [2023-06-28T07:05:49.441Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:05:49.442Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:05:49.444Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:05:49.727Z] Serving at port 8889

[debug] [2023-06-28T07:05:50.089Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:05:50.089Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:05:50.157Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:05:50.162Z] Setting up firebase config

[debug] [2023-06-28T07:05:50.163Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:05:50.164Z] here in the api

[debug] [2023-06-28T07:05:50.197Z] Initializing file generator

[debug] [2023-06-28T07:05:50.204Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:05:50.209Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:06:00.440Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:06:01.442Z] Validating nodejs source
[debug] [2023-06-28T07:06:02.232Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:06:02.232Z] Building nodejs source
[debug] [2023-06-28T07:06:02.232Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:06:02.233Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:06:02.234Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:06:02.496Z] Serving at port 8067

[debug] [2023-06-28T07:06:02.863Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:06:02.863Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:06:02.940Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:06:02.949Z] Setting up firebase config

[debug] [2023-06-28T07:06:02.949Z] Initialized and ready to roll

[debug] [2023-06-28T07:06:02.950Z] connector initialized

[debug] [2023-06-28T07:06:02.951Z] here in the api

[debug] [2023-06-28T07:06:02.989Z] Initializing file generator

[debug] [2023-06-28T07:06:02.997Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:06:03.002Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:06:08.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:06:09.303Z] Validating nodejs source
[debug] [2023-06-28T07:06:10.052Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:06:10.052Z] Building nodejs source
[debug] [2023-06-28T07:06:10.052Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:06:10.053Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:06:10.055Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:06:10.316Z] Serving at port 8823

[debug] [2023-06-28T07:06:10.680Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:06:10.680Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:06:10.746Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:06:10.751Z] Setting up firebase config

[debug] [2023-06-28T07:06:10.752Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:06:10.752Z] here in the api

[debug] [2023-06-28T07:06:10.786Z] Initializing file generator

[debug] [2023-06-28T07:06:10.792Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:06:10.797Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:06:25.351Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:06:26.352Z] Validating nodejs source
[debug] [2023-06-28T07:06:27.238Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:06:27.239Z] Building nodejs source
[debug] [2023-06-28T07:06:27.239Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:06:27.240Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:06:27.241Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:06:27.487Z] Serving at port 8810

[debug] [2023-06-28T07:06:27.865Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:06:27.865Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:06:27.934Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:06:27.939Z] Setting up firebase config

[debug] [2023-06-28T07:06:27.940Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:06:27.941Z] here in the api

[debug] [2023-06-28T07:06:27.975Z] Initializing file generator

[debug] [2023-06-28T07:06:27.982Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:06:27.986Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:06:29.848Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:06:30.850Z] Validating nodejs source
[debug] [2023-06-28T07:06:31.614Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:06:31.614Z] Building nodejs source
[debug] [2023-06-28T07:06:31.615Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:06:31.617Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:06:31.618Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:06:31.901Z] Serving at port 8667

[debug] [2023-06-28T07:06:32.260Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:06:32.260Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:06:32.329Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:06:32.334Z] Setting up firebase config

[debug] [2023-06-28T07:06:32.335Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:06:32.336Z] here in the api

[debug] [2023-06-28T07:06:32.372Z] Initializing file generator

[debug] [2023-06-28T07:06:32.379Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:06:32.383Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:06:54.500Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:06:55.501Z] Validating nodejs source
[debug] [2023-06-28T07:06:56.312Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:06:56.312Z] Building nodejs source
[debug] [2023-06-28T07:06:56.313Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:06:56.313Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:06:56.315Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:06:56.587Z] Serving at port 8042

[debug] [2023-06-28T07:06:56.976Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:06:56.976Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:06:57.043Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:06:57.048Z] Setting up firebase config

[debug] [2023-06-28T07:06:57.049Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:06:57.049Z] here in the api

[debug] [2023-06-28T07:06:57.084Z] Initializing file generator

[debug] [2023-06-28T07:06:57.091Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:06:57.096Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:07:02.253Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:07:03.254Z] Validating nodejs source
[debug] [2023-06-28T07:07:04.010Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:07:04.011Z] Building nodejs source
[debug] [2023-06-28T07:07:04.011Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:07:04.012Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:07:04.013Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:07:04.252Z] Serving at port 8491

[debug] [2023-06-28T07:07:04.602Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:07:04.602Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:07:04.672Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:07:04.678Z] Setting up firebase config
Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:07:04.679Z] here in the api

[debug] [2023-06-28T07:07:04.713Z] Initializing file generator

[debug] [2023-06-28T07:07:04.720Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:07:04.726Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:07:33.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:07:34.748Z] Validating nodejs source
[debug] [2023-06-28T07:07:35.540Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:07:35.541Z] Building nodejs source
[debug] [2023-06-28T07:07:35.541Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:07:35.542Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:07:35.544Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:07:35.854Z] Serving at port 8836

[debug] [2023-06-28T07:07:36.246Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:07:36.246Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:07:36.315Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:07:36.320Z] Setting up firebase config

[debug] [2023-06-28T07:07:36.321Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:07:36.321Z] here in the api

[debug] [2023-06-28T07:07:36.355Z] Initializing file generator

[debug] [2023-06-28T07:07:36.362Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:07:36.366Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:07:48.783Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:07:49.785Z] Validating nodejs source
[debug] [2023-06-28T07:07:50.569Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:07:50.569Z] Building nodejs source
[debug] [2023-06-28T07:07:50.569Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:07:50.570Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:07:50.571Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:07:50.828Z] Serving at port 8746

[debug] [2023-06-28T07:07:51.182Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:07:51.182Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:07:51.249Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:07:51.255Z] Setting up firebase config

[debug] [2023-06-28T07:07:51.255Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:07:51.256Z] here in the api

[debug] [2023-06-28T07:07:51.290Z] Initializing file generator

[debug] [2023-06-28T07:07:51.296Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:07:51.301Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:08:09.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:08:10.055Z] Validating nodejs source
[debug] [2023-06-28T07:08:10.932Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:08:10.933Z] Building nodejs source
[debug] [2023-06-28T07:08:10.933Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:08:10.934Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:08:10.935Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:08:11.183Z] Serving at port 8723

[debug] [2023-06-28T07:08:11.557Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:08:11.557Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:08:11.623Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:08:11.628Z] Setting up firebase config

[debug] [2023-06-28T07:08:11.629Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:08:11.630Z] here in the api

[debug] [2023-06-28T07:08:11.663Z] Initializing file generator

[debug] [2023-06-28T07:08:11.670Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:08:11.680Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:08:11.999Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:08:13.000Z] Validating nodejs source
[debug] [2023-06-28T07:08:13.782Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:08:13.783Z] Building nodejs source
[debug] [2023-06-28T07:08:13.783Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:08:13.784Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:08:13.785Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:08:14.033Z] Serving at port 8302

[debug] [2023-06-28T07:08:14.390Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:08:14.390Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:08:14.455Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:08:14.461Z] Setting up firebase config

[debug] [2023-06-28T07:08:14.461Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:08:14.462Z] here in the api

[debug] [2023-06-28T07:08:14.495Z] Initializing file generator

[debug] [2023-06-28T07:08:14.502Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:08:14.506Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:08:56.514Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:08:57.516Z] Validating nodejs source
[debug] [2023-06-28T07:08:58.294Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:08:58.294Z] Building nodejs source
[debug] [2023-06-28T07:08:58.294Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:08:58.295Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:08:58.297Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:08:58.566Z] Serving at port 8353

[debug] [2023-06-28T07:08:58.922Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:08:58.922Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:08:58.994Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:08:59.000Z] Setting up firebase config

[debug] [2023-06-28T07:08:59.001Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:08:59.001Z] here in the api

[debug] [2023-06-28T07:08:59.037Z] Initializing file generator

[debug] [2023-06-28T07:08:59.043Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:08:59.048Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:09:05.872Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:09:06.874Z] Validating nodejs source
[debug] [2023-06-28T07:09:07.711Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:09:07.712Z] Building nodejs source
[debug] [2023-06-28T07:09:07.712Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:09:07.713Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:09:07.714Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:09:07.976Z] Serving at port 8872

[debug] [2023-06-28T07:09:08.342Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:09:08.415Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:09:08.421Z] Setting up firebase config

[debug] [2023-06-28T07:09:08.422Z] Initialized and ready to roll

[debug] [2023-06-28T07:09:08.422Z] connector initialized

[debug] [2023-06-28T07:09:08.422Z] here in the api

[debug] [2023-06-28T07:09:08.458Z] Initializing file generator

[debug] [2023-06-28T07:09:08.465Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:09:08.470Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:09:44.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:09:45.605Z] Validating nodejs source
[debug] [2023-06-28T07:09:46.475Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:09:46.476Z] Building nodejs source
[debug] [2023-06-28T07:09:46.476Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:09:46.477Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:09:46.478Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:09:46.739Z] Serving at port 8026

[debug] [2023-06-28T07:09:47.094Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:09:47.094Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:09:47.184Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:09:47.190Z] Setting up firebase config
Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:09:47.196Z] here in the api

[debug] [2023-06-28T07:09:47.235Z] Initializing file generator

[debug] [2023-06-28T07:09:47.244Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:09:47.251Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:09:59.717Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:10:00.717Z] Validating nodejs source
[debug] [2023-06-28T07:10:01.679Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:10:01.679Z] Building nodejs source
[debug] [2023-06-28T07:10:01.679Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:10:01.680Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:10:01.681Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:10:01.947Z] Serving at port 8096

[debug] [2023-06-28T07:10:02.318Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:10:02.318Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:10:02.386Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:10:02.391Z] Setting up firebase config

[debug] [2023-06-28T07:10:02.392Z] Initialized and ready to roll

[debug] [2023-06-28T07:10:02.392Z] connector initialized

[debug] [2023-06-28T07:10:02.392Z] here in the api

[debug] [2023-06-28T07:10:02.427Z] Initializing file generator

[debug] [2023-06-28T07:10:02.433Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:10:02.438Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:11:37.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:11:38.214Z] Validating nodejs source
[debug] [2023-06-28T07:11:39.079Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:11:39.079Z] Building nodejs source
[debug] [2023-06-28T07:11:39.079Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:11:39.080Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:11:39.082Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:11:39.329Z] Serving at port 8288

[debug] [2023-06-28T07:11:39.709Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:11:39.709Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:11:39.779Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:11:39.784Z] Setting up firebase config

[debug] [2023-06-28T07:11:39.785Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:11:39.785Z] here in the api

[debug] [2023-06-28T07:11:39.821Z] Initializing file generator

[debug] [2023-06-28T07:11:39.828Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:11:39.832Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:11:49.457Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:11:50.459Z] Validating nodejs source
[debug] [2023-06-28T07:11:51.294Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:11:51.295Z] Building nodejs source
[debug] [2023-06-28T07:11:51.295Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:11:51.298Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:11:51.300Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:11:51.602Z] Serving at port 8854

[debug] [2023-06-28T07:11:51.995Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:11:51.996Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:11:52.067Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:11:52.072Z] Setting up firebase config

[debug] [2023-06-28T07:11:52.073Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:11:52.074Z] here in the api

[debug] [2023-06-28T07:11:52.110Z] Initializing file generator

[debug] [2023-06-28T07:11:52.117Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:11:52.121Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:12:04.863Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:12:05.864Z] Validating nodejs source
[debug] [2023-06-28T07:12:06.599Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:12:06.599Z] Building nodejs source
[debug] [2023-06-28T07:12:06.599Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:12:06.600Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:12:06.601Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:12:06.856Z] Serving at port 8225

[debug] [2023-06-28T07:12:07.204Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:12:07.204Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:12:07.271Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:12:07.276Z] Setting up firebase config

[debug] [2023-06-28T07:12:07.277Z] Initialized and ready to roll

[debug] [2023-06-28T07:12:07.277Z] connector initialized

[debug] [2023-06-28T07:12:07.278Z] here in the api

[debug] [2023-06-28T07:12:07.313Z] Initializing file generator

[debug] [2023-06-28T07:12:07.319Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:12:07.324Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:12:15.321Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:12:16.321Z] Validating nodejs source
[debug] [2023-06-28T07:12:17.075Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:12:17.076Z] Building nodejs source
[debug] [2023-06-28T07:12:17.076Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:12:17.079Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:12:17.080Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:12:17.333Z] Serving at port 8802

[debug] [2023-06-28T07:12:17.695Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:12:17.695Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:12:17.764Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:12:17.770Z] Setting up firebase config

[debug] [2023-06-28T07:12:17.771Z] Initialized and ready to roll

[debug] [2023-06-28T07:12:17.771Z] connector initialized

[debug] [2023-06-28T07:12:17.772Z] here in the api

[debug] [2023-06-28T07:12:17.808Z] Initializing file generator

[debug] [2023-06-28T07:12:17.816Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:12:17.820Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:12:39.592Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:12:40.593Z] Validating nodejs source
[debug] [2023-06-28T07:12:41.470Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:12:41.470Z] Building nodejs source
[debug] [2023-06-28T07:12:41.470Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:12:41.471Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:12:41.472Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:12:41.776Z] Serving at port 8925

[debug] [2023-06-28T07:12:42.169Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:12:42.169Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:12:42.240Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:12:42.245Z] Setting up firebase config

[debug] [2023-06-28T07:12:42.246Z] Initialized and ready to roll

[debug] [2023-06-28T07:12:42.247Z] connector initialized

[debug] [2023-06-28T07:12:42.247Z] here in the api

[debug] [2023-06-28T07:12:42.282Z] Initializing file generator

[debug] [2023-06-28T07:12:42.289Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:12:42.294Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:14:05.526Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:14:06.526Z] Validating nodejs source
[debug] [2023-06-28T07:14:07.315Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:14:07.316Z] Building nodejs source
[debug] [2023-06-28T07:14:07.316Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:14:07.318Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:14:07.319Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:14:07.633Z] Serving at port 8443

[debug] [2023-06-28T07:14:08.074Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:14:08.075Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:14:08.142Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:14:08.147Z] Setting up firebase config

[debug] [2023-06-28T07:14:08.148Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:14:08.149Z] here in the api

[debug] [2023-06-28T07:14:08.183Z] Initializing file generator

[debug] [2023-06-28T07:14:08.189Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:14:08.194Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:14:14.488Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:14:14.589Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:14:15.590Z] Validating nodejs source
[debug] [2023-06-28T07:14:16.465Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:14:16.466Z] Building nodejs source
[debug] [2023-06-28T07:14:16.466Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:14:16.467Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:14:16.468Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:14:16.731Z] Serving at port 8776

[debug] [2023-06-28T07:14:17.182Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:14:17.182Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:14:17.254Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:14:17.261Z] Setting up firebase config

[debug] [2023-06-28T07:14:17.262Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:14:17.262Z] here in the api

[debug] [2023-06-28T07:14:17.299Z] Initializing file generator

[debug] [2023-06-28T07:14:17.306Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:14:17.310Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:15:42.544Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:15:43.546Z] Validating nodejs source
[debug] [2023-06-28T07:15:44.438Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:15:44.438Z] Building nodejs source
[debug] [2023-06-28T07:15:44.438Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:15:44.443Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:15:44.445Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:15:44.692Z] Serving at port 8451

[debug] [2023-06-28T07:15:45.164Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:15:45.164Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:15:45.235Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:15:45.240Z] Setting up firebase config

[debug] [2023-06-28T07:15:45.241Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:15:45.242Z] here in the api

[debug] [2023-06-28T07:15:45.278Z] Initializing file generator

[debug] [2023-06-28T07:15:45.285Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:15:45.290Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:15:51.057Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:15:52.059Z] Validating nodejs source
[debug] [2023-06-28T07:15:52.875Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:15:52.875Z] Building nodejs source
[debug] [2023-06-28T07:15:52.875Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:15:52.876Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:15:52.878Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:15:53.092Z] Serving at port 8778

[debug] [2023-06-28T07:15:53.452Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:15:53.453Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:15:53.520Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:15:53.526Z] Setting up firebase config

[debug] [2023-06-28T07:15:53.527Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:15:53.527Z] here in the api

[debug] [2023-06-28T07:15:53.562Z] Initializing file generator

[debug] [2023-06-28T07:15:53.569Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:15:53.574Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:16:28.855Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:16:29.857Z] Validating nodejs source
[debug] [2023-06-28T07:16:30.685Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:16:30.685Z] Building nodejs source
[debug] [2023-06-28T07:16:30.685Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:16:30.689Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:16:30.690Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:16:30.981Z] Serving at port 8405

[debug] [2023-06-28T07:16:31.339Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:16:31.339Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:16:31.410Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:16:31.415Z] Setting up firebase config

[debug] [2023-06-28T07:16:31.416Z] Initialized and ready to roll

[debug] [2023-06-28T07:16:31.416Z] connector initialized

[debug] [2023-06-28T07:16:31.417Z] here in the api

[debug] [2023-06-28T07:16:31.452Z] Initializing file generator

[debug] [2023-06-28T07:16:31.458Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:16:31.463Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:16:50.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:16:51.808Z] Validating nodejs source
[debug] [2023-06-28T07:16:52.671Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:16:52.671Z] Building nodejs source
[debug] [2023-06-28T07:16:52.671Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:16:52.672Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:16:52.674Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:16:52.931Z] Serving at port 8519

[debug] [2023-06-28T07:16:53.291Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:16:53.291Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:16:53.359Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:16:53.365Z] Setting up firebase config

[debug] [2023-06-28T07:16:53.366Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:16:53.366Z] here in the api

[debug] [2023-06-28T07:16:53.402Z] Initializing file generator

[debug] [2023-06-28T07:16:53.408Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:16:53.413Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:17:12.795Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:17:13.796Z] Validating nodejs source
[debug] [2023-06-28T07:17:14.613Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:17:14.613Z] Building nodejs source
[debug] [2023-06-28T07:17:14.613Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:17:14.614Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:17:14.615Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:17:14.864Z] Serving at port 8567

[debug] [2023-06-28T07:17:15.237Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:17:15.238Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:17:15.307Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:17:15.313Z] Setting up firebase config

[debug] [2023-06-28T07:17:15.314Z] Initialized and ready to roll

[debug] [2023-06-28T07:17:15.314Z] connector initialized

[debug] [2023-06-28T07:17:15.316Z] here in the api

[debug] [2023-06-28T07:17:15.349Z] Initializing file generator

[debug] [2023-06-28T07:17:15.356Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:17:15.361Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:17:31.611Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:17:32.613Z] Validating nodejs source
[debug] [2023-06-28T07:17:33.487Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:17:33.488Z] Building nodejs source
[debug] [2023-06-28T07:17:33.488Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:17:33.489Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:17:33.490Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:17:33.741Z] Serving at port 8201

[debug] [2023-06-28T07:17:34.104Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:17:34.104Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:17:34.173Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:17:34.179Z] Setting up firebase config

[debug] [2023-06-28T07:17:34.179Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:17:34.180Z] here in the api

[debug] [2023-06-28T07:17:34.215Z] Initializing file generator

[debug] [2023-06-28T07:17:34.222Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:17:34.227Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:17:38.140Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:17:39.141Z] Validating nodejs source
[debug] [2023-06-28T07:17:39.891Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:17:39.891Z] Building nodejs source
[debug] [2023-06-28T07:17:39.892Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:17:39.893Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:17:39.894Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:17:40.170Z] Serving at port 8090

[debug] [2023-06-28T07:17:40.557Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:17:40.557Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:17:40.628Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:17:40.634Z] Setting up firebase config

[debug] [2023-06-28T07:17:40.635Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:17:40.636Z] here in the api

[debug] [2023-06-28T07:17:40.675Z] Initializing file generator

[debug] [2023-06-28T07:17:40.683Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:17:40.689Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:17:49.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:17:50.020Z] Validating nodejs source
[debug] [2023-06-28T07:17:50.888Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:17:50.888Z] Building nodejs source
[debug] [2023-06-28T07:17:50.888Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:17:50.889Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:17:50.891Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:17:51.169Z] Serving at port 8738

[debug] [2023-06-28T07:17:51.570Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:17:51.570Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:17:51.645Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:17:51.653Z] Setting up firebase config

[debug] [2023-06-28T07:17:51.653Z] Initialized and ready to roll

[debug] [2023-06-28T07:17:51.653Z] connector initialized

[debug] [2023-06-28T07:17:51.654Z] here in the api

[debug] [2023-06-28T07:17:51.693Z] Initializing file generator

[debug] [2023-06-28T07:17:51.702Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:17:51.708Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:18:08.859Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:18:09.859Z] Validating nodejs source
[debug] [2023-06-28T07:18:10.760Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:18:10.760Z] Building nodejs source
[debug] [2023-06-28T07:18:10.760Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:18:10.762Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:18:10.764Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:18:11.149Z] Serving at port 8827

[debug] [2023-06-28T07:18:11.517Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:18:11.518Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:18:11.586Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:18:11.591Z] Setting up firebase config

[debug] [2023-06-28T07:18:11.592Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:18:11.593Z] here in the api

[debug] [2023-06-28T07:18:11.627Z] Initializing file generator

[debug] [2023-06-28T07:18:11.634Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:18:11.638Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:18:19.112Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:18:19.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:18:20.214Z] Validating nodejs source
[debug] [2023-06-28T07:18:21.037Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:18:21.037Z] Building nodejs source
[debug] [2023-06-28T07:18:21.037Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:18:21.041Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:18:21.042Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:18:21.302Z] Serving at port 8297

[debug] [2023-06-28T07:18:21.663Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:18:21.664Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:18:21.733Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:18:21.738Z] Setting up firebase config

[debug] [2023-06-28T07:18:21.739Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:18:21.740Z] here in the api

[debug] [2023-06-28T07:18:21.774Z] Initializing file generator

[debug] [2023-06-28T07:18:21.781Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:18:21.786Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:19:21.526Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:19:22.528Z] Validating nodejs source
[debug] [2023-06-28T07:19:23.294Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:19:23.295Z] Building nodejs source
[debug] [2023-06-28T07:19:23.295Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:19:23.296Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:19:23.297Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:19:23.539Z] Serving at port 8874

[debug] [2023-06-28T07:19:23.891Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:19:23.892Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:19:23.956Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:19:23.961Z] Setting up firebase config

[debug] [2023-06-28T07:19:23.962Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:19:23.963Z] here in the api

[debug] [2023-06-28T07:19:23.997Z] Initializing file generator

[debug] [2023-06-28T07:19:24.004Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:19:24.009Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:19:42.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:19:43.755Z] Validating nodejs source
[debug] [2023-06-28T07:19:44.624Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:19:44.624Z] Building nodejs source
[debug] [2023-06-28T07:19:44.624Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:19:44.625Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:19:44.626Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:19:44.883Z] Serving at port 8487

[debug] [2023-06-28T07:19:45.371Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:19:45.371Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:19:45.446Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:19:45.452Z] Setting up firebase config

[debug] [2023-06-28T07:19:45.453Z] Initialized and ready to roll

[debug] [2023-06-28T07:19:45.453Z] connector initialized

[debug] [2023-06-28T07:19:45.453Z] here in the api

[debug] [2023-06-28T07:19:45.490Z] Initializing file generator

[debug] [2023-06-28T07:19:45.497Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:19:45.508Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:19:58.008Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:19:58.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:19:59.485Z] Validating nodejs source
[debug] [2023-06-28T07:20:00.355Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:20:00.355Z] Building nodejs source
[debug] [2023-06-28T07:20:00.355Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:20:00.356Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:20:00.357Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:20:00.611Z] Serving at port 8653

[debug] [2023-06-28T07:20:01.073Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:20:01.073Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:20:01.140Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T07:20:01.145Z] Setting up firebase config

[debug] [2023-06-28T07:20:01.146Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T07:20:01.147Z] here in the api

[debug] [2023-06-28T07:20:01.180Z] Initializing file generator

[debug] [2023-06-28T07:20:01.187Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:20:01.192Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:20:11.266Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.266Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.267Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.268Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.269Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.269Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:20:11.269Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:20:12.273Z] Validating nodejs source
[debug] [2023-06-28T07:20:13.222Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:20:13.222Z] Building nodejs source
[debug] [2023-06-28T07:20:13.222Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:20:13.223Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:20:13.226Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:20:13.534Z] Serving at port 8503

[debug] [2023-06-28T07:20:14.069Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:20:14.070Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:20:14.200Z] Setting up firebase config

[debug] [2023-06-28T07:20:14.201Z] connector initialized

[debug] [2023-06-28T07:20:14.202Z] here in the api

[debug] [2023-06-28T07:20:14.270Z] Initializing file generator

[debug] [2023-06-28T07:20:14.277Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:20:14.281Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:20:44.362Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/blockServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/blockServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:20:45.363Z] Validating nodejs source
[debug] [2023-06-28T07:20:46.149Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:20:46.149Z] Building nodejs source
[debug] [2023-06-28T07:20:46.149Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:20:46.150Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:20:46.151Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:20:46.391Z] Serving at port 8068

[debug] [2023-06-28T07:20:46.744Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:20:46.744Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:20:46.816Z] Setting up firebase config

[debug] [2023-06-28T07:20:46.817Z] connector initialized

[debug] [2023-06-28T07:20:46.818Z] here in the api

[debug] [2023-06-28T07:20:46.852Z] Initializing file generator

[debug] [2023-06-28T07:20:46.858Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:20:46.863Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:21:05.488Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/blockServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/blockServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:21:06.489Z] Validating nodejs source
[debug] [2023-06-28T07:21:08.238Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:21:08.238Z] Building nodejs source
[debug] [2023-06-28T07:21:08.239Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:21:08.240Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:21:08.241Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:21:08.508Z] Serving at port 8282

[debug] [2023-06-28T07:21:08.993Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:21:08.993Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:21:09.070Z] Setting up firebase config

[debug] [2023-06-28T07:21:09.070Z] connector initialized

[debug] [2023-06-28T07:21:09.071Z] here in the api

[debug] [2023-06-28T07:21:09.107Z] Initializing file generator

[debug] [2023-06-28T07:21:09.113Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:21:09.118Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:21:15.602Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.602Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.603Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.603Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.603Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.603Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.603Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.604Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:21:15.605Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:21:16.606Z] Validating nodejs source
[debug] [2023-06-28T07:21:17.448Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:21:17.448Z] Building nodejs source
[debug] [2023-06-28T07:21:17.448Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:21:17.449Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:21:17.450Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:21:17.820Z] Serving at port 8817

[debug] [2023-06-28T07:21:18.246Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:21:18.248Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:21:18.319Z] Setting up firebase config

[debug] [2023-06-28T07:21:18.320Z] connector initialized

[debug] [2023-06-28T07:21:18.321Z] here in the api

[debug] [2023-06-28T07:21:18.355Z] Initializing file generator

[debug] [2023-06-28T07:21:18.362Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:21:18.366Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:21:19.033Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:21:19.033Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:21:19.034Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:21:19.033Z"],"workRunningCount":1}
[debug] [2023-06-28T07:21:19.034Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:21:19.051Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:21:19.052Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:21:19.052Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:21:19.060Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:21:19.060Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:21:20.719Z] [runtime-status] [13874] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:21:20.721Z] [runtime-status] [13874] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:21:20.721Z] [runtime-status] [13874] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:21:20.721Z] [runtime-status] [13874] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:21:20.722Z] [runtime-status] [13874] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:21:20.939Z] [runtime-status] [13874] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:21:20.939Z] [runtime-status] [13874] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:21:20.940Z] [runtime-status] [13874] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:21:20.941Z] [runtime-status] [13874] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:21:20.943Z] [runtime-status] [13874] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:21:20.943Z] [runtime-status] [13874] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:21:21.272Z] [runtime-status] [13874] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:21:21.273Z] [runtime-status] [13874] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_98c118544f9af16c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13874] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_98c118544f9af16c.sock"}}
[debug] [2023-06-28T07:21:21.293Z] [worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: IDLE"}}
[debug] [2023-06-28T07:21:21.293Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:21:21.294Z] [worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  [Module: null prototype] { {"user":"[Module: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [Module: null prototype] {"}}
[info] >    addPage: [Function: addPage], {"user":"  addPage: [Function: addPage],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   addPage: [Function: addPage],"}}
[info] >    getNodeById: [Function: getNodeById], {"user":"  getNodeById: [Function: getNodeById],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   getNodeById: [Function: getNodeById],"}}
[info] >    getNodeByName: [Function: getNodeByName] {"user":"  getNodeByName: [Function: getNodeByName]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   getNodeByName: [Function: getNodeByName]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50"}}
[info] >      if (nodes.length > 0) { {"user":"    if (nodes.length > 0) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     if (nodes.length > 0) {"}}
[info] >                ^ {"user":"              ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m               ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'length') {"user":"TypeError: Cannot read properties of undefined (reading 'length')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'length')"}}
[info] >      at findNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50:15) {"user":"    at findNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at findNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50:15)"}}
[info] >      at Module.getNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:33:12) {"user":"    at Module.getNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:33:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.getNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:33:12)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:118:15) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:118:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:118:15)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:21:22.479Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:21:22.480Z] [worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: exited"}}
[debug] [2023-06-28T07:21:22.480Z] [worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-25f5c858-7e6d-49a8-bebf-b9886236742a]: FINISHED"}}
[debug] [2023-06-28T07:21:56.943Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:21:57.943Z] Validating nodejs source
[debug] [2023-06-28T07:21:58.862Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:21:58.862Z] Building nodejs source
[debug] [2023-06-28T07:21:58.863Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:21:58.864Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:21:58.865Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:21:59.111Z] Serving at port 8493

[debug] [2023-06-28T07:21:59.493Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:21:59.494Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:21:59.568Z] Setting up firebase config

[debug] [2023-06-28T07:21:59.569Z] connector initialized

[debug] [2023-06-28T07:21:59.570Z] here in the api

[debug] [2023-06-28T07:21:59.604Z] Initializing file generator

[debug] [2023-06-28T07:21:59.611Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:21:59.615Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:22:08.211Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.211Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.211Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.212Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.214Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.214Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:22:08.214Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:22:09.215Z] Validating nodejs source
[debug] [2023-06-28T07:22:10.337Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:22:10.337Z] Building nodejs source
[debug] [2023-06-28T07:22:10.337Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:22:10.338Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:22:10.340Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:22:10.579Z] Serving at port 8593

[debug] [2023-06-28T07:22:10.934Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:22:10.934Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:22:11.005Z] Setting up firebase config

[debug] [2023-06-28T07:22:11.006Z] connector initialized

[debug] [2023-06-28T07:22:11.007Z] here in the api

[debug] [2023-06-28T07:22:11.042Z] Initializing file generator

[debug] [2023-06-28T07:22:11.049Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:22:11.053Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:22:12.067Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:22:12.067Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:22:12.067Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:22:12.067Z"],"workRunningCount":1}
[debug] [2023-06-28T07:22:12.067Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:22:12.083Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:22:12.083Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:22:12.083Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:22:12.091Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:22:12.091Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:22:13.642Z] [runtime-status] [13902] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:22:13.643Z] [runtime-status] [13902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:22:13.643Z] [runtime-status] [13902] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:22:13.644Z] [runtime-status] [13902] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:22:13.645Z] [runtime-status] [13902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:22:13.862Z] [runtime-status] [13902] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:22:13.862Z] [runtime-status] [13902] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:22:13.863Z] [runtime-status] [13902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:22:13.865Z] [runtime-status] [13902] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:22:13.866Z] [runtime-status] [13902] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:22:13.867Z] [runtime-status] [13902] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:22:14.195Z] [runtime-status] [13902] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:22:14.196Z] [runtime-status] [13902] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_cff77d88bc9314bc.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13902] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_cff77d88bc9314bc.sock"}}
[debug] [2023-06-28T07:22:14.222Z] [worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: IDLE"}}
[debug] [2023-06-28T07:22:14.222Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:22:14.222Z] [worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50"}}
[info] >      if (nodes.length > 0) { {"user":"    if (nodes.length > 0) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     if (nodes.length > 0) {"}}
[info] >                ^ {"user":"              ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m               ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'length') {"user":"TypeError: Cannot read properties of undefined (reading 'length')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'length')"}}
[info] >      at findNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50:15) {"user":"    at findNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at findNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:50:15)"}}
[info] >      at Module.getNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:33:12) {"user":"    at Module.getNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:33:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.getNodeByName (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:33:12)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:118:15) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:118:15)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:118:15)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:22:15.150Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:22:15.150Z] [worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: exited"}}
[debug] [2023-06-28T07:22:15.151Z] [worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12a8754d-a430-4177-86d7-b1dc3e1a3c60]: FINISHED"}}
[debug] [2023-06-28T07:24:04.078Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:24:04.078Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:24:04.078Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:24:04.078Z"],"workRunningCount":1}
[debug] [2023-06-28T07:24:04.078Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:24:04.091Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:24:04.091Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:24:04.092Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:24:04.097Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:24:04.098Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:24:05.105Z] [runtime-status] [13930] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:24:05.106Z] [runtime-status] [13930] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:24:05.107Z] [runtime-status] [13930] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:24:05.107Z] [runtime-status] [13930] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:24:05.108Z] [runtime-status] [13930] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:24:05.331Z] [runtime-status] [13930] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:24:05.331Z] [runtime-status] [13930] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:24:05.332Z] [runtime-status] [13930] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:24:05.333Z] [runtime-status] [13930] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:24:05.335Z] [runtime-status] [13930] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:24:05.335Z] [runtime-status] [13930] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:24:05.655Z] [runtime-status] [13930] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:24:05.655Z] [runtime-status] [13930] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_045454eee56b989b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [13930] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_045454eee56b989b.sock"}}
[debug] [2023-06-28T07:24:05.720Z] [worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: IDLE"}}
[debug] [2023-06-28T07:24:05.721Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:24:05.721Z] [worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  {} {"user":{},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {}"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36"}}
[info] >      for (const node of nodes) { {"user":"    for (const node of nodes) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     for (const node of nodes) {"}}
[info] >                         ^ {"user":"                       ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                        ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: nodes is not iterable {"user":"TypeError: nodes is not iterable","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: nodes is not iterable"}}
[info] >      at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24) {"user":"    at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:124:28) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:124:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:124:28)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:24:06.708Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:24:06.708Z] [worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: exited"}}
[debug] [2023-06-28T07:24:06.708Z] [worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9d94aa57-bb2f-4ed9-bcfd-28b6a3c4c4a7]: FINISHED"}}
[debug] [2023-06-28T07:24:23.562Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.566Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.566Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.566Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:24:23.568Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:24:24.572Z] Validating nodejs source
[debug] [2023-06-28T07:24:25.565Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:24:25.565Z] Building nodejs source
[debug] [2023-06-28T07:24:25.565Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:24:25.566Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:24:25.568Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:24:25.873Z] Serving at port 8497

[debug] [2023-06-28T07:24:26.364Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:24:26.364Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:24:26.478Z] Setting up firebase config

[debug] [2023-06-28T07:24:26.479Z] connector initialized

[debug] [2023-06-28T07:24:26.480Z] here in the api

[debug] [2023-06-28T07:24:26.547Z] Initializing file generator

[debug] [2023-06-28T07:24:26.553Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:24:26.558Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:29:00.459Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:29:01.461Z] Validating nodejs source
[debug] [2023-06-28T07:29:02.439Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:29:02.439Z] Building nodejs source
[debug] [2023-06-28T07:29:02.439Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:29:02.441Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:29:02.442Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:29:02.717Z] Serving at port 8961

[debug] [2023-06-28T07:29:03.082Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:29:03.082Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:29:03.155Z] Setting up firebase config

[debug] [2023-06-28T07:29:03.155Z] connector initialized

[debug] [2023-06-28T07:29:03.156Z] here in the api

[debug] [2023-06-28T07:29:03.191Z] Initializing file generator

[debug] [2023-06-28T07:29:03.198Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:29:03.202Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:29:16.240Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:29:17.241Z] Validating nodejs source
[debug] [2023-06-28T07:29:18.029Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:29:18.029Z] Building nodejs source
[debug] [2023-06-28T07:29:18.029Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:29:18.030Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:29:18.031Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:29:18.280Z] Serving at port 8147

[debug] [2023-06-28T07:29:18.648Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:29:18.648Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:29:18.722Z] Setting up firebase config

[debug] [2023-06-28T07:29:18.723Z] connector initialized

[debug] [2023-06-28T07:29:18.724Z] here in the api

[debug] [2023-06-28T07:29:18.758Z] Initializing file generator

[debug] [2023-06-28T07:29:18.764Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:29:18.769Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:29:24.606Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:29:25.607Z] Validating nodejs source
[debug] [2023-06-28T07:29:26.414Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:29:26.415Z] Building nodejs source
[debug] [2023-06-28T07:29:26.415Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:29:26.416Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:29:26.418Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:29:26.693Z] Serving at port 8382

[debug] [2023-06-28T07:29:27.254Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:29:27.254Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:29:27.327Z] Setting up firebase config

[debug] [2023-06-28T07:29:27.328Z] connector initialized

[debug] [2023-06-28T07:29:27.329Z] here in the api

[debug] [2023-06-28T07:29:27.362Z] Initializing file generator

[debug] [2023-06-28T07:29:27.369Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:29:27.374Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:29:35.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.748Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.750Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.750Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:29:35.750Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:29:36.752Z] Validating nodejs source
[debug] [2023-06-28T07:29:37.641Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:29:37.641Z] Building nodejs source
[debug] [2023-06-28T07:29:37.641Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:29:37.642Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:29:37.644Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:29:37.897Z] Serving at port 8945

[debug] [2023-06-28T07:29:38.278Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:29:38.278Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:29:38.356Z] Setting up firebase config

[debug] [2023-06-28T07:29:38.357Z] connector initialized

[debug] [2023-06-28T07:29:38.357Z] here in the api

[debug] [2023-06-28T07:29:38.393Z] Initializing file generator

[debug] [2023-06-28T07:29:38.401Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:29:38.406Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:29:44.121Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:29:44.121Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:29:44.121Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:29:44.121Z"],"workRunningCount":1}
[debug] [2023-06-28T07:29:44.121Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:29:44.136Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:29:44.137Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:29:44.137Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:29:44.145Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:29:44.145Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:29:45.708Z] [runtime-status] [14051] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:29:45.710Z] [runtime-status] [14051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:29:45.710Z] [runtime-status] [14051] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:29:45.710Z] [runtime-status] [14051] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:29:45.712Z] [runtime-status] [14051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:29:45.958Z] [runtime-status] [14051] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:29:45.959Z] [runtime-status] [14051] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:29:45.960Z] [runtime-status] [14051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:29:45.961Z] [runtime-status] [14051] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:29:45.963Z] [runtime-status] [14051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:29:45.964Z] [runtime-status] [14051] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:29:46.306Z] [runtime-status] [14051] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:29:46.307Z] [runtime-status] [14051] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_82b28d3c2af56bfa.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14051] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_82b28d3c2af56bfa.sock"}}
[debug] [2023-06-28T07:29:46.370Z] [worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: IDLE"}}
[debug] [2023-06-28T07:29:46.370Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:29:46.370Z] [worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  {} {"user":{},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {}"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T07:29:47.335Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 965.452279ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 965.452279ms"}}
[debug] [2023-06-28T07:29:47.336Z] [worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: IDLE"}}
[debug] [2023-06-28T07:29:47.336Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:29:47.336Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:29:47.336Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:31:01.463Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:31:02.466Z] Validating nodejs source
[debug] [2023-06-28T07:31:03.497Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:31:03.497Z] Building nodejs source
[debug] [2023-06-28T07:31:03.497Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:31:03.498Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:31:03.500Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:31:03.816Z] Serving at port 8432

[debug] [2023-06-28T07:31:04.355Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:31:04.356Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:31:04.481Z] Setting up firebase config

[debug] [2023-06-28T07:31:04.482Z] connector initialized

[debug] [2023-06-28T07:31:04.482Z] here in the api

[debug] [2023-06-28T07:31:04.552Z] Initializing file generator

[debug] [2023-06-28T07:31:04.559Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:31:04.564Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:31:04.575Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:31:04.575Z] [worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: FINISHING"}}
[debug] [2023-06-28T07:31:04.585Z] [worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: exited"}}
[debug] [2023-06-28T07:31:04.586Z] [worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d4f1b58-6987-40ab-92be-9dbe2bc3c1cc]: FINISHED"}}
[debug] [2023-06-28T07:31:15.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.985Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:31:15.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:31:16.989Z] Validating nodejs source
[debug] [2023-06-28T07:31:18.792Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:31:18.792Z] Building nodejs source
[debug] [2023-06-28T07:31:18.792Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:31:18.793Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:31:18.794Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:31:19.113Z] Serving at port 8634

[debug] [2023-06-28T07:31:19.601Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:31:19.602Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:31:19.712Z] Setting up firebase config

[debug] [2023-06-28T07:31:19.713Z] connector initialized

[debug] [2023-06-28T07:31:19.714Z] here in the api

[debug] [2023-06-28T07:31:19.772Z] Initializing file generator

[debug] [2023-06-28T07:31:19.779Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:31:19.783Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:31:25.339Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:31:25.339Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:31:25.339Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:31:25.339Z"],"workRunningCount":1}
[debug] [2023-06-28T07:31:25.339Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:31:25.355Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:31:25.355Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:31:25.355Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:31:25.363Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:31:25.364Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:31:27.084Z] [runtime-status] [14159] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:31:27.086Z] [runtime-status] [14159] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:31:27.087Z] [runtime-status] [14159] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:31:27.087Z] [runtime-status] [14159] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:31:27.088Z] [runtime-status] [14159] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:31:27.434Z] [runtime-status] [14159] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:31:27.434Z] [runtime-status] [14159] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:31:27.435Z] [runtime-status] [14159] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:31:27.436Z] [runtime-status] [14159] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:31:27.442Z] [runtime-status] [14159] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:31:27.442Z] [runtime-status] [14159] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:31:27.942Z] [runtime-status] [14159] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:31:27.942Z] [runtime-status] [14159] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_98ae3fe0ef6c626e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14159] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_98ae3fe0ef6c626e.sock"}}
[debug] [2023-06-28T07:31:27.998Z] [worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: IDLE"}}
[debug] [2023-06-28T07:31:27.999Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:31:27.999Z] [worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  {"root":{"name":"root","id":"root-node","type":"folder","children":[]}} {"user":{"root":{"name":"root","id":"root-node","type":"folder","children":[]}},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"root\":{\"name\":\"root\",\"id\":\"root-node\",\"type\":\"folder\",\"children\":[]}}"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T07:31:29.679Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1680.188535ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1680.188535ms"}}
[debug] [2023-06-28T07:31:29.679Z] [worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: IDLE"}}
[debug] [2023-06-28T07:31:29.679Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:31:29.680Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:31:29.680Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:32:39.635Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:32:40.637Z] Validating nodejs source
[debug] [2023-06-28T07:32:41.647Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:32:41.648Z] Building nodejs source
[debug] [2023-06-28T07:32:41.648Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:32:41.648Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:32:41.650Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:32:41.876Z] Serving at port 8901

[debug] [2023-06-28T07:32:42.239Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:32:42.240Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:32:42.310Z] Setting up firebase config

[debug] [2023-06-28T07:32:42.311Z] connector initialized

[debug] [2023-06-28T07:32:42.311Z] here in the api

[debug] [2023-06-28T07:32:42.345Z] Initializing file generator

[debug] [2023-06-28T07:32:42.352Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:32:42.356Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:32:42.368Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:32:42.368Z] [worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: FINISHING"}}
[debug] [2023-06-28T07:32:42.379Z] [worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: exited"}}
[debug] [2023-06-28T07:32:42.380Z] [worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cda38830-b9d1-482d-9e3b-ed5697086bd4]: FINISHED"}}
[debug] [2023-06-28T07:33:32.350Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:33:33.352Z] Validating nodejs source
[debug] [2023-06-28T07:33:34.298Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:33:34.299Z] Building nodejs source
[debug] [2023-06-28T07:33:34.299Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:33:34.300Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:33:34.302Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:33:34.545Z] Serving at port 8343

[debug] [2023-06-28T07:33:34.895Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:33:34.896Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:33:34.970Z] Setting up firebase config

[debug] [2023-06-28T07:33:34.970Z] connector initialized

[debug] [2023-06-28T07:33:34.971Z] here in the api

[debug] [2023-06-28T07:33:35.007Z] Initializing file generator

[debug] [2023-06-28T07:33:35.014Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:33:35.018Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:34:51.605Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:34:51.605Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:34:51.605Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:34:51.605Z"],"workRunningCount":1}
[debug] [2023-06-28T07:34:51.605Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:34:51.619Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:34:51.619Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:34:51.619Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:34:51.625Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:34:51.626Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:34:52.882Z] [runtime-status] [14211] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:34:52.883Z] [runtime-status] [14211] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:34:52.883Z] [runtime-status] [14211] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:34:52.884Z] [runtime-status] [14211] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:34:52.885Z] [runtime-status] [14211] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:34:53.102Z] [runtime-status] [14211] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:34:53.103Z] [runtime-status] [14211] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:34:53.103Z] [runtime-status] [14211] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:34:53.105Z] [runtime-status] [14211] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:34:53.107Z] [runtime-status] [14211] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:34:53.107Z] [runtime-status] [14211] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:34:53.417Z] [runtime-status] [14211] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:34:53.417Z] [runtime-status] [14211] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b6f2e5d5b6a89c1e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14211] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b6f2e5d5b6a89c1e.sock"}}
[debug] [2023-06-28T07:34:53.456Z] [worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: IDLE"}}
[debug] [2023-06-28T07:34:53.457Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:34:53.457Z] [worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  {"root":{"type":"folder","name":"root","id":"root-node","children":[]}} {"user":{"root":{"type":"folder","name":"root","id":"root-node","children":[]}},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"root\":{\"type\":\"folder\",\"name\":\"root\",\"id\":\"root-node\",\"children\":[]}}"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T07:34:54.408Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 951.117608ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 951.117608ms"}}
[debug] [2023-06-28T07:34:54.408Z] [worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: IDLE"}}
[debug] [2023-06-28T07:34:54.408Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:34:54.409Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:34:54.409Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:35:19.937Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:35:20.939Z] Validating nodejs source
[debug] [2023-06-28T07:35:21.970Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:35:21.970Z] Building nodejs source
[debug] [2023-06-28T07:35:21.970Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:35:21.971Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:35:21.972Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:35:22.265Z] Serving at port 8030

[debug] [2023-06-28T07:35:22.783Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:35:22.784Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:35:22.907Z] Setting up firebase config

[debug] [2023-06-28T07:35:22.908Z] connector initialized

[debug] [2023-06-28T07:35:22.908Z] here in the api

[debug] [2023-06-28T07:35:22.982Z] Initializing file generator

[debug] [2023-06-28T07:35:22.989Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:35:22.993Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:35:23.006Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:35:23.006Z] [worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: FINISHING"}}
[debug] [2023-06-28T07:35:23.018Z] [worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: exited"}}
[debug] [2023-06-28T07:35:23.018Z] [worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-906a192d-73cb-40ee-afea-a224ef547038]: FINISHED"}}
[debug] [2023-06-28T07:36:03.901Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:36:04.902Z] Validating nodejs source
[debug] [2023-06-28T07:36:05.691Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:36:05.691Z] Building nodejs source
[debug] [2023-06-28T07:36:05.691Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:36:05.693Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:36:05.694Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:36:05.960Z] Serving at port 8939

[debug] [2023-06-28T07:36:06.366Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:36:06.366Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:36:06.439Z] Setting up firebase config

[debug] [2023-06-28T07:36:06.440Z] connector initialized

[debug] [2023-06-28T07:36:06.440Z] here in the api

[debug] [2023-06-28T07:36:06.477Z] Initializing file generator

[debug] [2023-06-28T07:36:06.484Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:36:06.490Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:36:15.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.151Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.151Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.151Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.151Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.151Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.151Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.152Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.153Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.153Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.153Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.153Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:36:15.153Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:36:16.155Z] Validating nodejs source
[debug] [2023-06-28T07:36:17.130Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:36:17.130Z] Building nodejs source
[debug] [2023-06-28T07:36:17.130Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:36:17.131Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:36:17.132Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:36:17.376Z] Serving at port 8724

[debug] [2023-06-28T07:36:17.726Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:36:17.727Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:36:17.799Z] Setting up firebase config

[debug] [2023-06-28T07:36:17.800Z] connector initialized

[debug] [2023-06-28T07:36:17.801Z] here in the api

[debug] [2023-06-28T07:36:17.835Z] Initializing file generator

[debug] [2023-06-28T07:36:17.842Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:36:17.846Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:36:24.253Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:36:24.253Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:36:24.253Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:36:24.253Z"],"workRunningCount":1}
[debug] [2023-06-28T07:36:24.253Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:36:24.268Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:36:24.268Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:36:24.268Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:36:24.274Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:36:24.275Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:36:25.790Z] [runtime-status] [14256] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:36:25.792Z] [runtime-status] [14256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:36:25.792Z] [runtime-status] [14256] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:36:25.792Z] [runtime-status] [14256] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:36:25.793Z] [runtime-status] [14256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:36:26.026Z] [runtime-status] [14256] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:36:26.027Z] [runtime-status] [14256] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:36:26.027Z] [runtime-status] [14256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:36:26.029Z] [runtime-status] [14256] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:36:26.031Z] [runtime-status] [14256] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:36:26.031Z] [runtime-status] [14256] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:36:26.368Z] [runtime-status] [14256] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:36:26.369Z] [runtime-status] [14256] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_13bbfa01b42b4302.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14256] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_13bbfa01b42b4302.sock"}}
[debug] [2023-06-28T07:36:26.400Z] [worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: IDLE"}}
[debug] [2023-06-28T07:36:26.400Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:36:26.401Z] [worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: {"root":{"name":"root","children":[],"type":"folder","id":"root-node"}} {"user":"Nodes: {\"root\":{\"name\":\"root\",\"children\":[],\"type\":\"folder\",\"id\":\"root-node\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: {\"root\":{\"name\":\"root\",\"children\":[],\"type\":\"folder\",\"id\":\"root-node\"}}"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes: {"root":{"name":"root","children":[],"type":"folder","id":"root-node"}} {"user":"Nodes: {\"root\":{\"name\":\"root\",\"children\":[],\"type\":\"folder\",\"id\":\"root-node\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: {\"root\":{\"name\":\"root\",\"children\":[],\"type\":\"folder\",\"id\":\"root-node\"}}"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T07:36:27.479Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1078.721667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1078.721667ms"}}
[debug] [2023-06-28T07:36:27.479Z] [worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: IDLE"}}
[debug] [2023-06-28T07:36:27.480Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:36:27.480Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:36:27.480Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:40:40.067Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:40:41.068Z] Validating nodejs source
[debug] [2023-06-28T07:40:41.888Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:40:41.888Z] Building nodejs source
[debug] [2023-06-28T07:40:41.888Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:40:41.889Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:40:41.891Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:40:42.107Z] Serving at port 8766

[debug] [2023-06-28T07:40:42.457Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:40:42.457Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:40:42.528Z] Setting up firebase config

[debug] [2023-06-28T07:40:42.529Z] connector initialized

[debug] [2023-06-28T07:40:42.529Z] here in the api

[debug] [2023-06-28T07:40:42.564Z] Initializing file generator

[debug] [2023-06-28T07:40:42.570Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:40:42.575Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:40:42.586Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:40:42.587Z] [worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: FINISHING"}}
[debug] [2023-06-28T07:40:42.596Z] [worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: exited"}}
[debug] [2023-06-28T07:40:42.597Z] [worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-8a71e4d6-b373-49f1-9cfe-9309746223a0]: FINISHED"}}
[debug] [2023-06-28T07:40:53.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:40:53.675Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:40:54.676Z] Validating nodejs source
[debug] [2023-06-28T07:40:55.498Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:40:55.498Z] Building nodejs source
[debug] [2023-06-28T07:40:55.499Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:40:55.499Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:40:55.501Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:40:55.774Z] Serving at port 8833

[debug] [2023-06-28T07:40:56.128Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:40:56.128Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:40:56.202Z] Setting up firebase config

[debug] [2023-06-28T07:40:56.203Z] connector initialized

[debug] [2023-06-28T07:40:56.203Z] here in the api

[debug] [2023-06-28T07:40:56.237Z] Initializing file generator

[debug] [2023-06-28T07:40:56.244Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:40:56.248Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:41:07.879Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:07.879Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:07.998Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:07.998Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:07.999Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:07.999Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:07.999Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.000Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.000Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.000Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.000Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.000Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.000Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.001Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.001Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.010Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.011Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.011Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.011Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.011Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.011Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:41:08.011Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:41:09.015Z] Validating nodejs source
[debug] [2023-06-28T07:41:09.962Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:41:09.962Z] Building nodejs source
[debug] [2023-06-28T07:41:09.963Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:41:09.964Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:41:09.965Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:41:10.283Z] Serving at port 8409

[debug] [2023-06-28T07:41:10.810Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:41:10.810Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:41:10.929Z] Setting up firebase config

[debug] [2023-06-28T07:41:10.930Z] connector initialized

[debug] [2023-06-28T07:41:10.931Z] here in the api

[debug] [2023-06-28T07:41:10.994Z] Initializing file generator

[debug] [2023-06-28T07:41:11.000Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:41:11.005Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:41:12.039Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:41:12.039Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:41:12.039Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:41:12.039Z"],"workRunningCount":1}
[debug] [2023-06-28T07:41:12.039Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:41:12.054Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:41:12.054Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:41:12.054Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:41:12.061Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:41:12.061Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:41:13.591Z] [runtime-status] [14316] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:41:13.592Z] [runtime-status] [14316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:41:13.593Z] [runtime-status] [14316] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:41:13.593Z] [runtime-status] [14316] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:41:13.594Z] [runtime-status] [14316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:41:13.816Z] [runtime-status] [14316] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:41:13.816Z] [runtime-status] [14316] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:41:13.817Z] [runtime-status] [14316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:41:13.818Z] [runtime-status] [14316] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:41:13.820Z] [runtime-status] [14316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:41:13.820Z] [runtime-status] [14316] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:41:14.143Z] [runtime-status] [14316] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:41:14.144Z] [runtime-status] [14316] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_7eea303ecc837334.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14316] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_7eea303ecc837334.sock"}}
[debug] [2023-06-28T07:41:14.187Z] [worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: IDLE"}}
[debug] [2023-06-28T07:41:14.187Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:41:14.187Z] [worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] {"user":"Nodes: [object Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object]"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes: [object Object] {"user":"Nodes: [object Object]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object]"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36"}}
[info] >      for (const node of nodes) { {"user":"    for (const node of nodes) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     for (const node of nodes) {"}}
[info] >                         ^ {"user":"                       ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                        ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: nodes is not iterable {"user":"TypeError: nodes is not iterable","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: nodes is not iterable"}}
[info] >      at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24) {"user":"    at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:131:28) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:131:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:131:28)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:41:15.154Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:41:15.155Z] [worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: exited"}}
[debug] [2023-06-28T07:41:15.155Z] [worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d54e089a-12f0-47f4-9daf-4ae477f7b559]: FINISHED"}}
[debug] [2023-06-28T07:41:49.200Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:41:50.201Z] Validating nodejs source
[debug] [2023-06-28T07:41:51.121Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:41:51.122Z] Building nodejs source
[debug] [2023-06-28T07:41:51.122Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:41:51.123Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:41:51.124Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:41:51.387Z] Serving at port 8280

[debug] [2023-06-28T07:41:51.776Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:41:51.776Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:41:51.851Z] Setting up firebase config

[debug] [2023-06-28T07:41:51.851Z] connector initialized

[debug] [2023-06-28T07:41:51.852Z] here in the api

[debug] [2023-06-28T07:41:51.888Z] Initializing file generator

[debug] [2023-06-28T07:41:51.894Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:41:51.899Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:42:13.701Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:42:14.703Z] Validating nodejs source
[debug] [2023-06-28T07:42:15.701Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:42:15.702Z] Building nodejs source
[debug] [2023-06-28T07:42:15.702Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:42:15.703Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:42:15.704Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:42:16.030Z] Serving at port 8395

[debug] [2023-06-28T07:42:16.552Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:42:16.553Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:42:16.629Z] Setting up firebase config

[debug] [2023-06-28T07:42:16.630Z] connector initialized

[debug] [2023-06-28T07:42:16.630Z] here in the api

[debug] [2023-06-28T07:42:16.666Z] Initializing file generator

[debug] [2023-06-28T07:42:16.673Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:42:16.677Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:42:23.260Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.260Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.261Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.262Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.263Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.263Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.263Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:42:23.263Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:42:24.263Z] Validating nodejs source
[debug] [2023-06-28T07:42:25.129Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:42:25.129Z] Building nodejs source
[debug] [2023-06-28T07:42:25.129Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:42:25.132Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:42:25.133Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:42:25.398Z] Serving at port 8702

[debug] [2023-06-28T07:42:25.747Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:42:25.747Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:42:25.819Z] Setting up firebase config

[debug] [2023-06-28T07:42:25.820Z] connector initialized

[debug] [2023-06-28T07:42:25.820Z] here in the api

[debug] [2023-06-28T07:42:25.854Z] Initializing file generator

[debug] [2023-06-28T07:42:25.861Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:42:25.865Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:42:26.828Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:42:26.828Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:42:26.828Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:42:26.828Z"],"workRunningCount":1}
[debug] [2023-06-28T07:42:26.828Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:42:26.843Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:42:26.843Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:42:26.843Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:42:26.849Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:42:26.850Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:42:28.484Z] [runtime-status] [14350] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:42:28.486Z] [runtime-status] [14350] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:42:28.486Z] [runtime-status] [14350] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:42:28.487Z] [runtime-status] [14350] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:42:28.488Z] [runtime-status] [14350] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:42:28.700Z] [runtime-status] [14350] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:42:28.701Z] [runtime-status] [14350] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:42:28.701Z] [runtime-status] [14350] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:42:28.703Z] [runtime-status] [14350] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:42:28.705Z] [runtime-status] [14350] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:42:28.705Z] [runtime-status] [14350] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:42:29.032Z] [runtime-status] [14350] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:42:29.032Z] [runtime-status] [14350] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_5cf7ff303806f5a2.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14350] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_5cf7ff303806f5a2.sock"}}
[debug] [2023-06-28T07:42:29.077Z] [worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: IDLE"}}
[debug] [2023-06-28T07:42:29.077Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:42:29.078Z] [worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  {"user":"Nodes: ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: "}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  {"user":"Nodes: ","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: "}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36"}}
[info] >      for (const node of nodes) { {"user":"    for (const node of nodes) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     for (const node of nodes) {"}}
[info] >                         ^ {"user":"                       ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                        ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: nodes is not iterable {"user":"TypeError: nodes is not iterable","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: nodes is not iterable"}}
[info] >      at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24) {"user":"    at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:28) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:28)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:42:30.033Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:42:30.033Z] [worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: exited"}}
[debug] [2023-06-28T07:42:30.033Z] [worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ace9b091-fffb-439b-8733-852b20f317a3]: FINISHED"}}
[debug] [2023-06-28T07:43:00.429Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:43:01.429Z] Validating nodejs source
[debug] [2023-06-28T07:43:02.331Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:43:02.331Z] Building nodejs source
[debug] [2023-06-28T07:43:02.332Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:43:02.333Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:43:02.334Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:43:02.602Z] Serving at port 8368

[debug] [2023-06-28T07:43:02.988Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:43:02.988Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:43:03.060Z] Setting up firebase config

[debug] [2023-06-28T07:43:03.061Z] connector initialized

[debug] [2023-06-28T07:43:03.062Z] here in the api

[debug] [2023-06-28T07:43:03.096Z] Initializing file generator

[debug] [2023-06-28T07:43:03.103Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:43:03.108Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:43:04.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:43:05.567Z] Validating nodejs source
[debug] [2023-06-28T07:43:06.465Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:43:06.465Z] Building nodejs source
[debug] [2023-06-28T07:43:06.465Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:43:06.466Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:43:06.468Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:43:06.703Z] Serving at port 8259

[debug] [2023-06-28T07:43:07.064Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:43:07.064Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:43:07.139Z] Setting up firebase config

[debug] [2023-06-28T07:43:07.141Z] connector initialized

[debug] [2023-06-28T07:43:07.141Z] here in the api

[debug] [2023-06-28T07:43:07.185Z] Initializing file generator

[debug] [2023-06-28T07:43:07.192Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:43:07.197Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:43:13.952Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:13.953Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:13.953Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:13.953Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:13.953Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:13.953Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.054Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.055Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.055Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:43:14.055Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:43:15.056Z] Validating nodejs source
[debug] [2023-06-28T07:43:15.853Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:43:15.853Z] Building nodejs source
[debug] [2023-06-28T07:43:15.853Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:43:15.854Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:43:15.855Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:43:16.109Z] Serving at port 8232

[debug] [2023-06-28T07:43:16.455Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:43:16.455Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:43:16.526Z] Setting up firebase config

[debug] [2023-06-28T07:43:16.527Z] connector initialized

[debug] [2023-06-28T07:43:16.528Z] here in the api

[debug] [2023-06-28T07:43:16.561Z] Initializing file generator

[debug] [2023-06-28T07:43:16.568Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:43:16.573Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:43:17.467Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:43:17.467Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:43:17.467Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:43:17.467Z"],"workRunningCount":1}
[debug] [2023-06-28T07:43:17.467Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:43:17.482Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:43:17.483Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:43:17.483Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:43:17.489Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:43:17.489Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:43:19.164Z] [runtime-status] [14390] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:43:19.165Z] [runtime-status] [14390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:43:19.166Z] [runtime-status] [14390] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:43:19.166Z] [runtime-status] [14390] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:43:19.167Z] [runtime-status] [14390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:43:19.380Z] [runtime-status] [14390] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:43:19.380Z] [runtime-status] [14390] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:43:19.381Z] [runtime-status] [14390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:43:19.383Z] [runtime-status] [14390] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:43:19.384Z] [runtime-status] [14390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:43:19.385Z] [runtime-status] [14390] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:43:19.709Z] [runtime-status] [14390] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:43:19.709Z] [runtime-status] [14390] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_1e495e73a859f3d8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14390] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_1e495e73a859f3d8.sock"}}
[debug] [2023-06-28T07:43:19.719Z] [worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: IDLE"}}
[debug] [2023-06-28T07:43:19.719Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:43:19.720Z] [worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36"}}
[info] >      for (const node of nodes) { {"user":"    for (const node of nodes) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     for (const node of nodes) {"}}
[info] >                         ^ {"user":"                       ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                        ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: nodes is not iterable {"user":"TypeError: nodes is not iterable","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: nodes is not iterable"}}
[info] >      at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24) {"user":"    at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.getNodeById (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:36:24)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:28) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:28)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:43:20.684Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:43:20.684Z] [worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: exited"}}
[debug] [2023-06-28T07:43:20.684Z] [worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-68b3aee5-df9c-4df4-996d-c7f380bb1105]: FINISHED"}}
[debug] [2023-06-28T07:44:52.220Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:44:53.222Z] Validating nodejs source
[debug] [2023-06-28T07:44:53.973Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:44:53.973Z] Building nodejs source
[debug] [2023-06-28T07:44:53.973Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:44:53.974Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:44:53.975Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:44:54.195Z] Serving at port 8245

[debug] [2023-06-28T07:44:54.558Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:44:54.558Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:44:54.631Z] Setting up firebase config

[debug] [2023-06-28T07:44:54.633Z] connector initialized

[debug] [2023-06-28T07:44:54.633Z] here in the api

[debug] [2023-06-28T07:44:54.668Z] Initializing file generator

[debug] [2023-06-28T07:44:54.675Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:44:54.679Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:45:17.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:45:18.787Z] Validating nodejs source
[debug] [2023-06-28T07:45:19.544Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:45:19.545Z] Building nodejs source
[debug] [2023-06-28T07:45:19.545Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:45:19.546Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:45:19.547Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:45:19.802Z] Serving at port 8516

[debug] [2023-06-28T07:45:20.175Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:45:20.175Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:45:20.248Z] Setting up firebase config

[debug] [2023-06-28T07:45:20.249Z] connector initialized

[debug] [2023-06-28T07:45:20.250Z] here in the api

[debug] [2023-06-28T07:45:20.285Z] Initializing file generator

[debug] [2023-06-28T07:45:20.292Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:45:20.301Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:45:29.804Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.806Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:45:29.807Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:45:30.808Z] Validating nodejs source
[debug] [2023-06-28T07:45:31.623Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:45:31.623Z] Building nodejs source
[debug] [2023-06-28T07:45:31.623Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:45:31.624Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:45:31.625Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:45:31.875Z] Serving at port 8576

[debug] [2023-06-28T07:45:32.249Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:45:32.249Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:45:32.346Z] Setting up firebase config
connector initialized
here in the api

[debug] [2023-06-28T07:45:32.382Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:45:32.382Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:45:32.382Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:45:32.382Z"],"workRunningCount":1}
[debug] [2023-06-28T07:45:32.383Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:45:32.398Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:45:32.399Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:45:32.399Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:45:32.406Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:45:32.406Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:45:32.411Z] Initializing file generator

[debug] [2023-06-28T07:45:32.412Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:45:32.417Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:45:33.453Z] [runtime-status] [14440] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:45:33.455Z] [runtime-status] [14440] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:45:33.455Z] [runtime-status] [14440] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:45:33.455Z] [runtime-status] [14440] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:45:33.456Z] [runtime-status] [14440] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:45:33.682Z] [runtime-status] [14440] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:45:33.682Z] [runtime-status] [14440] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:45:33.689Z] [runtime-status] [14440] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:45:33.691Z] [runtime-status] [14440] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:45:33.693Z] [runtime-status] [14440] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:45:33.693Z] [runtime-status] [14440] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:45:34.115Z] [runtime-status] [14440] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:45:34.117Z] [runtime-status] [14440] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_22229bc15fd94c9f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14440] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_22229bc15fd94c9f.sock"}}
[debug] [2023-06-28T07:45:34.149Z] [worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: IDLE"}}
[debug] [2023-06-28T07:45:34.149Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:45:34.149Z] [worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T07:45:35.207Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1057.827522ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1057.827522ms"}}
[debug] [2023-06-28T07:45:35.207Z] [worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: IDLE"}}
[debug] [2023-06-28T07:45:35.207Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:45:35.208Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:45:35.208Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:46:02.808Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:46:03.808Z] Validating nodejs source
[debug] [2023-06-28T07:46:04.818Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:46:04.818Z] Building nodejs source
[debug] [2023-06-28T07:46:04.818Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:46:04.819Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:46:04.820Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:46:05.062Z] Serving at port 8184

[debug] [2023-06-28T07:46:05.419Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:46:05.420Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:46:05.493Z] Setting up firebase config

[debug] [2023-06-28T07:46:05.494Z] connector initialized

[debug] [2023-06-28T07:46:05.495Z] here in the api

[debug] [2023-06-28T07:46:05.529Z] Initializing file generator

[debug] [2023-06-28T07:46:05.535Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:46:05.540Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:46:05.551Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:46:05.552Z] [worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: FINISHING"}}
[debug] [2023-06-28T07:46:05.562Z] [worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: exited"}}
[debug] [2023-06-28T07:46:05.562Z] [worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-223a6a8d-0923-4484-a750-18829fadcdaa]: FINISHED"}}
[debug] [2023-06-28T07:46:40.061Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:46:41.063Z] Validating nodejs source
[debug] [2023-06-28T07:46:41.892Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:46:41.893Z] Building nodejs source
[debug] [2023-06-28T07:46:41.893Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:46:41.894Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:46:41.895Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:46:42.139Z] Serving at port 8386

[debug] [2023-06-28T07:46:42.495Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:46:42.495Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:46:42.567Z] Setting up firebase config

[debug] [2023-06-28T07:46:42.568Z] connector initialized

[debug] [2023-06-28T07:46:42.568Z] here in the api

[debug] [2023-06-28T07:46:42.602Z] Initializing file generator

[debug] [2023-06-28T07:46:42.609Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:46:42.613Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:46:55.764Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:46:56.765Z] Validating nodejs source
[debug] [2023-06-28T07:46:58.515Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:46:58.515Z] Building nodejs source
[debug] [2023-06-28T07:46:58.515Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:46:58.516Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:46:58.518Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:46:58.760Z] Serving at port 8231

[debug] [2023-06-28T07:46:59.121Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:46:59.121Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:46:59.194Z] Setting up firebase config

[debug] [2023-06-28T07:46:59.194Z] connector initialized

[debug] [2023-06-28T07:46:59.195Z] here in the api

[debug] [2023-06-28T07:46:59.228Z] Initializing file generator

[debug] [2023-06-28T07:46:59.234Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:46:59.239Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:47:01.852Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:47:02.854Z] Validating nodejs source
[debug] [2023-06-28T07:47:03.731Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:47:03.731Z] Building nodejs source
[debug] [2023-06-28T07:47:03.731Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:47:03.732Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:47:03.734Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:47:03.966Z] Serving at port 8995

[debug] [2023-06-28T07:47:04.330Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:47:04.331Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:47:04.409Z] Setting up firebase config

[debug] [2023-06-28T07:47:04.410Z] connector initialized

[debug] [2023-06-28T07:47:04.411Z] here in the api

[debug] [2023-06-28T07:47:04.446Z] Initializing file generator

[debug] [2023-06-28T07:47:04.453Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:47:04.458Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:47:13.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.584Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.585Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.586Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:47:13.586Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:47:14.586Z] Validating nodejs source
[debug] [2023-06-28T07:47:15.416Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:47:15.417Z] Building nodejs source
[debug] [2023-06-28T07:47:15.417Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:47:15.418Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:47:15.419Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:47:15.426Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:47:15.426Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:47:15.426Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:47:15.426Z"],"workRunningCount":1}
[debug] [2023-06-28T07:47:15.426Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:47:15.440Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:47:15.441Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:47:15.441Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:47:15.446Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:47:15.446Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:47:15.668Z] Serving at port 8858

[debug] [2023-06-28T07:47:16.027Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:47:16.027Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:47:16.101Z] Setting up firebase config

[debug] [2023-06-28T07:47:16.102Z] connector initialized

[debug] [2023-06-28T07:47:16.103Z] here in the api

[debug] [2023-06-28T07:47:16.137Z] Initializing file generator

[debug] [2023-06-28T07:47:16.144Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:47:16.149Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:47:16.497Z] [runtime-status] [14496] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:47:16.498Z] [runtime-status] [14496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:47:16.499Z] [runtime-status] [14496] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:47:16.499Z] [runtime-status] [14496] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:47:16.502Z] [runtime-status] [14496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:47:16.733Z] [runtime-status] [14496] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:47:16.733Z] [runtime-status] [14496] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:47:16.734Z] [runtime-status] [14496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:47:16.737Z] [runtime-status] [14496] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:47:16.740Z] [runtime-status] [14496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:47:16.740Z] [runtime-status] [14496] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:47:17.072Z] [runtime-status] [14496] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:47:17.072Z] [runtime-status] [14496] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_e32f78a13d72210d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14496] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_e32f78a13d72210d.sock"}}
[debug] [2023-06-28T07:47:17.172Z] [worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: IDLE"}}
[debug] [2023-06-28T07:47:17.173Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:47:17.173Z] [worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot {"user":"idroot","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: undefined {"user":"parent: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: undefined"}}
[info] >  Nodes: [object Object] undefined {"user":"Nodes: [object Object] undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] undefined"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15"}}
[info] >          rootNode.children = rootNode.children || []; {"user":"        rootNode.children = rootNode.children || [];","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         rootNode.children = rootNode.children || [];"}}
[info] >                                       ^ {"user":"                                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'children') {"user":"TypeError: Cannot read properties of undefined (reading 'children')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'children')"}}
[info] >      at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15:38) {"user":"    at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15:38)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15:38)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:207:31) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:207:31)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:207:31)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:47:19.800Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:47:19.801Z] [worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: exited"}}
[debug] [2023-06-28T07:47:19.801Z] [worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-12288957-a8c5-468d-982c-41a2d73b988f]: FINISHED"}}
[debug] [2023-06-28T07:49:48.917Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:49:49.918Z] Validating nodejs source
[debug] [2023-06-28T07:49:51.507Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:49:51.507Z] Building nodejs source
[debug] [2023-06-28T07:49:51.507Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:49:51.508Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:49:51.509Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:49:51.724Z] Serving at port 8142

[debug] [2023-06-28T07:49:52.091Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:49:52.091Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:49:52.165Z] Setting up firebase config

[debug] [2023-06-28T07:49:52.166Z] connector initialized

[debug] [2023-06-28T07:49:52.167Z] here in the api

[debug] [2023-06-28T07:49:52.202Z] Initializing file generator

[debug] [2023-06-28T07:49:52.209Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:49:52.213Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:50:08.107Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.108Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:08.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:09.112Z] Validating nodejs source
[debug] [2023-06-28T07:50:09.901Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:50:09.901Z] Building nodejs source
[debug] [2023-06-28T07:50:09.901Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:50:09.902Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:50:09.903Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:50:10.125Z] Serving at port 8649

[debug] [2023-06-28T07:50:10.476Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:50:10.477Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:50:10.551Z] Setting up firebase config

[debug] [2023-06-28T07:50:10.551Z] connector initialized

[debug] [2023-06-28T07:50:10.552Z] here in the api

[debug] [2023-06-28T07:50:10.587Z] Initializing file generator

[debug] [2023-06-28T07:50:10.593Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:50:10.598Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:50:32.360Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:50:33.361Z] Validating nodejs source
[debug] [2023-06-28T07:50:34.337Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:50:34.338Z] Building nodejs source
[debug] [2023-06-28T07:50:34.338Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:50:34.339Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:50:34.340Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:50:34.773Z] Serving at port 8272

[debug] [2023-06-28T07:50:35.375Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:50:35.375Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:50:35.464Z] Setting up firebase config

[debug] [2023-06-28T07:50:35.465Z] connector initialized

[debug] [2023-06-28T07:50:35.466Z] here in the api

[debug] [2023-06-28T07:50:35.517Z] Initializing file generator

[debug] [2023-06-28T07:50:35.524Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:50:35.529Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:50:41.050Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.050Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.050Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.050Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.052Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:50:41.053Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:50:42.054Z] Validating nodejs source
[debug] [2023-06-28T07:50:42.903Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:50:42.903Z] Building nodejs source
[debug] [2023-06-28T07:50:42.903Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:50:42.904Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:50:42.906Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:50:43.145Z] Serving at port 8643

[debug] [2023-06-28T07:50:43.513Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:50:43.513Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:50:43.594Z] Setting up firebase config

[debug] [2023-06-28T07:50:43.595Z] connector initialized

[debug] [2023-06-28T07:50:43.596Z] here in the api

[debug] [2023-06-28T07:50:43.637Z] Initializing file generator

[debug] [2023-06-28T07:50:43.645Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:50:43.650Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:50:46.717Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:50:46.717Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:50:46.717Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:50:46.717Z"],"workRunningCount":1}
[debug] [2023-06-28T07:50:46.717Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:50:46.733Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:50:46.733Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:50:46.733Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:50:46.739Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:50:46.740Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:50:48.287Z] [runtime-status] [14573] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:50:48.288Z] [runtime-status] [14573] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:50:48.289Z] [runtime-status] [14573] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:50:48.289Z] [runtime-status] [14573] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:50:48.290Z] [runtime-status] [14573] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:50:48.503Z] [runtime-status] [14573] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:50:48.504Z] [runtime-status] [14573] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:50:48.504Z] [runtime-status] [14573] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:50:48.506Z] [runtime-status] [14573] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:50:48.508Z] [runtime-status] [14573] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:50:48.508Z] [runtime-status] [14573] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:50:48.834Z] [runtime-status] [14573] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:50:48.834Z] [runtime-status] [14573] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c3503471a12182c6.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14573] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c3503471a12182c6.sock"}}
[debug] [2023-06-28T07:50:48.869Z] [worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: IDLE"}}
[debug] [2023-06-28T07:50:48.869Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:50:48.870Z] [worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot {"user":"idroot","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: root-node {"user":"parent: root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: root-node"}}
[info] >  Found parent node {"user":"Found parent node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Found parent node"}}
[info] >  Nodes: [object Object] undefined {"user":"Nodes: [object Object] undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] undefined"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'test2333', {"user":"  name: 'test2333',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'test2333',"}}
[info] >    id: 'a2bd6113-4072-434e-aa7c-e5a62eceb940', {"user":"  id: 'a2bd6113-4072-434e-aa7c-e5a62eceb940',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'a2bd6113-4072-434e-aa7c-e5a62eceb940',"}}
[info] >    type: 'file' {"user":"  type: 'file'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'file'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  made it here! {"user":"made it here!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it here!"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    root: { name: 'root', id: 'root-node', type: 'folder', children: [] } {"user":"  root: { name: 'root', id: 'root-node', type: 'folder', children: [] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   root: { name: 'root', id: 'root-node', type: 'folder', children: [] }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T07:50:51.010Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2141.070933ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2141.070933ms"}}
[debug] [2023-06-28T07:50:51.011Z] [worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: IDLE"}}
[debug] [2023-06-28T07:50:51.011Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:50:51.011Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:50:51.011Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:52:29.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:52:30.112Z] Validating nodejs source
[debug] [2023-06-28T07:52:31.787Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:52:31.788Z] Building nodejs source
[debug] [2023-06-28T07:52:31.788Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:52:31.789Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:52:31.790Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:52:32.046Z] Serving at port 8743

[debug] [2023-06-28T07:52:32.208Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:52:32.414Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:52:32.414Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:52:32.499Z] Setting up firebase config

[debug] [2023-06-28T07:52:32.499Z] connector initialized

[debug] [2023-06-28T07:52:32.500Z] here in the api

[debug] [2023-06-28T07:52:32.540Z] Initializing file generator

[debug] [2023-06-28T07:52:32.548Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:52:32.557Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:52:32.582Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:52:32.582Z] [worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: FINISHING"}}
[debug] [2023-06-28T07:52:32.594Z] [worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: exited"}}
[debug] [2023-06-28T07:52:32.594Z] [worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7476db1c-0211-47a2-844e-5401d4ab985a]: FINISHED"}}
[debug] [2023-06-28T07:52:33.210Z] Validating nodejs source
[debug] [2023-06-28T07:52:34.001Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:52:34.001Z] Building nodejs source
[debug] [2023-06-28T07:52:34.001Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:52:34.002Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:52:34.004Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:52:34.235Z] Serving at port 8018

[debug] [2023-06-28T07:52:34.585Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:52:34.585Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:52:34.659Z] Setting up firebase config

[debug] [2023-06-28T07:52:34.660Z] connector initialized

[debug] [2023-06-28T07:52:34.661Z] here in the api

[debug] [2023-06-28T07:52:34.695Z] Initializing file generator

[debug] [2023-06-28T07:52:34.702Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:52:34.707Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:53:17.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:53:17.239Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:53:18.241Z] Validating nodejs source
[debug] [2023-06-28T07:53:19.374Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:53:19.374Z] Building nodejs source
[debug] [2023-06-28T07:53:19.375Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:53:19.378Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:53:19.381Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:53:19.687Z] Serving at port 8766

[debug] [2023-06-28T07:53:20.223Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:53:20.224Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:53:20.353Z] Setting up firebase config

[debug] [2023-06-28T07:53:20.353Z] connector initialized

[debug] [2023-06-28T07:53:20.354Z] here in the api

[debug] [2023-06-28T07:53:20.432Z] Initializing file generator

[debug] [2023-06-28T07:53:20.439Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:53:20.444Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:53:23.137Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:53:23.137Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:53:23.137Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:53:23.137Z"],"workRunningCount":1}
[debug] [2023-06-28T07:53:23.137Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:53:23.152Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:53:23.152Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:53:23.152Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:53:23.159Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:53:23.159Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:53:24.770Z] [runtime-status] [14632] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:53:24.771Z] [runtime-status] [14632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:53:24.772Z] [runtime-status] [14632] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:53:24.772Z] [runtime-status] [14632] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:53:24.773Z] [runtime-status] [14632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:53:24.986Z] [runtime-status] [14632] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:53:24.986Z] [runtime-status] [14632] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:53:24.987Z] [runtime-status] [14632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:53:24.988Z] [runtime-status] [14632] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:53:24.990Z] [runtime-status] [14632] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:53:24.990Z] [runtime-status] [14632] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:53:25.319Z] [runtime-status] [14632] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:53:25.319Z] [runtime-status] [14632] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_870ebac336e92d01.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14632] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_870ebac336e92d01.sock"}}
[debug] [2023-06-28T07:53:25.390Z] [worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: IDLE"}}
[debug] [2023-06-28T07:53:25.391Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:53:25.391Z] [worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot {"user":"idroot","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: root-node {"user":"parent: root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: root-node"}}
[info] >  Found parent node {"user":"Found parent node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Found parent node"}}
[info] >  Nodes: [object Object] undefined {"user":"Nodes: [object Object] undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] undefined"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'test2333', {"user":"  name: 'test2333',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'test2333',"}}
[info] >    id: '89de2016-6e1c-4f37-908a-ab7afcf6f837', {"user":"  id: '89de2016-6e1c-4f37-908a-ab7afcf6f837',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: '89de2016-6e1c-4f37-908a-ab7afcf6f837',"}}
[info] >    type: 'file' {"user":"  type: 'file'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'file'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    root: { id: 'root-node', type: 'folder', children: [], name: 'root' } {"user":"  root: { id: 'root-node', type: 'folder', children: [], name: 'root' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   root: { id: 'root-node', type: 'folder', children: [], name: 'root' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  made it here! {"user":"made it here!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it here!"}}
[debug] [2023-06-28T07:53:33.016Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 7624.20737ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 7624.20737ms"}}
[debug] [2023-06-28T07:53:33.016Z] [worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: IDLE"}}
[debug] [2023-06-28T07:53:33.016Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:53:33.016Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:53:33.016Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:54:17.217Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:54:18.218Z] Validating nodejs source
[debug] [2023-06-28T07:54:19.002Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:54:19.003Z] Building nodejs source
[debug] [2023-06-28T07:54:19.003Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:54:19.004Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:54:19.005Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:54:19.230Z] Serving at port 8896

[debug] [2023-06-28T07:54:19.584Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:54:19.585Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:54:19.656Z] Setting up firebase config

[debug] [2023-06-28T07:54:19.656Z] connector initialized

[debug] [2023-06-28T07:54:19.657Z] here in the api

[debug] [2023-06-28T07:54:19.694Z] Initializing file generator

[debug] [2023-06-28T07:54:19.701Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:54:19.706Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:54:19.717Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:54:19.717Z] [worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: FINISHING"}}
[debug] [2023-06-28T07:54:19.729Z] [worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: exited"}}
[debug] [2023-06-28T07:54:19.729Z] [worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a07f8c2e-7e5b-4abf-8126-13b8836a4071]: FINISHED"}}
[debug] [2023-06-28T07:54:21.128Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:54:22.130Z] Validating nodejs source
[debug] [2023-06-28T07:54:22.916Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:54:22.916Z] Building nodejs source
[debug] [2023-06-28T07:54:22.917Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:54:22.917Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:54:22.919Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:54:23.269Z] Serving at port 8260

[debug] [2023-06-28T07:54:23.784Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:54:23.784Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:54:23.859Z] Setting up firebase config

[debug] [2023-06-28T07:54:23.859Z] connector initialized

[debug] [2023-06-28T07:54:23.860Z] here in the api

[debug] [2023-06-28T07:54:23.894Z] Initializing file generator

[debug] [2023-06-28T07:54:23.901Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:54:23.905Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:54:31.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:54:31.150Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:54:32.151Z] Validating nodejs source
[debug] [2023-06-28T07:54:32.910Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:54:32.910Z] Building nodejs source
[debug] [2023-06-28T07:54:32.910Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:54:32.913Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:54:32.915Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:54:33.163Z] Serving at port 8668

[debug] [2023-06-28T07:54:33.523Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:54:33.523Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:54:33.598Z] Setting up firebase config

[debug] [2023-06-28T07:54:33.599Z] connector initialized

[debug] [2023-06-28T07:54:33.599Z] here in the api

[debug] [2023-06-28T07:54:33.633Z] Initializing file generator

[debug] [2023-06-28T07:54:33.639Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:54:33.644Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:54:37.018Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:54:37.018Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:54:37.018Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:54:37.018Z"],"workRunningCount":1}
[debug] [2023-06-28T07:54:37.018Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:54:37.032Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:54:37.033Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:54:37.033Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:54:37.039Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:54:37.040Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:54:38.040Z] [runtime-status] [14668] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:54:38.042Z] [runtime-status] [14668] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:54:38.042Z] [runtime-status] [14668] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:54:38.043Z] [runtime-status] [14668] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:54:38.043Z] [runtime-status] [14668] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:54:38.260Z] [runtime-status] [14668] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:54:38.260Z] [runtime-status] [14668] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:54:38.261Z] [runtime-status] [14668] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:54:38.262Z] [runtime-status] [14668] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:54:38.264Z] [runtime-status] [14668] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:54:38.264Z] [runtime-status] [14668] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:54:38.649Z] [runtime-status] [14668] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:54:38.649Z] [runtime-status] [14668] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_defd5047dea44f26.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14668] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_defd5047dea44f26.sock"}}
[debug] [2023-06-28T07:54:38.665Z] [worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: IDLE"}}
[debug] [2023-06-28T07:54:38.665Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:54:38.666Z] [worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot {"user":"idroot","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: root-node {"user":"parent: root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: root-node"}}
[info] >  Found parent node {"user":"Found parent node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Found parent node"}}
[info] >  Nodes: [object Object] undefined {"user":"Nodes: [object Object] undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] undefined"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  { {"user":"{","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {"}}
[info] >    root: { type: 'folder', name: 'root', children: [], id: 'root-node' } {"user":"  root: { type: 'folder', name: 'root', children: [], id: 'root-node' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   root: { type: 'folder', name: 'root', children: [], id: 'root-node' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  made it here! {"user":"made it here!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it here!"}}
[debug] [2023-06-28T07:54:41.727Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3061.480775ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3061.480775ms"}}
[debug] [2023-06-28T07:54:41.728Z] [worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: IDLE"}}
[debug] [2023-06-28T07:54:41.728Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T07:54:41.728Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T07:54:41.728Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:56:11.044Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:56:12.046Z] Validating nodejs source
[debug] [2023-06-28T07:56:12.810Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:56:12.810Z] Building nodejs source
[debug] [2023-06-28T07:56:12.810Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:56:12.811Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:56:12.812Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:56:13.030Z] Serving at port 8630

[debug] [2023-06-28T07:56:13.394Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:56:13.394Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:56:13.468Z] Setting up firebase config

[debug] [2023-06-28T07:56:13.468Z] connector initialized

[debug] [2023-06-28T07:56:13.469Z] here in the api

[debug] [2023-06-28T07:56:13.503Z] Initializing file generator

[debug] [2023-06-28T07:56:13.510Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:56:13.514Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:56:13.526Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T07:56:13.526Z] [worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: FINISHING"}}
[debug] [2023-06-28T07:56:13.537Z] [worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: exited"}}
[debug] [2023-06-28T07:56:13.537Z] [worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-61809102-15aa-40fa-96bc-62b3b71c24c3]: FINISHED"}}
[debug] [2023-06-28T07:56:32.811Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:56:33.812Z] Validating nodejs source
[debug] [2023-06-28T07:56:34.558Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:56:34.558Z] Building nodejs source
[debug] [2023-06-28T07:56:34.558Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:56:34.559Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:56:34.560Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:56:34.819Z] Serving at port 8311

[debug] [2023-06-28T07:56:35.217Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:56:35.217Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:56:35.293Z] Setting up firebase config

[debug] [2023-06-28T07:56:35.294Z] connector initialized

[debug] [2023-06-28T07:56:35.294Z] here in the api

[debug] [2023-06-28T07:56:35.339Z] Initializing file generator

[debug] [2023-06-28T07:56:35.347Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:56:35.354Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:56:43.120Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.120Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.120Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.120Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.120Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.121Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.121Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.121Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.121Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.121Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.221Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.221Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.221Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.221Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.221Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:56:43.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:56:44.224Z] Validating nodejs source
[debug] [2023-06-28T07:56:45.018Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:56:45.018Z] Building nodejs source
[debug] [2023-06-28T07:56:45.018Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:56:45.024Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:56:45.025Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:56:45.269Z] Serving at port 8359

[debug] [2023-06-28T07:56:45.619Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:56:45.619Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:56:45.690Z] Setting up firebase config

[debug] [2023-06-28T07:56:45.691Z] connector initialized

[debug] [2023-06-28T07:56:45.692Z] here in the api

[debug] [2023-06-28T07:56:45.726Z] Initializing file generator

[debug] [2023-06-28T07:56:45.733Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:56:45.737Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:56:58.498Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:56:58.498Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:56:58.498Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:56:58.498Z"],"workRunningCount":1}
[debug] [2023-06-28T07:56:58.498Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:56:58.511Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:56:58.512Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:56:58.512Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:56:58.518Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:56:58.518Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:56:59.559Z] [runtime-status] [14724] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:56:59.561Z] [runtime-status] [14724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:56:59.561Z] [runtime-status] [14724] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:56:59.562Z] [runtime-status] [14724] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:56:59.563Z] [runtime-status] [14724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:56:59.778Z] [runtime-status] [14724] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:56:59.778Z] [runtime-status] [14724] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:56:59.779Z] [runtime-status] [14724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:56:59.780Z] [runtime-status] [14724] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:56:59.782Z] [runtime-status] [14724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:56:59.782Z] [runtime-status] [14724] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:57:00.110Z] [runtime-status] [14724] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:57:00.110Z] [runtime-status] [14724] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_886f0d2972490fc6.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14724] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_886f0d2972490fc6.sock"}}
[debug] [2023-06-28T07:57:00.146Z] [worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: IDLE"}}
[debug] [2023-06-28T07:57:00.146Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:57:00.147Z] [worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  idroot {"user":"idroot","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: undefined {"user":"parent: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: undefined"}}
[info] >  Nodes: [object Object] undefined {"user":"Nodes: [object Object] undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] undefined"}}
[info] >  No nodes!! {"user":"No nodes!!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m No nodes!!"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15"}}
[info] >          rootNode.children = rootNode.children || []; {"user":"        rootNode.children = rootNode.children || [];","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         rootNode.children = rootNode.children || [];"}}
[info] >                                       ^ {"user":"                                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'children') {"user":"TypeError: Cannot read properties of undefined (reading 'children')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'children')"}}
[info] >      at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15:38) {"user":"    at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15:38)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:15:38)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:207:31) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:207:31)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:207:31)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:57:03.139Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:57:03.139Z] [worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: exited"}}
[debug] [2023-06-28T07:57:03.139Z] [worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6f16381-03dc-4527-b7de-66b0674802f7]: FINISHED"}}
[debug] [2023-06-28T07:57:18.144Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:57:18.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:57:19.149Z] Validating nodejs source
[debug] [2023-06-28T07:57:19.890Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:57:19.890Z] Building nodejs source
[debug] [2023-06-28T07:57:19.890Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:57:19.892Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:57:19.893Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:57:20.128Z] Serving at port 8007

[debug] [2023-06-28T07:57:20.479Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:57:20.479Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:57:20.549Z] Setting up firebase config

[debug] [2023-06-28T07:57:20.549Z] connector initialized

[debug] [2023-06-28T07:57:20.550Z] here in the api

[debug] [2023-06-28T07:57:20.583Z] Initializing file generator

[debug] [2023-06-28T07:57:20.590Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:57:20.594Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:58:41.266Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:58:42.267Z] Validating nodejs source
[debug] [2023-06-28T07:58:43.147Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:58:43.148Z] Building nodejs source
[debug] [2023-06-28T07:58:43.148Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:58:43.149Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:58:43.151Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:58:43.542Z] Serving at port 8869

[debug] [2023-06-28T07:58:43.983Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:58:43.983Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:58:44.054Z] Setting up firebase config

[debug] [2023-06-28T07:58:44.055Z] connector initialized

[debug] [2023-06-28T07:58:44.056Z] here in the api

[debug] [2023-06-28T07:58:44.089Z] Initializing file generator

[debug] [2023-06-28T07:58:44.096Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:58:44.101Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:58:51.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.739Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.740Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.839Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.839Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.839Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.839Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.839Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.839Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T07:58:51.840Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T07:58:52.841Z] Validating nodejs source
[debug] [2023-06-28T07:58:53.603Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:58:53.603Z] Building nodejs source
[debug] [2023-06-28T07:58:53.603Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:58:53.605Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:58:53.607Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:58:53.839Z] Serving at port 8981

[debug] [2023-06-28T07:58:54.182Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:58:54.182Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:58:54.253Z] Setting up firebase config

[debug] [2023-06-28T07:58:54.254Z] connector initialized

[debug] [2023-06-28T07:58:54.255Z] here in the api

[debug] [2023-06-28T07:58:54.287Z] Initializing file generator

[debug] [2023-06-28T07:58:54.294Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:58:54.298Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:59:08.154Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:59:08.154Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:59:08.155Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T07:59:08.154Z"],"workRunningCount":1}
[debug] [2023-06-28T07:59:08.155Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T07:59:08.170Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T07:59:08.170Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T07:59:08.170Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T07:59:08.176Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T07:59:08.176Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T07:59:09.690Z] [runtime-status] [14779] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:59:09.691Z] [runtime-status] [14779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:59:09.691Z] [runtime-status] [14779] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T07:59:09.692Z] [runtime-status] [14779] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T07:59:09.693Z] [runtime-status] [14779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:59:09.911Z] [runtime-status] [14779] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T07:59:09.911Z] [runtime-status] [14779] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T07:59:09.912Z] [runtime-status] [14779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:59:09.913Z] [runtime-status] [14779] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T07:59:09.915Z] [runtime-status] [14779] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T07:59:09.915Z] [runtime-status] [14779] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T07:59:10.253Z] [runtime-status] [14779] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T07:59:10.253Z] [runtime-status] [14779] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ed3c32103a0cd64e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14779] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ed3c32103a0cd64e.sock"}}
[debug] [2023-06-28T07:59:10.303Z] [worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: IDLE"}}
[debug] [2023-06-28T07:59:10.303Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T07:59:10.303Z] [worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125"}}
[info] >      const projectFiles = data.root.children; {"user":"    const projectFiles = data.root.children;","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const projectFiles = data.root.children;"}}
[info] >                                     ^ {"user":"                                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'children') {"user":"TypeError: Cannot read properties of undefined (reading 'children')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'children')"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:36) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:36)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:36)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T07:59:11.795Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T07:59:11.796Z] [worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: exited"}}
[debug] [2023-06-28T07:59:11.796Z] [worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5154e7da-931a-495f-b921-3a29564b719c]: FINISHED"}}
[debug] [2023-06-28T07:59:40.697Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:59:41.698Z] Validating nodejs source
[debug] [2023-06-28T07:59:42.516Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:59:42.517Z] Building nodejs source
[debug] [2023-06-28T07:59:42.517Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:59:42.518Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:59:42.519Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:59:42.766Z] Serving at port 8050

[debug] [2023-06-28T07:59:43.123Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:59:43.211Z] Setting up firebase config

[debug] [2023-06-28T07:59:43.212Z] connector initialized

[debug] [2023-06-28T07:59:43.213Z] here in the api

[debug] [2023-06-28T07:59:43.255Z] Initializing file generator

[debug] [2023-06-28T07:59:43.266Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:59:43.273Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T07:59:51.371Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T07:59:52.372Z] Validating nodejs source
[debug] [2023-06-28T07:59:53.214Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T07:59:53.214Z] Building nodejs source
[debug] [2023-06-28T07:59:53.214Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T07:59:53.217Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T07:59:53.218Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T07:59:53.458Z] Serving at port 8623

[debug] [2023-06-28T07:59:53.817Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T07:59:53.817Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T07:59:53.888Z] Setting up firebase config

[debug] [2023-06-28T07:59:53.889Z] connector initialized

[debug] [2023-06-28T07:59:53.889Z] here in the api

[debug] [2023-06-28T07:59:53.924Z] Initializing file generator

[debug] [2023-06-28T07:59:53.930Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T07:59:53.935Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:00:23.682Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.682Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.682Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.683Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.684Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.685Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.685Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:00:23.685Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:00:24.686Z] Validating nodejs source
[debug] [2023-06-28T08:00:25.478Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:00:25.479Z] Building nodejs source
[debug] [2023-06-28T08:00:25.479Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:00:25.482Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:00:25.483Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:00:25.731Z] Serving at port 8311

[debug] [2023-06-28T08:00:26.231Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:00:26.231Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:00:26.315Z] Setting up firebase config

[debug] [2023-06-28T08:00:26.316Z] connector initialized

[debug] [2023-06-28T08:00:26.316Z] here in the api

[debug] [2023-06-28T08:00:26.356Z] Initializing file generator

[debug] [2023-06-28T08:00:26.363Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:00:26.375Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:00:29.298Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:00:29.298Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:00:29.298Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:00:29.298Z"],"workRunningCount":1}
[debug] [2023-06-28T08:00:29.298Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:00:29.314Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:00:29.314Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:00:29.314Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:00:29.322Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:00:29.322Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:00:30.347Z] [runtime-status] [14820] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:00:30.348Z] [runtime-status] [14820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:00:30.348Z] [runtime-status] [14820] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:00:30.349Z] [runtime-status] [14820] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:00:30.350Z] [runtime-status] [14820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:00:30.564Z] [runtime-status] [14820] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:00:30.564Z] [runtime-status] [14820] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:00:30.565Z] [runtime-status] [14820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:00:30.566Z] [runtime-status] [14820] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:00:30.568Z] [runtime-status] [14820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:00:30.568Z] [runtime-status] [14820] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:00:30.901Z] [runtime-status] [14820] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:00:30.901Z] [runtime-status] [14820] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_304432e18d369b7f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14820] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_304432e18d369b7f.sock"}}
[debug] [2023-06-28T08:00:30.950Z] [worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: IDLE"}}
[debug] [2023-06-28T08:00:30.951Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:00:30.951Z] [worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"root-node"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"root-node\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"root-node\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T08:00:33.478Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2526.573134ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2526.573134ms"}}
[debug] [2023-06-28T08:00:33.478Z] [worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: IDLE"}}
[debug] [2023-06-28T08:00:33.478Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:00:33.478Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:00:33.478Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:01:24.501Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:01:25.502Z] Validating nodejs source
[debug] [2023-06-28T08:01:26.446Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:01:26.446Z] Building nodejs source
[debug] [2023-06-28T08:01:26.446Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:01:26.447Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:01:26.449Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:01:27.018Z] Serving at port 8788

[debug] [2023-06-28T08:01:27.642Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:01:27.784Z] Setting up firebase config

[debug] [2023-06-28T08:01:27.785Z] connector initialized

[debug] [2023-06-28T08:01:27.786Z] here in the api

[debug] [2023-06-28T08:01:27.848Z] Initializing file generator

[debug] [2023-06-28T08:01:27.855Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:01:27.861Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:01:27.874Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:01:27.875Z] [worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: FINISHING"}}
[debug] [2023-06-28T08:01:27.889Z] [worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: exited"}}
[debug] [2023-06-28T08:01:27.889Z] [worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6e59db56-7508-4dff-9469-d9fd10b67364]: FINISHED"}}
[debug] [2023-06-28T08:01:36.472Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.473Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.575Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:01:36.576Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:01:37.578Z] Validating nodejs source
[debug] [2023-06-28T08:01:38.541Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:01:38.541Z] Building nodejs source
[debug] [2023-06-28T08:01:38.541Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:01:38.542Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:01:38.543Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:01:38.839Z] Serving at port 8306

[debug] [2023-06-28T08:01:39.360Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:01:39.361Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:01:39.493Z] Setting up firebase config

[debug] [2023-06-28T08:01:39.494Z] connector initialized

[debug] [2023-06-28T08:01:39.495Z] here in the api

[debug] [2023-06-28T08:01:39.567Z] Initializing file generator

[debug] [2023-06-28T08:01:39.574Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:01:39.578Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:01:42.409Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:01:42.409Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:01:42.409Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:01:42.409Z"],"workRunningCount":1}
[debug] [2023-06-28T08:01:42.409Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:01:42.424Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:01:42.424Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:01:42.424Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:01:42.431Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:01:42.431Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:01:43.994Z] [runtime-status] [14858] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:01:43.995Z] [runtime-status] [14858] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:01:43.995Z] [runtime-status] [14858] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:01:43.996Z] [runtime-status] [14858] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:01:43.997Z] [runtime-status] [14858] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:01:44.212Z] [runtime-status] [14858] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:01:44.212Z] [runtime-status] [14858] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:01:44.213Z] [runtime-status] [14858] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:01:44.214Z] [runtime-status] [14858] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:01:44.216Z] [runtime-status] [14858] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:01:44.216Z] [runtime-status] [14858] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:01:44.550Z] [runtime-status] [14858] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:01:44.551Z] [runtime-status] [14858] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c1fc56dfb28cec0c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14858] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c1fc56dfb28cec0c.sock"}}
[debug] [2023-06-28T08:01:44.562Z] [worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: IDLE"}}
[debug] [2023-06-28T08:01:44.562Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:01:44.563Z] [worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  parent: undefined {"user":"parent: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent: undefined"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  made it here! {"user":"made it here!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it here!"}}
[debug] [2023-06-28T08:01:47.183Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2620.654293ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2620.654293ms"}}
[debug] [2023-06-28T08:01:47.184Z] [worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: IDLE"}}
[debug] [2023-06-28T08:01:47.184Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:01:47.184Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:01:47.184Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:02:22.671Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:02:23.673Z] Validating nodejs source
[debug] [2023-06-28T08:02:24.506Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:02:24.506Z] Building nodejs source
[debug] [2023-06-28T08:02:24.506Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:02:24.507Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:02:24.509Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:02:24.798Z] Serving at port 8430

[debug] [2023-06-28T08:02:25.162Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:02:25.163Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:02:25.240Z] Setting up firebase config

[debug] [2023-06-28T08:02:25.241Z] connector initialized

[debug] [2023-06-28T08:02:25.242Z] here in the api

[debug] [2023-06-28T08:02:25.277Z] Initializing file generator

[debug] [2023-06-28T08:02:25.284Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:02:25.289Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:02:25.300Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:02:25.300Z] [worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: FINISHING"}}
[debug] [2023-06-28T08:02:25.311Z] [worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: exited"}}
[debug] [2023-06-28T08:02:25.311Z] [worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7148e00c-31a2-44bf-af36-ebe97e40c917]: FINISHED"}}
[debug] [2023-06-28T08:02:25.321Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:02:26.323Z] Validating nodejs source
[debug] [2023-06-28T08:02:27.059Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:02:27.060Z] Building nodejs source
[debug] [2023-06-28T08:02:27.060Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:02:27.061Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:02:27.062Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:02:27.298Z] Serving at port 8778

[debug] [2023-06-28T08:02:27.746Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:02:27.746Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:02:27.817Z] Setting up firebase config

[debug] [2023-06-28T08:02:27.818Z] connector initialized

[debug] [2023-06-28T08:02:27.818Z] here in the api

[debug] [2023-06-28T08:02:27.851Z] Initializing file generator

[debug] [2023-06-28T08:02:27.858Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:02:27.862Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:03:11.073Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:03:12.074Z] Validating nodejs source
[debug] [2023-06-28T08:03:12.939Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:03:12.939Z] Building nodejs source
[debug] [2023-06-28T08:03:12.939Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:03:12.940Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:03:12.941Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:03:13.227Z] Serving at port 8033

[debug] [2023-06-28T08:03:13.686Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:03:13.686Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:03:13.758Z] Setting up firebase config

[debug] [2023-06-28T08:03:13.759Z] connector initialized

[debug] [2023-06-28T08:03:13.760Z] here in the api

[debug] [2023-06-28T08:03:13.796Z] Initializing file generator

[debug] [2023-06-28T08:03:13.803Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:03:13.808Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:03:32.552Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.552Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.553Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.553Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.553Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.553Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.553Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.553Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.554Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.555Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.555Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.555Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.555Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.555Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:03:32.555Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:03:33.558Z] Validating nodejs source
[debug] [2023-06-28T08:03:34.746Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:03:34.747Z] Building nodejs source
[debug] [2023-06-28T08:03:34.747Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:03:34.748Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:03:34.749Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:03:35.056Z] Serving at port 8221

[debug] [2023-06-28T08:03:35.610Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:03:35.610Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:03:35.749Z] Setting up firebase config

[debug] [2023-06-28T08:03:35.750Z] connector initialized

[debug] [2023-06-28T08:03:35.751Z] here in the api

[debug] [2023-06-28T08:03:35.818Z] Initializing file generator

[debug] [2023-06-28T08:03:35.825Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:03:35.832Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:03:37.605Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:03:37.605Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:03:37.605Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:03:37.605Z"],"workRunningCount":1}
[debug] [2023-06-28T08:03:37.605Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:03:37.620Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:03:37.620Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:03:37.620Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:03:37.626Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:03:37.627Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:03:39.293Z] [runtime-status] [14957] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:03:39.295Z] [runtime-status] [14957] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:03:39.295Z] [runtime-status] [14957] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:03:39.296Z] [runtime-status] [14957] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:03:39.297Z] [runtime-status] [14957] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:03:39.510Z] [runtime-status] [14957] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:03:39.510Z] [runtime-status] [14957] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:03:39.511Z] [runtime-status] [14957] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:03:39.512Z] [runtime-status] [14957] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:03:39.514Z] [runtime-status] [14957] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:03:39.514Z] [runtime-status] [14957] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:03:39.842Z] [runtime-status] [14957] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:03:39.842Z] [runtime-status] [14957] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_a8d790963975db5d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14957] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_a8d790963975db5d.sock"}}
[debug] [2023-06-28T08:03:39.854Z] [worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: IDLE"}}
[debug] [2023-06-28T08:03:39.854Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:03:39.855Z] [worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  made it here! {"user":"made it here!","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it here!"}}
[debug] [2023-06-28T08:03:43.122Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3267.262308ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3267.262308ms"}}
[debug] [2023-06-28T08:03:43.122Z] [worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: IDLE"}}
[debug] [2023-06-28T08:03:43.122Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:03:43.122Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:03:43.122Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:04:06.901Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:04:07.903Z] Validating nodejs source
[debug] [2023-06-28T08:04:08.739Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:04:08.740Z] Building nodejs source
[debug] [2023-06-28T08:04:08.740Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:04:08.741Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:04:08.742Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:04:09.037Z] Serving at port 8013

[debug] [2023-06-28T08:04:09.391Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:04:09.391Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:04:09.464Z] Setting up firebase config

[debug] [2023-06-28T08:04:09.465Z] connector initialized

[debug] [2023-06-28T08:04:09.465Z] here in the api

[debug] [2023-06-28T08:04:09.499Z] Initializing file generator

[debug] [2023-06-28T08:04:09.506Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:04:09.510Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:04:09.522Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:04:09.522Z] [worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: FINISHING"}}
[debug] [2023-06-28T08:04:09.533Z] [worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: exited"}}
[debug] [2023-06-28T08:04:09.533Z] [worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0eb7a0e1-daac-42fb-be31-41567ada801c]: FINISHED"}}
[debug] [2023-06-28T08:04:18.066Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:04:19.067Z] Validating nodejs source
[debug] [2023-06-28T08:04:19.887Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:04:19.887Z] Building nodejs source
[debug] [2023-06-28T08:04:19.887Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:04:19.888Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:04:19.889Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:04:19.969Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:04:20.174Z] Serving at port 8782

[debug] [2023-06-28T08:04:20.593Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:04:20.593Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:04:20.689Z] Setting up firebase config

[debug] [2023-06-28T08:04:20.690Z] connector initialized

[debug] [2023-06-28T08:04:20.690Z] here in the api

[debug] [2023-06-28T08:04:20.731Z] Initializing file generator

[debug] [2023-06-28T08:04:20.740Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:04:20.746Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:04:20.970Z] Validating nodejs source
[debug] [2023-06-28T08:04:21.744Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:04:21.744Z] Building nodejs source
[debug] [2023-06-28T08:04:21.744Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:04:21.745Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:04:21.746Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:04:21.974Z] Serving at port 8544

[debug] [2023-06-28T08:04:22.391Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:04:22.391Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:04:22.483Z] Setting up firebase config

[debug] [2023-06-28T08:04:22.484Z] connector initialized

[debug] [2023-06-28T08:04:22.485Z] here in the api

[debug] [2023-06-28T08:04:22.519Z] Initializing file generator

[debug] [2023-06-28T08:04:22.526Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:04:22.530Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:04:29.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.019Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.020Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:04:29.021Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:04:30.023Z] Validating nodejs source
[debug] [2023-06-28T08:04:30.765Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:04:30.765Z] Building nodejs source
[debug] [2023-06-28T08:04:30.765Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:04:30.766Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:04:30.768Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:04:31.012Z] Serving at port 8246

[debug] [2023-06-28T08:04:31.362Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:04:31.363Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:04:31.433Z] Setting up firebase config

[debug] [2023-06-28T08:04:31.434Z] connector initialized

[debug] [2023-06-28T08:04:31.435Z] here in the api

[debug] [2023-06-28T08:04:31.469Z] Initializing file generator

[debug] [2023-06-28T08:04:31.475Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:04:31.479Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:04:33.228Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:04:33.228Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:04:33.228Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:04:33.228Z"],"workRunningCount":1}
[debug] [2023-06-28T08:04:33.228Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:04:33.242Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:04:33.242Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:04:33.243Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:04:33.249Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:04:33.250Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:04:34.773Z] [runtime-status] [14996] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:04:34.775Z] [runtime-status] [14996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:04:34.775Z] [runtime-status] [14996] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:04:34.776Z] [runtime-status] [14996] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:04:34.777Z] [runtime-status] [14996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:04:34.989Z] [runtime-status] [14996] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:04:34.990Z] [runtime-status] [14996] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:04:34.990Z] [runtime-status] [14996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:04:34.992Z] [runtime-status] [14996] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:04:34.994Z] [runtime-status] [14996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:04:34.994Z] [runtime-status] [14996] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:04:35.318Z] [runtime-status] [14996] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:04:35.319Z] [runtime-status] [14996] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0c664879e5e360f2.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [14996] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0c664879e5e360f2.sock"}}
[debug] [2023-06-28T08:04:35.374Z] [worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: IDLE"}}
[debug] [2023-06-28T08:04:35.374Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:04:35.374Z] [worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[debug] [2023-06-28T08:04:38.601Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3226.57635ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3226.57635ms"}}
[debug] [2023-06-28T08:04:38.601Z] [worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: IDLE"}}
[debug] [2023-06-28T08:04:38.601Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:04:38.601Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:04:38.601Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:04:51.983Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:04:52.983Z] Validating nodejs source
[debug] [2023-06-28T08:04:53.805Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:04:53.805Z] Building nodejs source
[debug] [2023-06-28T08:04:53.805Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:04:53.806Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:04:53.807Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:04:54.052Z] Serving at port 8330

[debug] [2023-06-28T08:04:54.405Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:04:54.405Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:04:54.475Z] Setting up firebase config

[debug] [2023-06-28T08:04:54.476Z] connector initialized

[debug] [2023-06-28T08:04:54.477Z] here in the api

[debug] [2023-06-28T08:04:54.510Z] Initializing file generator

[debug] [2023-06-28T08:04:54.517Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:04:54.521Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:04:54.533Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:04:54.533Z] [worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: FINISHING"}}
[debug] [2023-06-28T08:04:54.542Z] [worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: exited"}}
[debug] [2023-06-28T08:04:54.542Z] [worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-fd39b962-91a6-47b4-8f09-b156dc0fa0c5]: FINISHED"}}
[debug] [2023-06-28T08:05:08.083Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:05:09.084Z] Validating nodejs source
[debug] [2023-06-28T08:05:10.024Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:05:10.024Z] Building nodejs source
[debug] [2023-06-28T08:05:10.024Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:05:10.025Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:05:10.026Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:05:10.352Z] Serving at port 8015

[debug] [2023-06-28T08:05:10.908Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:05:11.001Z] Setting up firebase config
connector initialized

[debug] [2023-06-28T08:05:11.001Z] here in the api

[debug] [2023-06-28T08:05:11.046Z] Initializing file generator

[debug] [2023-06-28T08:05:11.055Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:05:11.060Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:05:16.943Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:16.944Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.044Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.044Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.044Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.045Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:05:17.046Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:05:18.048Z] Validating nodejs source
[debug] [2023-06-28T08:05:18.795Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:05:18.795Z] Building nodejs source
[debug] [2023-06-28T08:05:18.795Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:05:18.796Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:05:18.797Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:05:19.037Z] Serving at port 8840

[debug] [2023-06-28T08:05:19.383Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:05:19.383Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:05:19.455Z] Setting up firebase config

[debug] [2023-06-28T08:05:19.456Z] connector initialized

[debug] [2023-06-28T08:05:19.457Z] here in the api

[debug] [2023-06-28T08:05:19.492Z] Initializing file generator

[debug] [2023-06-28T08:05:19.499Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:05:19.503Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:05:19.839Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:05:19.839Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:05:19.839Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:05:19.839Z"],"workRunningCount":1}
[debug] [2023-06-28T08:05:19.839Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:05:19.854Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:05:19.855Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:05:19.855Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:05:19.862Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:05:19.862Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:05:21.396Z] [runtime-status] [15029] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:05:21.398Z] [runtime-status] [15029] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:05:21.398Z] [runtime-status] [15029] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:05:21.398Z] [runtime-status] [15029] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:05:21.399Z] [runtime-status] [15029] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:05:21.613Z] [runtime-status] [15029] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:05:21.614Z] [runtime-status] [15029] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:05:21.615Z] [runtime-status] [15029] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:05:21.616Z] [runtime-status] [15029] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:05:21.618Z] [runtime-status] [15029] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:05:21.618Z] [runtime-status] [15029] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:05:21.949Z] [runtime-status] [15029] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:05:21.950Z] [runtime-status] [15029] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c9aa6f7754c09213.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15029] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_c9aa6f7754c09213.sock"}}
[debug] [2023-06-28T08:05:21.987Z] [worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: IDLE"}}
[debug] [2023-06-28T08:05:21.987Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:05:21.987Z] [worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[debug] [2023-06-28T08:05:24.751Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2763.673109ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2763.673109ms"}}
[debug] [2023-06-28T08:05:24.751Z] [worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: IDLE"}}
[debug] [2023-06-28T08:05:24.751Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:05:24.751Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:05:24.751Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:06:04.375Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:06:05.376Z] Validating nodejs source
[debug] [2023-06-28T08:06:06.205Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:06:06.205Z] Building nodejs source
[debug] [2023-06-28T08:06:06.205Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:06:06.207Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:06:06.208Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:06:06.456Z] Serving at port 8553

[debug] [2023-06-28T08:06:06.817Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:06:06.817Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:06:06.891Z] Setting up firebase config

[debug] [2023-06-28T08:06:06.892Z] connector initialized

[debug] [2023-06-28T08:06:06.893Z] here in the api

[debug] [2023-06-28T08:06:06.928Z] Initializing file generator

[debug] [2023-06-28T08:06:06.936Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:06:06.940Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:06:06.953Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:06:06.955Z] [worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: FINISHING"}}
[debug] [2023-06-28T08:06:06.966Z] [worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: exited"}}
[debug] [2023-06-28T08:06:06.966Z] [worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c692d2b9-d0cb-428d-94ab-c8f149f9fa91]: FINISHED"}}
[debug] [2023-06-28T08:06:28.029Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.030Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.030Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.030Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.030Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:06:28.032Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:06:29.035Z] Validating nodejs source
[debug] [2023-06-28T08:06:30.017Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:06:30.017Z] Building nodejs source
[debug] [2023-06-28T08:06:30.017Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:06:30.018Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:06:30.019Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:06:30.312Z] Serving at port 8085

[debug] [2023-06-28T08:06:30.940Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:06:30.940Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:06:31.060Z] Setting up firebase config

[debug] [2023-06-28T08:06:31.061Z] connector initialized

[debug] [2023-06-28T08:06:31.062Z] here in the api

[debug] [2023-06-28T08:06:31.121Z] Initializing file generator

[debug] [2023-06-28T08:06:31.128Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:06:31.133Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:06:34.814Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:06:34.814Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:06:34.815Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:06:34.814Z"],"workRunningCount":1}
[debug] [2023-06-28T08:06:34.815Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:06:34.832Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:06:34.833Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:06:34.833Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:06:34.841Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:06:34.841Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:06:36.357Z] [runtime-status] [15066] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:06:36.358Z] [runtime-status] [15066] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:06:36.358Z] [runtime-status] [15066] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:06:36.359Z] [runtime-status] [15066] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:06:36.360Z] [runtime-status] [15066] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:06:36.570Z] [runtime-status] [15066] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:06:36.570Z] [runtime-status] [15066] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:06:36.571Z] [runtime-status] [15066] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:06:36.572Z] [runtime-status] [15066] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:06:36.574Z] [runtime-status] [15066] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:06:36.574Z] [runtime-status] [15066] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:06:36.902Z] [runtime-status] [15066] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:06:36.903Z] [runtime-status] [15066] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_2275ff3fad0518ff.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15066] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_2275ff3fad0518ff.sock"}}
[debug] [2023-06-28T08:06:36.973Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE"}}
[debug] [2023-06-28T08:06:36.973Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:06:36.974Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[debug] [2023-06-28T08:06:39.154Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2180.525708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2180.525708ms"}}
[debug] [2023-06-28T08:06:39.154Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE"}}
[debug] [2023-06-28T08:06:39.155Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:06:39.155Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:06:39.155Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:06:57.777Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:06:57.777Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:06:57.777Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:06:57.777Z"],"workRunningCount":1}
[debug] [2023-06-28T08:06:57.777Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:06:57.791Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:06:57.791Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:06:57.791Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:06:57.791Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T08:06:58.568Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 776.923519ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 776.923519ms"}}
[debug] [2023-06-28T08:06:58.568Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE"}}
[debug] [2023-06-28T08:06:58.569Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:06:58.569Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:06:58.569Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:07:47.346Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:07:47.346Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:07:47.346Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:07:47.346Z"],"workRunningCount":1}
[debug] [2023-06-28T08:07:47.346Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:07:47.359Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:07:47.360Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:07:47.360Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:07:47.360Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[debug] [2023-06-28T08:07:49.669Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2309.482932ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2309.482932ms"}}
[debug] [2023-06-28T08:07:49.670Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE"}}
[debug] [2023-06-28T08:07:49.670Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:07:49.670Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:07:49.670Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:07:58.576Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:07:58.576Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:07:58.576Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:07:58.576Z"],"workRunningCount":1}
[debug] [2023-06-28T08:07:58.576Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:07:58.589Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:07:58.590Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:07:58.590Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:07:58.590Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  Nodes: [object Object] 1 {"user":"Nodes: [object Object] 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes: [object Object] 1"}}
[info] >  Nodes:  0 {"user":"Nodes:  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Nodes:  0"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T08:07:59.363Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 773.065607ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 773.065607ms"}}
[debug] [2023-06-28T08:07:59.363Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: IDLE"}}
[debug] [2023-06-28T08:07:59.363Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:07:59.363Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:07:59.363Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:09:48.159Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:09:49.159Z] Validating nodejs source
[debug] [2023-06-28T08:09:50.860Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:09:50.861Z] Building nodejs source
[debug] [2023-06-28T08:09:50.861Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:09:50.862Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:09:50.863Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:09:51.084Z] Serving at port 8645

[debug] [2023-06-28T08:09:51.446Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:09:51.447Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:09:51.522Z] Setting up firebase config

[debug] [2023-06-28T08:09:51.523Z] connector initialized

[debug] [2023-06-28T08:09:51.523Z] here in the api

[debug] [2023-06-28T08:09:51.560Z] Initializing file generator

[debug] [2023-06-28T08:09:51.566Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:09:51.571Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:09:51.583Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:09:51.583Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: FINISHING"}}
[debug] [2023-06-28T08:09:51.594Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: exited"}}
[debug] [2023-06-28T08:09:51.594Z] [worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-64899139-8621-4300-990e-c92dae4a07ec]: FINISHED"}}
[debug] [2023-06-28T08:10:34.213Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:10:35.213Z] Validating nodejs source
[debug] [2023-06-28T08:10:36.038Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:10:36.038Z] Building nodejs source
[debug] [2023-06-28T08:10:36.038Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:10:36.039Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:10:36.040Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:10:36.289Z] Serving at port 8612

[debug] [2023-06-28T08:10:36.660Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:10:36.660Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:10:36.732Z] Setting up firebase config

[debug] [2023-06-28T08:10:36.732Z] connector initialized

[debug] [2023-06-28T08:10:36.733Z] here in the api

[debug] [2023-06-28T08:10:36.768Z] Initializing file generator

[debug] [2023-06-28T08:10:36.774Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:10:36.779Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:10:55.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.205Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:10:55.206Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:10:56.208Z] Validating nodejs source
[debug] [2023-06-28T08:10:56.987Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:10:56.987Z] Building nodejs source
[debug] [2023-06-28T08:10:56.987Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:10:56.989Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:10:56.990Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:10:57.227Z] Serving at port 8731

[debug] [2023-06-28T08:10:57.575Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:10:57.575Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:10:57.646Z] Setting up firebase config

[debug] [2023-06-28T08:10:57.647Z] connector initialized

[debug] [2023-06-28T08:10:57.648Z] here in the api

[debug] [2023-06-28T08:10:57.681Z] Initializing file generator

[debug] [2023-06-28T08:10:57.687Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:10:57.692Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:13:28.907Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:13:28.907Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:13:28.907Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:13:28.907Z"],"workRunningCount":1}
[debug] [2023-06-28T08:13:28.907Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:13:28.921Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:13:28.921Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:13:28.922Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:13:28.928Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:13:28.929Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:13:29.983Z] [runtime-status] [15161] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:13:29.984Z] [runtime-status] [15161] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:13:29.985Z] [runtime-status] [15161] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:13:29.985Z] [runtime-status] [15161] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:13:29.986Z] [runtime-status] [15161] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:13:30.208Z] [runtime-status] [15161] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:13:30.208Z] [runtime-status] [15161] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:13:30.209Z] [runtime-status] [15161] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:13:30.210Z] [runtime-status] [15161] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:13:30.212Z] [runtime-status] [15161] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:13:30.213Z] [runtime-status] [15161] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:13:30.543Z] [runtime-status] [15161] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:13:30.543Z] [runtime-status] [15161] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b656706702ef15b4.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15161] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b656706702ef15b4.sock"}}
[debug] [2023-06-28T08:13:30.559Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE"}}
[debug] [2023-06-28T08:13:30.559Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:13:30.560Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T08:13:32.039Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1478.668024ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1478.668024ms"}}
[debug] [2023-06-28T08:13:32.039Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE"}}
[debug] [2023-06-28T08:13:32.039Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:13:32.039Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:13:32.039Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:13:45.087Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:13:45.087Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:13:45.087Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:13:45.087Z"],"workRunningCount":1}
[debug] [2023-06-28T08:13:45.087Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:13:45.101Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:13:45.102Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:13:45.102Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:13:45.102Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[debug] [2023-06-28T08:13:47.345Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2242.987573ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2242.987573ms"}}
[debug] [2023-06-28T08:13:47.345Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE"}}
[debug] [2023-06-28T08:13:47.346Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:13:47.346Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:13:47.346Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:13:56.910Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:13:56.910Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:13:56.911Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:13:56.910Z"],"workRunningCount":1}
[debug] [2023-06-28T08:13:56.911Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:13:56.924Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:13:56.925Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:13:56.925Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:13:56.925Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T08:13:57.728Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 802.669607ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 802.669607ms"}}
[debug] [2023-06-28T08:13:57.728Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE"}}
[debug] [2023-06-28T08:13:57.728Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:13:57.729Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:13:57.729Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:14:06.539Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:14:06.539Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:14:06.539Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:14:06.539Z"],"workRunningCount":1}
[debug] [2023-06-28T08:14:06.540Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:14:06.553Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:14:06.553Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:14:06.553Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:14:06.554Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[debug] [2023-06-28T08:14:17.372Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 10818.382271ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 10818.382271ms"}}
[debug] [2023-06-28T08:14:17.373Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: IDLE"}}
[debug] [2023-06-28T08:14:17.373Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:14:17.373Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:14:17.373Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:15:29.104Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:15:30.106Z] Validating nodejs source
[debug] [2023-06-28T08:15:31.799Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:15:31.800Z] Building nodejs source
[debug] [2023-06-28T08:15:31.800Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:15:31.804Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:15:31.805Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:15:32.037Z] Serving at port 8802

[debug] [2023-06-28T08:15:32.411Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:15:32.412Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:15:32.488Z] Setting up firebase config

[debug] [2023-06-28T08:15:32.489Z] connector initialized

[debug] [2023-06-28T08:15:32.489Z] here in the api

[debug] [2023-06-28T08:15:32.526Z] Initializing file generator

[debug] [2023-06-28T08:15:32.533Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:15:32.538Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:15:32.550Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:15:32.550Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: FINISHING"}}
[debug] [2023-06-28T08:15:32.562Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: exited"}}
[debug] [2023-06-28T08:15:32.562Z] [worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-35ba32ee-9e54-46b9-af5a-ec42e241c158]: FINISHED"}}
[debug] [2023-06-28T08:15:32.918Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:15:33.919Z] Validating nodejs source
[debug] [2023-06-28T08:15:34.768Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:15:34.768Z] Building nodejs source
[debug] [2023-06-28T08:15:34.769Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:15:34.770Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:15:34.772Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:15:35.175Z] Serving at port 8467

[debug] [2023-06-28T08:15:35.586Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:15:35.586Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:15:35.661Z] Setting up firebase config

[debug] [2023-06-28T08:15:35.662Z] connector initialized

[debug] [2023-06-28T08:15:35.663Z] here in the api

[debug] [2023-06-28T08:15:35.701Z] Initializing file generator

[debug] [2023-06-28T08:15:35.708Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:15:35.714Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:15:44.644Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.647Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.647Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:15:44.647Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:15:45.648Z] Validating nodejs source
[debug] [2023-06-28T08:15:46.490Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:15:46.490Z] Building nodejs source
[debug] [2023-06-28T08:15:46.490Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:15:46.491Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:15:46.493Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:15:46.744Z] Serving at port 8725

[debug] [2023-06-28T08:15:47.105Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:15:47.105Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:15:47.187Z] Setting up firebase config

[debug] [2023-06-28T08:15:47.188Z] connector initialized

[debug] [2023-06-28T08:15:47.190Z] here in the api

[debug] [2023-06-28T08:15:47.225Z] Initializing file generator

[debug] [2023-06-28T08:15:47.232Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:15:47.237Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:15:51.335Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:15:51.335Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:15:51.335Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:15:51.335Z"],"workRunningCount":1}
[debug] [2023-06-28T08:15:51.335Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:15:51.350Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:15:51.350Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:15:51.350Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:15:51.356Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:15:51.357Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:15:52.893Z] [runtime-status] [15218] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:15:52.895Z] [runtime-status] [15218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:15:52.895Z] [runtime-status] [15218] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:15:52.896Z] [runtime-status] [15218] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:15:52.897Z] [runtime-status] [15218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:15:53.118Z] [runtime-status] [15218] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:15:53.118Z] [runtime-status] [15218] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:15:53.119Z] [runtime-status] [15218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:15:53.120Z] [runtime-status] [15218] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:15:53.122Z] [runtime-status] [15218] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:15:53.122Z] [runtime-status] [15218] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:15:53.462Z] [runtime-status] [15218] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:15:53.462Z] [runtime-status] [15218] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_f7f820078484d21a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15218] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_f7f820078484d21a.sock"}}
[debug] [2023-06-28T08:15:53.486Z] [worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: IDLE"}}
[debug] [2023-06-28T08:15:53.486Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:15:53.486Z] [worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:3 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:3","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:3"}}
[info] >      if (parentName && parent.name !== 'root') { {"user":"    if (parentName && parent.name !== 'root') {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     if (parentName && parent.name !== 'root') {"}}
[info] >                        ^ {"user":"                      ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                       ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  ReferenceError: parent is not defined {"user":"ReferenceError: parent is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ReferenceError: parent is not defined"}}
[info] >      at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:3:23) {"user":"    at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:3:23)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Module.addPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js:3:23)"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:206:27) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:206:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:206:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T08:15:58.101Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:15:58.102Z] [worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: exited"}}
[debug] [2023-06-28T08:15:58.102Z] [worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a768f258-381e-44e7-982c-6c4f4a070c1e]: FINISHED"}}
[debug] [2023-06-28T08:16:07.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:16:08.066Z] Validating nodejs source
[debug] [2023-06-28T08:16:08.939Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:16:08.940Z] Building nodejs source
[debug] [2023-06-28T08:16:08.940Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:16:08.941Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:16:08.942Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:16:09.193Z] Serving at port 8208

[debug] [2023-06-28T08:16:09.604Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:16:09.604Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:16:09.678Z] Setting up firebase config

[debug] [2023-06-28T08:16:09.679Z] connector initialized

[debug] [2023-06-28T08:16:09.680Z] here in the api

[debug] [2023-06-28T08:16:09.724Z] Initializing file generator

[debug] [2023-06-28T08:16:09.731Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:16:09.739Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:16:17.753Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.753Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.753Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.753Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.754Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:16:17.755Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:16:18.758Z] Validating nodejs source
[debug] [2023-06-28T08:16:19.501Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:16:19.501Z] Building nodejs source
[debug] [2023-06-28T08:16:19.501Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:16:19.504Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:16:19.506Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:16:19.767Z] Serving at port 8948

[debug] [2023-06-28T08:16:20.121Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:16:20.121Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:16:20.194Z] Setting up firebase config

[debug] [2023-06-28T08:16:20.195Z] connector initialized

[debug] [2023-06-28T08:16:20.196Z] here in the api

[debug] [2023-06-28T08:16:20.231Z] Initializing file generator

[debug] [2023-06-28T08:16:20.238Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:16:20.243Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:16:21.702Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:16:21.702Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:16:21.702Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:16:21.702Z"],"workRunningCount":1}
[debug] [2023-06-28T08:16:21.702Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:16:21.717Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:16:21.717Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:16:21.717Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:16:21.724Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:16:21.724Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:16:23.366Z] [runtime-status] [15241] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:16:23.367Z] [runtime-status] [15241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:16:23.367Z] [runtime-status] [15241] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:16:23.368Z] [runtime-status] [15241] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:16:23.369Z] [runtime-status] [15241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:16:23.581Z] [runtime-status] [15241] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:16:23.581Z] [runtime-status] [15241] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:16:23.582Z] [runtime-status] [15241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:16:23.583Z] [runtime-status] [15241] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:16:23.585Z] [runtime-status] [15241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:16:23.585Z] [runtime-status] [15241] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:16:23.911Z] [runtime-status] [15241] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:16:23.911Z] [runtime-status] [15241] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_569f4035ca78dd2b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15241] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_569f4035ca78dd2b.sock"}}
[debug] [2023-06-28T08:16:23.953Z] [worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: IDLE"}}
[debug] [2023-06-28T08:16:23.953Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:16:23.953Z] [worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T08:16:26.103Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2149.257743ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2149.257743ms"}}
[debug] [2023-06-28T08:16:26.103Z] [worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: IDLE"}}
[debug] [2023-06-28T08:16:26.103Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:16:26.103Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:16:26.103Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:17:22.752Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:17:23.752Z] Validating nodejs source
[debug] [2023-06-28T08:17:24.506Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:17:24.506Z] Building nodejs source
[debug] [2023-06-28T08:17:24.506Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:17:24.507Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:17:24.511Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:17:24.512Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:17:24.762Z] Serving at port 8642

[debug] [2023-06-28T08:17:25.167Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:17:25.167Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:17:25.243Z] Setting up firebase config

[debug] [2023-06-28T08:17:25.244Z] connector initialized

[debug] [2023-06-28T08:17:25.244Z] here in the api

[debug] [2023-06-28T08:17:25.281Z] Initializing file generator

[debug] [2023-06-28T08:17:25.287Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:17:25.292Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:17:25.303Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:17:25.304Z] [worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: FINISHING"}}
[debug] [2023-06-28T08:17:25.314Z] [worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: exited"}}
[debug] [2023-06-28T08:17:25.314Z] [worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-046c43cb-4751-44eb-8f6d-340ff3a7a474]: FINISHED"}}
[debug] [2023-06-28T08:17:25.509Z] Validating nodejs source
[debug] [2023-06-28T08:17:26.323Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:17:26.323Z] Building nodejs source
[debug] [2023-06-28T08:17:26.324Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:17:26.325Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:17:26.327Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:17:26.652Z] Serving at port 8317

[debug] [2023-06-28T08:17:27.006Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:17:27.006Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:17:27.085Z] Setting up firebase config

[debug] [2023-06-28T08:17:27.086Z] connector initialized

[debug] [2023-06-28T08:17:27.086Z] here in the api

[debug] [2023-06-28T08:17:27.123Z] Initializing file generator

[debug] [2023-06-28T08:17:27.129Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:17:27.134Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:17:34.062Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.063Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.064Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.065Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.065Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.065Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.065Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:17:34.065Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:17:35.067Z] Validating nodejs source
[debug] [2023-06-28T08:17:35.926Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:17:35.926Z] Building nodejs source
[debug] [2023-06-28T08:17:35.926Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:17:35.927Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:17:35.928Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:17:36.166Z] Serving at port 8904

[debug] [2023-06-28T08:17:36.518Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:17:36.518Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:17:36.594Z] Setting up firebase config

[debug] [2023-06-28T08:17:36.595Z] connector initialized

[debug] [2023-06-28T08:17:36.595Z] here in the api

[debug] [2023-06-28T08:17:36.630Z] Initializing file generator

[debug] [2023-06-28T08:17:36.638Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:17:36.642Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:17:36.801Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:17:36.801Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:17:36.801Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:17:36.801Z"],"workRunningCount":1}
[debug] [2023-06-28T08:17:36.801Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:17:36.817Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:17:36.817Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:17:36.817Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:17:36.824Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:17:36.824Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:17:38.363Z] [runtime-status] [15290] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:17:38.364Z] [runtime-status] [15290] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:17:38.364Z] [runtime-status] [15290] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:17:38.365Z] [runtime-status] [15290] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:17:38.366Z] [runtime-status] [15290] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:17:38.578Z] [runtime-status] [15290] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:17:38.578Z] [runtime-status] [15290] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:17:38.579Z] [runtime-status] [15290] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:17:38.580Z] [runtime-status] [15290] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:17:38.582Z] [runtime-status] [15290] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:17:38.582Z] [runtime-status] [15290] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:17:38.914Z] [runtime-status] [15290] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:17:38.915Z] [runtime-status] [15290] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_3955b86fcd884b5b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15290] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_3955b86fcd884b5b.sock"}}
[debug] [2023-06-28T08:17:38.951Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: IDLE"}}
[debug] [2023-06-28T08:17:38.952Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:17:38.952Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  chees233 {"user":"chees233","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m chees233"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T08:17:41.633Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2680.574076ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2680.574076ms"}}
[debug] [2023-06-28T08:17:41.633Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: IDLE"}}
[debug] [2023-06-28T08:17:41.633Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:17:41.633Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:17:41.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:52:16.142Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:52:16.142Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:52:16.142Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:52:16.142Z"],"workRunningCount":1}
[debug] [2023-06-28T08:52:16.142Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:52:16.157Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:52:16.157Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:52:16.157Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:52:16.158Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  chees233 {"user":"chees233","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m chees233"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T08:52:27.054Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 10895.877015ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 10895.877015ms"}}
[debug] [2023-06-28T08:52:27.054Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: IDLE"}}
[debug] [2023-06-28T08:52:27.054Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:52:27.054Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:52:27.054Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:53:56.805Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:53:57.807Z] Validating nodejs source
[debug] [2023-06-28T08:53:58.895Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:53:58.896Z] Building nodejs source
[debug] [2023-06-28T08:53:58.896Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:53:58.897Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:53:58.898Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:53:59.190Z] Serving at port 8017

[debug] [2023-06-28T08:53:59.748Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:53:59.748Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:53:59.864Z] Setting up firebase config

[debug] [2023-06-28T08:53:59.865Z] connector initialized

[debug] [2023-06-28T08:53:59.866Z] here in the api

[debug] [2023-06-28T08:53:59.937Z] Initializing file generator

[debug] [2023-06-28T08:53:59.945Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:53:59.949Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:53:59.960Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:53:59.960Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: FINISHING"}}
[debug] [2023-06-28T08:53:59.970Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: exited"}}
[debug] [2023-06-28T08:53:59.971Z] [worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1522c790-cd87-4c61-b6dc-5a7e43723f5b]: FINISHED"}}
[debug] [2023-06-28T08:54:09.868Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:54:10.870Z] Validating nodejs source
[debug] [2023-06-28T08:54:11.651Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:54:11.651Z] Building nodejs source
[debug] [2023-06-28T08:54:11.651Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:54:11.653Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:54:11.654Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:54:11.928Z] Serving at port 8039

[debug] [2023-06-28T08:54:12.290Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:54:12.290Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:54:12.376Z] Setting up firebase config

[debug] [2023-06-28T08:54:12.377Z] connector initialized

[debug] [2023-06-28T08:54:12.378Z] here in the api

[debug] [2023-06-28T08:54:12.412Z] Initializing file generator

[debug] [2023-06-28T08:54:12.419Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:54:12.424Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:54:21.024Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.024Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.024Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.024Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.024Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.024Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.025Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:54:21.026Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:54:22.028Z] Validating nodejs source
[debug] [2023-06-28T08:54:22.975Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:54:22.975Z] Building nodejs source
[debug] [2023-06-28T08:54:22.975Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:54:22.978Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:54:22.979Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:54:23.207Z] Serving at port 8482

[debug] [2023-06-28T08:54:23.567Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:54:23.567Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:54:23.640Z] Setting up firebase config

[debug] [2023-06-28T08:54:23.641Z] connector initialized

[debug] [2023-06-28T08:54:23.641Z] here in the api

[debug] [2023-06-28T08:54:23.677Z] Initializing file generator

[debug] [2023-06-28T08:54:23.683Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:54:23.689Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:54:27.851Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:54:27.851Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:54:27.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:54:27.851Z"],"workRunningCount":1}
[debug] [2023-06-28T08:54:27.852Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:54:27.867Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:54:27.867Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:54:27.867Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:54:27.874Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:54:27.874Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:54:29.437Z] [runtime-status] [15689] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:54:29.438Z] [runtime-status] [15689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:54:29.439Z] [runtime-status] [15689] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:54:29.439Z] [runtime-status] [15689] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:54:29.440Z] [runtime-status] [15689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:54:29.659Z] [runtime-status] [15689] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:54:29.659Z] [runtime-status] [15689] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:54:29.660Z] [runtime-status] [15689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:54:29.661Z] [runtime-status] [15689] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:54:29.663Z] [runtime-status] [15689] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:54:29.663Z] [runtime-status] [15689] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:54:30.007Z] [runtime-status] [15689] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:54:30.008Z] [runtime-status] [15689] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_d121035d17cb6635.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15689] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_d121035d17cb6635.sock"}}
[debug] [2023-06-28T08:54:30.103Z] [worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: IDLE"}}
[debug] [2023-06-28T08:54:30.103Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:54:30.104Z] [worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T08:54:32.644Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2541.143072ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2541.143072ms"}}
[debug] [2023-06-28T08:54:32.645Z] [worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: IDLE"}}
[debug] [2023-06-28T08:54:32.645Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:54:32.645Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:54:32.645Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:55:22.602Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:55:23.603Z] Validating nodejs source
[debug] [2023-06-28T08:55:24.435Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:55:24.435Z] Building nodejs source
[debug] [2023-06-28T08:55:24.435Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:55:24.436Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:55:24.438Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:55:24.723Z] Serving at port 8395

[debug] [2023-06-28T08:55:25.114Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:55:25.114Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:55:25.198Z] Setting up firebase config

[debug] [2023-06-28T08:55:25.198Z] connector initialized

[debug] [2023-06-28T08:55:25.199Z] here in the api

[debug] [2023-06-28T08:55:25.240Z] Initializing file generator

[debug] [2023-06-28T08:55:25.247Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:55:25.252Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:55:25.265Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:55:25.265Z] [worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: FINISHING"}}
[debug] [2023-06-28T08:55:25.278Z] [worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: exited"}}
[debug] [2023-06-28T08:55:25.278Z] [worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4703f422-9a96-479b-a6e2-ffd1bc4d8030]: FINISHED"}}
[debug] [2023-06-28T08:55:27.813Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:55:28.815Z] Validating nodejs source
[debug] [2023-06-28T08:55:29.663Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:55:29.663Z] Building nodejs source
[debug] [2023-06-28T08:55:29.664Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:55:29.665Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:55:29.666Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:55:29.971Z] Serving at port 8707

[debug] [2023-06-28T08:55:30.356Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:55:30.357Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:55:30.435Z] Setting up firebase config

[debug] [2023-06-28T08:55:30.435Z] connector initialized

[debug] [2023-06-28T08:55:30.436Z] here in the api

[debug] [2023-06-28T08:55:30.471Z] Initializing file generator

[debug] [2023-06-28T08:55:30.478Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:55:30.482Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:55:42.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.236Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.237Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:55:42.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:55:43.240Z] Validating nodejs source
[debug] [2023-06-28T08:55:44.235Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:55:44.235Z] Building nodejs source
[debug] [2023-06-28T08:55:44.235Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:55:44.236Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:55:44.237Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:55:44.538Z] Serving at port 8551

[debug] [2023-06-28T08:55:45.053Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:55:45.053Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:55:45.174Z] Setting up firebase config

[debug] [2023-06-28T08:55:45.174Z] connector initialized

[debug] [2023-06-28T08:55:45.175Z] here in the api

[debug] [2023-06-28T08:55:45.242Z] Initializing file generator

[debug] [2023-06-28T08:55:45.248Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:55:45.254Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:55:47.908Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:55:47.908Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:55:47.909Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:55:47.908Z"],"workRunningCount":1}
[debug] [2023-06-28T08:55:47.909Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:55:47.924Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:55:47.924Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:55:47.924Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:55:47.931Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:55:47.931Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:55:49.622Z] [runtime-status] [15731] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:55:49.623Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:55:49.623Z] [runtime-status] [15731] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:55:49.624Z] [runtime-status] [15731] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:55:49.625Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:55:49.846Z] [runtime-status] [15731] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:55:49.847Z] [runtime-status] [15731] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:55:49.848Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:55:49.849Z] [runtime-status] [15731] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:55:49.851Z] [runtime-status] [15731] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:55:49.851Z] [runtime-status] [15731] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:55:50.210Z] [runtime-status] [15731] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:55:50.210Z] [runtime-status] [15731] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_690ba8085c0fe586.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15731] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_690ba8085c0fe586.sock"}}
[debug] [2023-06-28T08:55:50.260Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE"}}
[debug] [2023-06-28T08:55:50.261Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:55:50.261Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T08:55:52.696Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2435.72729ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2435.72729ms"}}
[debug] [2023-06-28T08:55:52.697Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE"}}
[debug] [2023-06-28T08:55:52.697Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:55:52.697Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:55:52.697Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:56:21.157Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:56:21.157Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:56:21.157Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:56:21.157Z"],"workRunningCount":1}
[debug] [2023-06-28T08:56:21.157Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:56:21.171Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:56:21.171Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:56:21.171Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:56:21.171Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T08:56:22.041Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 869.594705ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 869.594705ms"}}
[debug] [2023-06-28T08:56:22.041Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE"}}
[debug] [2023-06-28T08:56:22.041Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:56:22.041Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:56:22.041Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:56:31.623Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:56:31.623Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:56:31.623Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:56:31.623Z"],"workRunningCount":1}
[debug] [2023-06-28T08:56:31.624Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:56:31.637Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:56:31.637Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:56:31.637Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:56:31.637Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T08:56:34.393Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2756.070977ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2756.070977ms"}}
[debug] [2023-06-28T08:56:34.393Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: IDLE"}}
[debug] [2023-06-28T08:56:34.393Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:56:34.393Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:56:34.393Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:58:05.870Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T08:58:06.872Z] Validating nodejs source
[debug] [2023-06-28T08:58:07.877Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:58:07.877Z] Building nodejs source
[debug] [2023-06-28T08:58:07.877Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:58:07.878Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:58:07.879Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:58:08.193Z] Serving at port 8912

[debug] [2023-06-28T08:58:08.603Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:58:08.603Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:58:08.675Z] Setting up firebase config

[debug] [2023-06-28T08:58:08.676Z] connector initialized

[debug] [2023-06-28T08:58:08.677Z] here in the api

[debug] [2023-06-28T08:58:08.711Z] Initializing file generator

[debug] [2023-06-28T08:58:08.718Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:58:08.722Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:58:08.734Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T08:58:08.734Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: FINISHING"}}
[debug] [2023-06-28T08:58:08.747Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: exited"}}
[debug] [2023-06-28T08:58:08.747Z] [worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-0ca99693-3381-4b27-a2ca-5d13dc41931b]: FINISHED"}}
[debug] [2023-06-28T08:58:14.727Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.727Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.727Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.727Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.728Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T08:58:14.729Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T08:58:15.730Z] Validating nodejs source
[debug] [2023-06-28T08:58:16.508Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T08:58:16.509Z] Building nodejs source
[debug] [2023-06-28T08:58:16.509Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T08:58:16.510Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T08:58:16.511Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T08:58:16.744Z] Serving at port 8352

[debug] [2023-06-28T08:58:17.094Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T08:58:17.095Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T08:58:17.165Z] Setting up firebase config

[debug] [2023-06-28T08:58:17.166Z] connector initialized

[debug] [2023-06-28T08:58:17.166Z] here in the api

[debug] [2023-06-28T08:58:17.200Z] Initializing file generator

[debug] [2023-06-28T08:58:17.207Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T08:58:17.211Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T08:58:33.561Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:58:33.561Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:58:33.561Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:58:33.561Z"],"workRunningCount":1}
[debug] [2023-06-28T08:58:33.561Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:58:33.575Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:58:33.575Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:58:33.576Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T08:58:33.582Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T08:58:33.582Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T08:58:35.138Z] [runtime-status] [15809] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:58:35.140Z] [runtime-status] [15809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:58:35.140Z] [runtime-status] [15809] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T08:58:35.141Z] [runtime-status] [15809] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T08:58:35.142Z] [runtime-status] [15809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:58:35.364Z] [runtime-status] [15809] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T08:58:35.364Z] [runtime-status] [15809] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T08:58:35.365Z] [runtime-status] [15809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:58:35.367Z] [runtime-status] [15809] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T08:58:35.369Z] [runtime-status] [15809] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T08:58:35.369Z] [runtime-status] [15809] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T08:58:35.865Z] [runtime-status] [15809] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T08:58:35.865Z] [runtime-status] [15809] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_e507824e9202d1ec.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15809] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_e507824e9202d1ec.sock"}}
[debug] [2023-06-28T08:58:35.907Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE"}}
[debug] [2023-06-28T08:58:35.908Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:58:35.908Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T08:58:39.128Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3220.172013ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3220.172013ms"}}
[debug] [2023-06-28T08:58:39.128Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE"}}
[debug] [2023-06-28T08:58:39.128Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:58:39.128Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:58:39.128Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:58:56.123Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:58:56.123Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T08:58:56.124Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T08:58:56.123Z"],"workRunningCount":1}
[debug] [2023-06-28T08:58:56.124Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T08:58:56.136Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T08:58:56.137Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T08:58:56.137Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T08:58:56.137Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  undefined {"user":"undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m undefined"}}
[debug] [2023-06-28T08:58:57.033Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 895.724072ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 895.724072ms"}}
[debug] [2023-06-28T08:58:57.033Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE"}}
[debug] [2023-06-28T08:58:57.033Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T08:58:57.033Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T08:58:57.033Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:00:21.810Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:00:21.810Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:00:21.810Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:00:21.810Z"],"workRunningCount":1}
[debug] [2023-06-28T09:00:21.810Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:00:21.823Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:00:21.823Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:00:21.823Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:00:21.823Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:00:23.530Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1707.332023ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1707.332023ms"}}
[debug] [2023-06-28T09:00:23.531Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: IDLE"}}
[debug] [2023-06-28T09:00:23.531Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:00:23.531Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:00:23.531Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:00:53.511Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:00:54.513Z] Validating nodejs source
[debug] [2023-06-28T09:00:56.369Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:00:56.369Z] Building nodejs source
[debug] [2023-06-28T09:00:56.369Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:00:56.370Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:00:56.371Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:00:56.602Z] Serving at port 8482

[debug] [2023-06-28T09:00:56.970Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:00:56.970Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:00:57.044Z] Setting up firebase config

[debug] [2023-06-28T09:00:57.044Z] connector initialized

[debug] [2023-06-28T09:00:57.045Z] here in the api

[debug] [2023-06-28T09:00:57.080Z] Initializing file generator

[debug] [2023-06-28T09:00:57.087Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:00:57.091Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:00:57.103Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:00:57.103Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: FINISHING"}}
[debug] [2023-06-28T09:00:57.114Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: exited"}}
[debug] [2023-06-28T09:00:57.114Z] [worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83c92f9d-7669-4286-8d03-eb6bc917e72b]: FINISHED"}}
[debug] [2023-06-28T09:01:00.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:01:01.451Z] Validating nodejs source
[debug] [2023-06-28T09:01:02.456Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:01:02.457Z] Building nodejs source
[debug] [2023-06-28T09:01:02.457Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:01:02.458Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:01:02.459Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:01:02.723Z] Serving at port 8192

[debug] [2023-06-28T09:01:03.145Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:01:03.146Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:01:03.234Z] Setting up firebase config

[debug] [2023-06-28T09:01:03.235Z] connector initialized

[debug] [2023-06-28T09:01:03.237Z] here in the api

[debug] [2023-06-28T09:01:03.280Z] Initializing file generator

[debug] [2023-06-28T09:01:03.290Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:01:03.295Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:01:06.783Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/projecthandler/PageTree.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:01:07.783Z] Validating nodejs source
[debug] [2023-06-28T09:01:08.819Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:01:08.820Z] Building nodejs source
[debug] [2023-06-28T09:01:08.820Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:01:08.824Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:01:08.830Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:01:09.272Z] Serving at port 8629

[debug] [2023-06-28T09:01:09.652Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:01:09.737Z] Setting up firebase config

[debug] [2023-06-28T09:01:09.738Z] connector initialized

[debug] [2023-06-28T09:01:09.739Z] here in the api

[debug] [2023-06-28T09:01:09.773Z] Initializing file generator

[debug] [2023-06-28T09:01:09.780Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:01:09.785Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:01:10.761Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.761Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.761Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.761Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.762Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:01:10.763Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:01:11.765Z] Validating nodejs source
[debug] [2023-06-28T09:01:12.551Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:01:12.552Z] Building nodejs source
[debug] [2023-06-28T09:01:12.552Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:01:12.555Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:01:12.556Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:01:12.791Z] Serving at port 8229

[debug] [2023-06-28T09:01:13.149Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:01:13.149Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:01:13.221Z] Setting up firebase config

[debug] [2023-06-28T09:01:13.221Z] connector initialized

[debug] [2023-06-28T09:01:13.222Z] here in the api

[debug] [2023-06-28T09:01:13.255Z] Initializing file generator

[debug] [2023-06-28T09:01:13.262Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:01:13.267Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:01:13.939Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:01:13.939Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:01:13.939Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:01:13.939Z"],"workRunningCount":1}
[debug] [2023-06-28T09:01:13.939Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:01:13.954Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:01:13.954Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:01:13.954Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:01:13.961Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:01:13.961Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:01:15.512Z] [runtime-status] [15873] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:01:15.513Z] [runtime-status] [15873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:01:15.513Z] [runtime-status] [15873] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:01:15.514Z] [runtime-status] [15873] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:01:15.515Z] [runtime-status] [15873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:01:15.727Z] [runtime-status] [15873] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:01:15.728Z] [runtime-status] [15873] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:01:15.729Z] [runtime-status] [15873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:01:15.730Z] [runtime-status] [15873] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:01:15.732Z] [runtime-status] [15873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:01:15.732Z] [runtime-status] [15873] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:01:16.061Z] [runtime-status] [15873] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:01:16.061Z] [runtime-status] [15873] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9f7128bfd595e0c3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15873] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9f7128bfd595e0c3.sock"}}
[debug] [2023-06-28T09:01:16.093Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE"}}
[debug] [2023-06-28T09:01:16.093Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:01:16.093Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:01:19.265Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3171.992838ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3171.992838ms"}}
[debug] [2023-06-28T09:01:19.265Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE"}}
[debug] [2023-06-28T09:01:19.265Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:01:19.265Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:01:19.265Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:01:37.212Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:01:37.212Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:01:37.212Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:01:37.212Z"],"workRunningCount":1}
[debug] [2023-06-28T09:01:37.212Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:01:37.225Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:01:37.226Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:01:37.226Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:01:37.226Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:01:38.069Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 843.006942ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 843.006942ms"}}
[debug] [2023-06-28T09:01:38.069Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE"}}
[debug] [2023-06-28T09:01:38.069Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:01:38.069Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:01:38.069Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:02:12.325Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:02:12.325Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:02:12.325Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:02:12.325Z"],"workRunningCount":1}
[debug] [2023-06-28T09:02:12.325Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:02:12.338Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:02:12.338Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:02:12.338Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:02:12.338Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:02:14.047Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1708.554509ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1708.554509ms"}}
[debug] [2023-06-28T09:02:14.047Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: IDLE"}}
[debug] [2023-06-28T09:02:14.047Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:02:14.047Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:02:14.047Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:02:50.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:02:51.335Z] Validating nodejs source
[debug] [2023-06-28T09:02:52.129Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:02:52.130Z] Building nodejs source
[debug] [2023-06-28T09:02:52.130Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:02:52.131Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:02:52.132Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:02:52.389Z] Serving at port 8994

[debug] [2023-06-28T09:02:52.767Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:02:52.767Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:02:52.841Z] Setting up firebase config

[debug] [2023-06-28T09:02:52.842Z] connector initialized

[debug] [2023-06-28T09:02:52.842Z] here in the api

[debug] [2023-06-28T09:02:52.876Z] Initializing file generator

[debug] [2023-06-28T09:02:52.883Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:02:52.888Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:02:52.899Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:02:52.899Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: FINISHING"}}
[debug] [2023-06-28T09:02:52.910Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: exited"}}
[debug] [2023-06-28T09:02:52.910Z] [worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-19035fc8-21a5-4140-b649-37dce989a03d]: FINISHED"}}
[debug] [2023-06-28T09:03:02.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.645Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.646Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.746Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.746Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.746Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.746Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.746Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:03:02.747Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:03:03.749Z] Validating nodejs source
[debug] [2023-06-28T09:03:04.704Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:03:04.704Z] Building nodejs source
[debug] [2023-06-28T09:03:04.704Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:03:04.705Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:03:04.706Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:03:05.006Z] Serving at port 8057

[debug] [2023-06-28T09:03:05.505Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:03:05.505Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:03:05.622Z] Setting up firebase config

[debug] [2023-06-28T09:03:05.623Z] connector initialized

[debug] [2023-06-28T09:03:05.624Z] here in the api

[debug] [2023-06-28T09:03:05.693Z] Initializing file generator

[debug] [2023-06-28T09:03:05.700Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:03:05.704Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:03:06.515Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:03:06.515Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:03:06.515Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:03:06.515Z"],"workRunningCount":1}
[debug] [2023-06-28T09:03:06.515Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:03:06.530Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:03:06.530Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:03:06.530Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:03:06.537Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:03:06.537Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:03:08.266Z] [runtime-status] [15916] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:03:08.267Z] [runtime-status] [15916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:03:08.267Z] [runtime-status] [15916] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:03:08.268Z] [runtime-status] [15916] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:03:08.269Z] [runtime-status] [15916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:03:08.485Z] [runtime-status] [15916] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:03:08.485Z] [runtime-status] [15916] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:03:08.486Z] [runtime-status] [15916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:03:08.487Z] [runtime-status] [15916] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:03:08.489Z] [runtime-status] [15916] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:03:08.489Z] [runtime-status] [15916] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:03:08.821Z] [runtime-status] [15916] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:03:08.821Z] [runtime-status] [15916] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_af0720d570585970.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [15916] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_af0720d570585970.sock"}}
[debug] [2023-06-28T09:03:08.867Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE"}}
[debug] [2023-06-28T09:03:08.867Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:03:08.868Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:03:11.912Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3044.775041ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3044.775041ms"}}
[debug] [2023-06-28T09:03:11.913Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE"}}
[debug] [2023-06-28T09:03:11.913Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:03:11.913Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:03:11.913Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:03:34.708Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:03:34.708Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:03:34.708Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:03:34.708Z"],"workRunningCount":1}
[debug] [2023-06-28T09:03:34.708Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:03:34.722Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:03:34.722Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:03:34.722Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:03:34.722Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:03:35.501Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 778.956788ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 778.956788ms"}}
[debug] [2023-06-28T09:03:35.501Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE"}}
[debug] [2023-06-28T09:03:35.501Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:03:35.502Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:03:35.502Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:04:28.782Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:04:28.781Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:04:28.782Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:04:28.781Z"],"workRunningCount":1}
[debug] [2023-06-28T09:04:28.782Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:04:28.795Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:04:28.796Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:04:28.796Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:04:28.796Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:04:30.875Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2079.269501ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2079.269501ms"}}
[debug] [2023-06-28T09:04:30.875Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE"}}
[debug] [2023-06-28T09:04:30.875Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:04:30.876Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:04:30.876Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:05:14.666Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:05:14.666Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:05:14.666Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:05:14.666Z"],"workRunningCount":1}
[debug] [2023-06-28T09:05:14.666Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:05:14.679Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:05:14.679Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:05:14.680Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:05:14.680Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:05:15.425Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 745.20072ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 745.20072ms"}}
[debug] [2023-06-28T09:05:15.425Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: IDLE"}}
[debug] [2023-06-28T09:05:15.425Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:05:15.426Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:05:15.426Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:06:11.074Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:06:12.075Z] Validating nodejs source
[debug] [2023-06-28T09:06:13.861Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:06:13.862Z] Building nodejs source
[debug] [2023-06-28T09:06:13.862Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:06:13.864Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:06:13.865Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:06:14.180Z] Serving at port 8111

[debug] [2023-06-28T09:06:14.573Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:06:14.573Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:06:14.674Z] Setting up firebase config

[debug] [2023-06-28T09:06:14.676Z] connector initialized

[debug] [2023-06-28T09:06:14.676Z] here in the api

[debug] [2023-06-28T09:06:14.717Z] Initializing file generator

[debug] [2023-06-28T09:06:14.725Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:06:14.730Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:06:14.743Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:06:14.743Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: FINISHING"}}
[debug] [2023-06-28T09:06:14.755Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: exited"}}
[debug] [2023-06-28T09:06:14.755Z] [worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d20f483-f73b-4847-818a-8eb2344d3d3b]: FINISHED"}}
[debug] [2023-06-28T09:06:44.954Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:06:45.956Z] Validating nodejs source
[debug] [2023-06-28T09:06:46.834Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:06:46.834Z] Building nodejs source
[debug] [2023-06-28T09:06:46.834Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:06:46.835Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:06:46.836Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:06:47.186Z] Serving at port 8348

[debug] [2023-06-28T09:06:47.550Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:06:47.655Z] Setting up firebase config

[debug] [2023-06-28T09:06:47.656Z] connector initialized

[debug] [2023-06-28T09:06:47.656Z] here in the api

[debug] [2023-06-28T09:06:47.692Z] Initializing file generator

[debug] [2023-06-28T09:06:47.700Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:06:47.707Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:07:00.099Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:07:01.100Z] Validating nodejs source
[debug] [2023-06-28T09:07:01.894Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:07:01.894Z] Building nodejs source
[debug] [2023-06-28T09:07:01.894Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:07:01.895Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:07:01.896Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:07:02.142Z] Serving at port 8719

[debug] [2023-06-28T09:07:02.514Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:07:02.514Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:07:02.585Z] Setting up firebase config

[debug] [2023-06-28T09:07:02.586Z] connector initialized

[debug] [2023-06-28T09:07:02.587Z] here in the api

[debug] [2023-06-28T09:07:02.621Z] Initializing file generator

[debug] [2023-06-28T09:07:02.627Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:07:02.636Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:07:10.365Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:07:11.367Z] Validating nodejs source
[debug] [2023-06-28T09:07:12.193Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:07:12.193Z] Building nodejs source
[debug] [2023-06-28T09:07:12.193Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:07:12.196Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:07:12.197Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:07:12.429Z] Serving at port 8347

[debug] [2023-06-28T09:07:12.782Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:07:12.782Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:07:12.853Z] Setting up firebase config

[debug] [2023-06-28T09:07:12.854Z] connector initialized

[debug] [2023-06-28T09:07:12.855Z] here in the api

[debug] [2023-06-28T09:07:12.888Z] Initializing file generator

[debug] [2023-06-28T09:07:12.895Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:07:12.904Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:07:23.600Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:07:23.600Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:07:23.600Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:07:23.600Z"],"workRunningCount":1}
[debug] [2023-06-28T09:07:23.600Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:07:23.613Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:07:23.614Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:07:23.614Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:07:23.621Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:07:23.621Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:07:24.631Z] [runtime-status] [16049] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:07:24.632Z] [runtime-status] [16049] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:07:24.633Z] [runtime-status] [16049] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:07:24.633Z] [runtime-status] [16049] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:07:24.634Z] [runtime-status] [16049] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:07:24.856Z] [runtime-status] [16049] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:07:24.856Z] [runtime-status] [16049] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:07:24.857Z] [runtime-status] [16049] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:07:24.858Z] [runtime-status] [16049] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:07:24.860Z] [runtime-status] [16049] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:07:24.860Z] [runtime-status] [16049] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:07:25.185Z] [runtime-status] [16049] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:07:25.185Z] [runtime-status] [16049] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fbe7dce9c6b056b2.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16049] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fbe7dce9c6b056b2.sock"}}
[debug] [2023-06-28T09:07:25.243Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: IDLE"}}
[debug] [2023-06-28T09:07:25.244Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:07:25.244Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:07:28.143Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2898.8808010000002ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2898.8808010000002ms"}}
[debug] [2023-06-28T09:07:28.143Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: IDLE"}}
[debug] [2023-06-28T09:07:28.143Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:07:28.143Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:07:28.143Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:07:42.982Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:07:42.982Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:07:42.982Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:07:42.982Z"],"workRunningCount":1}
[debug] [2023-06-28T09:07:42.982Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:07:42.997Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:07:42.997Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:07:42.997Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:07:42.997Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:07:43.757Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 759.949823ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 759.949823ms"}}
[debug] [2023-06-28T09:07:43.757Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: IDLE"}}
[debug] [2023-06-28T09:07:43.757Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:07:43.758Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:07:43.758Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:08:34.505Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:08:35.505Z] Validating nodejs source
[debug] [2023-06-28T09:08:36.493Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:08:36.494Z] Building nodejs source
[debug] [2023-06-28T09:08:36.494Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:08:36.495Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:08:36.496Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:08:36.759Z] Serving at port 8818

[debug] [2023-06-28T09:08:37.134Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:08:37.134Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:08:37.222Z] Setting up firebase config

[debug] [2023-06-28T09:08:37.223Z] connector initialized

[debug] [2023-06-28T09:08:37.224Z] here in the api

[debug] [2023-06-28T09:08:37.278Z] Initializing file generator

[debug] [2023-06-28T09:08:37.285Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:08:37.305Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:08:37.338Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:08:37.338Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: FINISHING"}}
[debug] [2023-06-28T09:08:37.351Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: exited"}}
[debug] [2023-06-28T09:08:37.351Z] [worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f73a459a-9b5f-4685-860d-b4ebef02eda6]: FINISHED"}}
[debug] [2023-06-28T09:08:44.300Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.301Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.302Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.303Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:08:44.303Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:08:45.303Z] Validating nodejs source
[debug] [2023-06-28T09:08:46.128Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:08:46.128Z] Building nodejs source
[debug] [2023-06-28T09:08:46.129Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:08:46.129Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:08:46.130Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:08:46.393Z] Serving at port 8606

[debug] [2023-06-28T09:08:46.744Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:08:46.745Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:08:46.816Z] Setting up firebase config

[debug] [2023-06-28T09:08:46.817Z] connector initialized

[debug] [2023-06-28T09:08:46.818Z] here in the api

[debug] [2023-06-28T09:08:46.851Z] Initializing file generator

[debug] [2023-06-28T09:08:46.857Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:08:46.862Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:08:48.204Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:08:48.204Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:08:48.204Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:08:48.204Z"],"workRunningCount":1}
[debug] [2023-06-28T09:08:48.204Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:08:48.218Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:08:48.219Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:08:48.219Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:08:48.225Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:08:48.226Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:08:49.864Z] [runtime-status] [16082] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:08:49.865Z] [runtime-status] [16082] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:08:49.865Z] [runtime-status] [16082] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:08:49.866Z] [runtime-status] [16082] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:08:49.867Z] [runtime-status] [16082] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:08:50.079Z] [runtime-status] [16082] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:08:50.079Z] [runtime-status] [16082] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:08:50.080Z] [runtime-status] [16082] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:08:50.081Z] [runtime-status] [16082] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:08:50.083Z] [runtime-status] [16082] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:08:50.083Z] [runtime-status] [16082] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:08:50.415Z] [runtime-status] [16082] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:08:50.415Z] [runtime-status] [16082] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0671e5d9c66f60c1.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16082] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0671e5d9c66f60c1.sock"}}
[debug] [2023-06-28T09:08:50.448Z] [worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: IDLE"}}
[debug] [2023-06-28T09:08:50.448Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:08:50.449Z] [worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132"}}
[info] >          parentId = (pages.getNodeByName(projectFiles, parentId)).id; {"user":"        parentId = (pages.getNodeByName(projectFiles, parentId)).id;","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         parentId = (pages.getNodeByName(projectFiles, parentId)).id;"}}
[info] >                                                                   ^ {"user":"                                                                 ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                                  ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'id') {"user":"TypeError: Cannot read properties of undefined (reading 'id')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'id')"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:66) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:132:66)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T09:08:51.965Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:08:51.965Z] [worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: exited"}}
[debug] [2023-06-28T09:08:51.965Z] [worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-019b3c11-88ce-4b0e-b54b-f54e94bb1335]: FINISHED"}}
[debug] [2023-06-28T09:09:40.586Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:09:41.587Z] Validating nodejs source
[debug] [2023-06-28T09:09:42.554Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:09:42.554Z] Building nodejs source
[debug] [2023-06-28T09:09:42.554Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:09:42.556Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:09:42.557Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:09:42.880Z] Serving at port 8708

[debug] [2023-06-28T09:09:43.273Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:09:43.273Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:09:43.360Z] Setting up firebase config

[debug] [2023-06-28T09:09:43.361Z] connector initialized

[debug] [2023-06-28T09:09:43.361Z] here in the api

[debug] [2023-06-28T09:09:43.403Z] Initializing file generator

[debug] [2023-06-28T09:09:43.411Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:09:43.417Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:09:52.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:09:52.384Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:09:53.388Z] Validating nodejs source
[debug] [2023-06-28T09:09:54.305Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:09:54.305Z] Building nodejs source
[debug] [2023-06-28T09:09:54.305Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:09:54.306Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:09:54.307Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:09:54.621Z] Serving at port 8484

[debug] [2023-06-28T09:09:54.977Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:09:54.977Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:09:55.048Z] Setting up firebase config

[debug] [2023-06-28T09:09:55.049Z] connector initialized

[debug] [2023-06-28T09:09:55.050Z] here in the api

[debug] [2023-06-28T09:09:55.083Z] Initializing file generator

[debug] [2023-06-28T09:09:55.090Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:09:55.094Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:09:56.215Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:09:56.215Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:09:56.215Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:09:56.215Z"],"workRunningCount":1}
[debug] [2023-06-28T09:09:56.215Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:09:56.229Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:09:56.230Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:09:56.230Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:09:56.237Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:09:56.237Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:09:57.763Z] [runtime-status] [16118] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:09:57.766Z] [runtime-status] [16118] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:09:57.766Z] [runtime-status] [16118] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:09:57.767Z] [runtime-status] [16118] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:09:57.768Z] [runtime-status] [16118] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:09:57.994Z] [runtime-status] [16118] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:09:57.994Z] [runtime-status] [16118] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:09:57.995Z] [runtime-status] [16118] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:09:57.996Z] [runtime-status] [16118] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:09:57.998Z] [runtime-status] [16118] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:09:57.998Z] [runtime-status] [16118] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:09:58.324Z] [runtime-status] [16118] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:09:58.325Z] [runtime-status] [16118] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9611fbea1fef18b0.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16118] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9611fbea1fef18b0.sock"}}
[debug] [2023-06-28T09:09:58.369Z] [worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: IDLE"}}
[debug] [2023-06-28T09:09:58.370Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:09:58.370Z] [worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  res:  { name: 'root', id: 'root-node', type: 'folder', children: [] } {"user":"res:  { name: 'root', id: 'root-node', type: 'folder', children: [] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m res:  { name: 'root', id: 'root-node', type: 'folder', children: [] }"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:133 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:133","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:133"}}
[info] >          parentId = (pages.getNodeByName(projectFiles, parentId)).id; {"user":"        parentId = (pages.getNodeByName(projectFiles, parentId)).id;","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         parentId = (pages.getNodeByName(projectFiles, parentId)).id;"}}
[info] >                                                                   ^ {"user":"                                                                 ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                                  ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'id') {"user":"TypeError: Cannot read properties of undefined (reading 'id')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'id')"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:133:66) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:133:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:133:66)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T09:09:59.902Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:09:59.902Z] [worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: exited"}}
[debug] [2023-06-28T09:09:59.902Z] [worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-cca07407-32e3-4788-bac7-1540c9790b23]: FINISHED"}}
[debug] [2023-06-28T09:11:30.292Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:11:31.294Z] Validating nodejs source
[debug] [2023-06-28T09:11:33.198Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:11:33.199Z] Building nodejs source
[debug] [2023-06-28T09:11:33.199Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:11:33.201Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:11:33.202Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:11:33.487Z] Serving at port 8389

[debug] [2023-06-28T09:11:34.043Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:11:34.043Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:11:34.119Z] Setting up firebase config

[debug] [2023-06-28T09:11:34.120Z] connector initialized

[debug] [2023-06-28T09:11:34.121Z] here in the api

[debug] [2023-06-28T09:11:34.157Z] Initializing file generator

[debug] [2023-06-28T09:11:34.164Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:11:34.169Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:11:40.140Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.140Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.140Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.140Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.141Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:11:40.142Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:11:41.143Z] Validating nodejs source
[debug] [2023-06-28T09:11:42.035Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:11:42.035Z] Building nodejs source
[debug] [2023-06-28T09:11:42.035Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:11:42.036Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:11:42.037Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:11:42.292Z] Serving at port 8583

[debug] [2023-06-28T09:11:42.652Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:11:42.653Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:11:42.727Z] Setting up firebase config

[debug] [2023-06-28T09:11:42.728Z] connector initialized

[debug] [2023-06-28T09:11:42.728Z] here in the api

[debug] [2023-06-28T09:11:42.764Z] Initializing file generator

[debug] [2023-06-28T09:11:42.771Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:11:42.776Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:11:45.945Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:11:45.945Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:11:45.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:11:45.945Z"],"workRunningCount":1}
[debug] [2023-06-28T09:11:45.945Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:11:45.960Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:11:45.961Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:11:45.961Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:11:45.968Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:11:45.968Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:11:47.545Z] [runtime-status] [16155] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:11:47.547Z] [runtime-status] [16155] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:11:47.547Z] [runtime-status] [16155] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:11:47.548Z] [runtime-status] [16155] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:11:47.549Z] [runtime-status] [16155] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:11:47.766Z] [runtime-status] [16155] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:11:47.766Z] [runtime-status] [16155] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:11:47.767Z] [runtime-status] [16155] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:11:47.768Z] [runtime-status] [16155] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:11:47.770Z] [runtime-status] [16155] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:11:47.770Z] [runtime-status] [16155] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:11:48.108Z] [runtime-status] [16155] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:11:48.108Z] [runtime-status] [16155] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ccddbce6b7ea781f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16155] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ccddbce6b7ea781f.sock"}}
[debug] [2023-06-28T09:11:48.196Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE"}}
[debug] [2023-06-28T09:11:48.196Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:11:48.197Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:11:51.207Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3010.862951ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3010.862951ms"}}
[debug] [2023-06-28T09:11:51.208Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE"}}
[debug] [2023-06-28T09:11:51.208Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:11:51.208Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:11:51.208Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:12:11.942Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:12:11.942Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:12:11.942Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:12:11.942Z"],"workRunningCount":1}
[debug] [2023-06-28T09:12:11.942Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:12:11.957Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:12:11.957Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:12:11.957Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:12:11.958Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  bonk {"user":"bonk","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m bonk"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:12:12.737Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 779.616297ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 779.616297ms"}}
[debug] [2023-06-28T09:12:12.738Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE"}}
[debug] [2023-06-28T09:12:12.738Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:12:12.738Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:12:12.738Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:13:39.028Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:13:39.028Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:13:39.028Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:13:39.028Z"],"workRunningCount":1}
[debug] [2023-06-28T09:13:39.028Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:13:39.041Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:13:39.042Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:13:39.042Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:13:39.042Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:13:41.073Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2031.008082ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2031.008082ms"}}
[debug] [2023-06-28T09:13:41.073Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE"}}
[debug] [2023-06-28T09:13:41.073Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:13:41.073Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:13:41.073Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:15:31.252Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:15:31.251Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:15:31.252Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:15:31.251Z"],"workRunningCount":1}
[debug] [2023-06-28T09:15:31.252Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:15:31.266Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:15:31.266Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:15:31.267Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:15:31.268Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  bonk {"user":"bonk","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m bonk"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:15:32.414Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1145.8338039999999ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1145.8338039999999ms"}}
[debug] [2023-06-28T09:15:32.414Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: IDLE"}}
[debug] [2023-06-28T09:15:32.414Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:15:32.414Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:15:32.414Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:16:15.876Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:16:16.877Z] Validating nodejs source
[debug] [2023-06-28T09:16:17.857Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:16:17.857Z] Building nodejs source
[debug] [2023-06-28T09:16:17.858Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:16:17.859Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:16:17.860Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:16:18.121Z] Serving at port 8161

[debug] [2023-06-28T09:16:18.570Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:16:18.570Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:16:18.655Z] Setting up firebase config

[debug] [2023-06-28T09:16:18.656Z] connector initialized

[debug] [2023-06-28T09:16:18.656Z] here in the api

[debug] [2023-06-28T09:16:18.708Z] Initializing file generator

[debug] [2023-06-28T09:16:18.716Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:16:18.722Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:16:18.754Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:16:18.754Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: FINISHING"}}
[debug] [2023-06-28T09:16:18.781Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: exited"}}
[debug] [2023-06-28T09:16:18.781Z] [worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e62351e7-4d8a-4a30-964b-efc3b6938391]: FINISHED"}}
[debug] [2023-06-28T09:16:24.836Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.837Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.938Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.938Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.938Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.939Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.939Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.939Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.939Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.939Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.939Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.940Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.940Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.940Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.940Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.940Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.940Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.941Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.941Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.941Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.941Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:16:24.941Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:16:25.943Z] Validating nodejs source
[debug] [2023-06-28T09:16:26.803Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:16:26.803Z] Building nodejs source
[debug] [2023-06-28T09:16:26.803Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:16:26.804Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:16:26.805Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:16:27.050Z] Serving at port 8645

[debug] [2023-06-28T09:16:27.408Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:16:27.408Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:16:27.521Z] Setting up firebase config

[debug] [2023-06-28T09:16:27.529Z] connector initialized

[debug] [2023-06-28T09:16:27.530Z] here in the api

[debug] [2023-06-28T09:16:27.570Z] Initializing file generator

[debug] [2023-06-28T09:16:27.576Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:16:27.581Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:16:30.849Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:16:30.849Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:16:30.849Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:16:30.849Z"],"workRunningCount":1}
[debug] [2023-06-28T09:16:30.849Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:16:30.863Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:16:30.863Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:16:30.863Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:16:30.870Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:16:30.870Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:16:32.398Z] [runtime-status] [16229] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:16:32.399Z] [runtime-status] [16229] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:16:32.399Z] [runtime-status] [16229] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:16:32.400Z] [runtime-status] [16229] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:16:32.401Z] [runtime-status] [16229] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:16:32.615Z] [runtime-status] [16229] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:16:32.615Z] [runtime-status] [16229] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:16:32.616Z] [runtime-status] [16229] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:16:32.618Z] [runtime-status] [16229] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:16:32.619Z] [runtime-status] [16229] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:16:32.619Z] [runtime-status] [16229] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:16:32.948Z] [runtime-status] [16229] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:16:32.948Z] [runtime-status] [16229] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_89095c362076da18.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16229] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_89095c362076da18.sock"}}
[debug] [2023-06-28T09:16:32.996Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: IDLE"}}
[debug] [2023-06-28T09:16:32.997Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:16:32.997Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:16:35.874Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2877.9997519999997ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2877.9997519999997ms"}}
[debug] [2023-06-28T09:16:35.875Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: IDLE"}}
[debug] [2023-06-28T09:16:35.875Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:16:35.875Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:16:35.875Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:16:45.951Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:16:45.951Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:16:45.951Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:16:45.951Z"],"workRunningCount":1}
[debug] [2023-06-28T09:16:45.951Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:16:45.966Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:16:45.966Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:16:45.966Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:16:45.967Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {"user":"There was no root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  bonk {"user":"bonk","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m bonk"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:16:46.721Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 754.641235ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 754.641235ms"}}
[debug] [2023-06-28T09:16:46.722Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: IDLE"}}
[debug] [2023-06-28T09:16:46.722Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:16:46.722Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:16:46.722Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:17:10.959Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:17:11.960Z] Validating nodejs source
[debug] [2023-06-28T09:17:13.910Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:17:13.910Z] Building nodejs source
[debug] [2023-06-28T09:17:13.910Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:17:13.911Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:17:13.913Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:17:14.168Z] Serving at port 8629

[debug] [2023-06-28T09:17:14.549Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:17:14.549Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:17:14.721Z] Setting up firebase config

[debug] [2023-06-28T09:17:14.723Z] connector initialized

[debug] [2023-06-28T09:17:14.727Z] here in the api

[debug] [2023-06-28T09:17:14.783Z] Initializing file generator

[debug] [2023-06-28T09:17:14.791Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:17:14.799Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:17:14.818Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:17:14.819Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: FINISHING"}}
[debug] [2023-06-28T09:17:14.840Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: exited"}}
[debug] [2023-06-28T09:17:14.840Z] [worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a893590f-b983-4656-aa97-b4a41e7a8a4a]: FINISHED"}}
[debug] [2023-06-28T09:17:20.039Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:17:20.139Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:17:21.141Z] Validating nodejs source
[debug] [2023-06-28T09:17:21.957Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:17:21.957Z] Building nodejs source
[debug] [2023-06-28T09:17:21.957Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:17:21.958Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:17:21.959Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:17:22.250Z] Serving at port 8296

[debug] [2023-06-28T09:17:22.716Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:17:22.716Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:17:22.833Z] Setting up firebase config

[debug] [2023-06-28T09:17:22.834Z] connector initialized

[debug] [2023-06-28T09:17:22.835Z] here in the api

[debug] [2023-06-28T09:17:22.869Z] Initializing file generator

[debug] [2023-06-28T09:17:22.876Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:17:22.880Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:17:30.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:17:30.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:17:31.487Z] Validating nodejs source
[debug] [2023-06-28T09:17:32.329Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:17:32.330Z] Building nodejs source
[debug] [2023-06-28T09:17:32.330Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:17:32.332Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:17:32.334Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:17:32.571Z] Serving at port 8865

[debug] [2023-06-28T09:17:32.918Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:17:32.918Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:17:32.990Z] Setting up firebase config

[debug] [2023-06-28T09:17:32.990Z] connector initialized

[debug] [2023-06-28T09:17:32.991Z] here in the api

[debug] [2023-06-28T09:17:33.025Z] Initializing file generator

[debug] [2023-06-28T09:17:33.031Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:17:33.036Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:17:40.249Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:17:40.249Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:17:40.249Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:17:40.249Z"],"workRunningCount":1}
[debug] [2023-06-28T09:17:40.249Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:17:40.264Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:17:40.264Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:17:40.264Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:17:40.271Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:17:40.271Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:17:41.901Z] [runtime-status] [16269] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:17:41.902Z] [runtime-status] [16269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:17:41.902Z] [runtime-status] [16269] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:17:41.903Z] [runtime-status] [16269] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:17:41.904Z] [runtime-status] [16269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:17:42.117Z] [runtime-status] [16269] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:17:42.117Z] [runtime-status] [16269] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:17:42.118Z] [runtime-status] [16269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:17:42.119Z] [runtime-status] [16269] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:17:42.121Z] [runtime-status] [16269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:17:42.121Z] [runtime-status] [16269] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:17:42.448Z] [runtime-status] [16269] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:17:42.448Z] [runtime-status] [16269] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fa06b03e4dbcdfd5.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16269] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fa06b03e4dbcdfd5.sock"}}
[debug] [2023-06-28T09:17:42.497Z] [worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: IDLE"}}
[debug] [2023-06-28T09:17:42.498Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:17:42.498Z] [worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109"}}
[info] >      if (!data[0].id) { {"user":"    if (!data[0].id) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     if (!data[0].id) {"}}
[info] >                   ^ {"user":"                 ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                  ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'id') {"user":"TypeError: Cannot read properties of undefined (reading 'id')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'id')"}}
[info] >      at getProjectJson (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109:18) {"user":"    at getProjectJson (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109:18)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getProjectJson (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109:18)"}}
[info] >      at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:26) {"user":"    at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:26)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:26)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T09:17:43.487Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:17:43.487Z] [worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: exited"}}
[debug] [2023-06-28T09:17:43.487Z] [worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2b489184-c530-4209-ad79-ba750a4f65e6]: FINISHED"}}
[debug] [2023-06-28T09:17:53.183Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:17:54.185Z] Validating nodejs source
[debug] [2023-06-28T09:17:54.925Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:17:54.926Z] Building nodejs source
[debug] [2023-06-28T09:17:54.926Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:17:54.927Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:17:54.928Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:17:55.214Z] Serving at port 8847

[debug] [2023-06-28T09:17:55.588Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:17:55.589Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:17:55.662Z] Setting up firebase config

[debug] [2023-06-28T09:17:55.663Z] connector initialized

[debug] [2023-06-28T09:17:55.664Z] here in the api

[debug] [2023-06-28T09:17:55.699Z] Initializing file generator

[debug] [2023-06-28T09:17:55.705Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:17:55.710Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:18:04.732Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.732Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.732Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.733Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:18:04.734Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:18:05.736Z] Validating nodejs source
[debug] [2023-06-28T09:18:06.511Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:18:06.511Z] Building nodejs source
[debug] [2023-06-28T09:18:06.511Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:18:06.512Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:18:06.514Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:18:06.753Z] Serving at port 8277

[debug] [2023-06-28T09:18:07.106Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:18:07.106Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:18:07.176Z] Setting up firebase config

[debug] [2023-06-28T09:18:07.177Z] connector initialized

[debug] [2023-06-28T09:18:07.178Z] here in the api

[debug] [2023-06-28T09:18:07.211Z] Initializing file generator

[debug] [2023-06-28T09:18:07.218Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:18:07.222Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:18:29.492Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:18:29.492Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:18:29.492Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:18:29.492Z"],"workRunningCount":1}
[debug] [2023-06-28T09:18:29.492Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:18:29.507Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:18:29.507Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:18:29.507Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:18:29.514Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:18:29.514Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:18:31.150Z] [runtime-status] [16296] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:18:31.151Z] [runtime-status] [16296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:18:31.152Z] [runtime-status] [16296] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:18:31.152Z] [runtime-status] [16296] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:18:31.153Z] [runtime-status] [16296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:18:31.368Z] [runtime-status] [16296] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:18:31.369Z] [runtime-status] [16296] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:18:31.370Z] [runtime-status] [16296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:18:31.371Z] [runtime-status] [16296] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:18:31.373Z] [runtime-status] [16296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:18:31.373Z] [runtime-status] [16296] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:18:31.705Z] [runtime-status] [16296] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:18:31.705Z] [runtime-status] [16296] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_672f9ec766e76ff3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16296] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_672f9ec766e76ff3.sock"}}
[debug] [2023-06-28T09:18:31.740Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: IDLE"}}
[debug] [2023-06-28T09:18:31.740Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:18:31.741Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root { {"user":"There was no root {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root {"}}
[info] >    project: [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"  project: [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   project: [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:18:35.460Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 3719.757988ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 3719.757988ms"}}
[debug] [2023-06-28T09:18:35.460Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: IDLE"}}
[debug] [2023-06-28T09:18:35.461Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:18:35.461Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:18:35.461Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:19:29.275Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:19:29.275Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:19:29.275Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:19:29.275Z"],"workRunningCount":1}
[debug] [2023-06-28T09:19:29.275Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:19:29.295Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:19:29.296Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:19:29.296Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:19:29.296Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root { {"user":"There was no root {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root {"}}
[info] >    project: [ {"user":"  project: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   project: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        children: [Array], {"user":"      children: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       children: [Array],"}}
[info] >        id: 'root-node', {"user":"      id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       id: 'root-node',"}}
[info] >        type: 'folder', {"user":"      type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       type: 'folder',"}}
[info] >        name: 'root' {"user":"      name: 'root'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       name: 'root'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:19:31.485Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2189.395872ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2189.395872ms"}}
[debug] [2023-06-28T09:19:31.486Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: IDLE"}}
[debug] [2023-06-28T09:19:31.486Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:19:31.486Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:19:31.486Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:20:59.531Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:21:00.531Z] Validating nodejs source
[debug] [2023-06-28T09:21:01.552Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:21:01.552Z] Building nodejs source
[debug] [2023-06-28T09:21:01.553Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:21:01.554Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:21:01.555Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:21:01.784Z] Serving at port 8847

[debug] [2023-06-28T09:21:02.188Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:21:02.188Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:21:02.263Z] Setting up firebase config

[debug] [2023-06-28T09:21:02.264Z] connector initialized

[debug] [2023-06-28T09:21:02.265Z] here in the api

[debug] [2023-06-28T09:21:02.300Z] Initializing file generator

[debug] [2023-06-28T09:21:02.307Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:21:02.311Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:21:02.324Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:21:02.324Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: FINISHING"}}
[debug] [2023-06-28T09:21:02.335Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: exited"}}
[debug] [2023-06-28T09:21:02.335Z] [worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1ed7e927-6499-46c3-9098-2d9b83baaa38]: FINISHED"}}
[debug] [2023-06-28T09:21:14.295Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:21:15.297Z] Validating nodejs source
[debug] [2023-06-28T09:21:16.146Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:21:16.146Z] Building nodejs source
[debug] [2023-06-28T09:21:16.146Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:21:16.147Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:21:16.148Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:21:16.386Z] Serving at port 8396

[debug] [2023-06-28T09:21:16.732Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:21:16.732Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:21:16.803Z] Setting up firebase config

[debug] [2023-06-28T09:21:16.804Z] connector initialized

[debug] [2023-06-28T09:21:16.804Z] here in the api

[debug] [2023-06-28T09:21:16.838Z] Initializing file generator

[debug] [2023-06-28T09:21:16.845Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:21:16.849Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.620Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.621Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.622Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.622Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.622Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.622Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:21:28.622Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:21:29.513Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:21:29.513Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:21:29.513Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:21:29.513Z"],"workRunningCount":1}
[debug] [2023-06-28T09:21:29.513Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:21:29.528Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:21:29.528Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:21:29.528Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:21:29.536Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:21:29.536Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:21:29.623Z] Validating nodejs source
[debug] [2023-06-28T09:21:30.482Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:21:30.482Z] Building nodejs source
[debug] [2023-06-28T09:21:30.483Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:21:30.484Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:21:30.486Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:21:30.898Z] [runtime-status] [16338] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:21:30.899Z] [runtime-status] [16338] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:21:30.899Z] [runtime-status] [16338] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:21:30.900Z] [runtime-status] [16338] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:21:30.900Z] Serving at port 8499

[debug] [2023-06-28T09:21:30.901Z] [runtime-status] [16338] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:21:31.137Z] [runtime-status] [16338] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:21:31.138Z] [runtime-status] [16338] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:21:31.139Z] [runtime-status] [16338] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:21:31.141Z] [runtime-status] [16338] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:21:31.144Z] [runtime-status] [16338] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:21:31.144Z] [runtime-status] [16338] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-06-28T09:21:31.285Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:21:31.285Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[debug] [2023-06-28T09:21:31.364Z] Setting up firebase config

[debug] [2023-06-28T09:21:31.364Z] connector initialized

[debug] [2023-06-28T09:21:31.365Z] here in the api

[debug] [2023-06-28T09:21:31.403Z] Initializing file generator

[debug] [2023-06-28T09:21:31.412Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[debug] [2023-06-28T09:21:31.421Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:21:31.481Z] [runtime-status] [16338] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:21:31.481Z] [runtime-status] [16338] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fffdd37fd2289daa.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16338] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_fffdd37fd2289daa.sock"}}
[debug] [2023-06-28T09:21:31.508Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE"}}
[debug] [2023-06-28T09:21:31.508Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:21:31.509Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root { {"user":"There was no root {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root {"}}
[info] >    project: [ {"user":"  project: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   project: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        children: [Array], {"user":"      children: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       children: [Array],"}}
[info] >        id: 'root-node', {"user":"      id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       id: 'root-node',"}}
[info] >        name: 'root', {"user":"      name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       name: 'root',"}}
[info] >        type: 'folder' {"user":"      type: 'folder'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       type: 'folder'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:21:34.447Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2938.276385ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2938.276385ms"}}
[debug] [2023-06-28T09:21:34.448Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE"}}
[debug] [2023-06-28T09:21:34.448Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:21:34.448Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:21:34.448Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:21:45.303Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:21:45.303Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:21:45.303Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:21:45.303Z"],"workRunningCount":1}
[debug] [2023-06-28T09:21:45.303Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:21:45.318Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:21:45.318Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:21:45.318Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:21:45.318Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root { {"user":"There was no root {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root {"}}
[info] >    project: [ {"user":"  project: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   project: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        children: [Array], {"user":"      children: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       children: [Array],"}}
[info] >        type: 'folder', {"user":"      type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       type: 'folder',"}}
[info] >        id: 'root-node', {"user":"      id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       id: 'root-node',"}}
[info] >        name: 'root' {"user":"      name: 'root'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       name: 'root'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:22:12.149Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 26832.06689ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 26832.06689ms"}}
[debug] [2023-06-28T09:22:12.149Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE"}}
[debug] [2023-06-28T09:22:12.149Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:22:12.149Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:22:12.149Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:22:19.251Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:22:19.251Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:22:19.252Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:22:19.251Z"],"workRunningCount":1}
[debug] [2023-06-28T09:22:19.252Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:22:19.265Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:22:19.265Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:22:19.265Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:22:19.266Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root { {"user":"There was no root {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root {"}}
[info] >    project: [ {"user":"  project: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   project: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        type: 'folder', {"user":"      type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       type: 'folder',"}}
[info] >        name: 'root', {"user":"      name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       name: 'root',"}}
[info] >        id: 'root-node', {"user":"      id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       id: 'root-node',"}}
[info] >        children: [Array] {"user":"      children: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       children: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:22:20.852Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1586.244679ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1586.244679ms"}}
[debug] [2023-06-28T09:22:20.852Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: IDLE"}}
[debug] [2023-06-28T09:22:20.852Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:22:20.852Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:22:20.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:23:41.376Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:23:42.378Z] Validating nodejs source
[debug] [2023-06-28T09:23:43.220Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:23:43.221Z] Building nodejs source
[debug] [2023-06-28T09:23:43.221Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:23:43.222Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:23:43.223Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:23:43.449Z] Serving at port 8470

[debug] [2023-06-28T09:23:43.826Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:23:43.906Z] Setting up firebase config

[debug] [2023-06-28T09:23:43.907Z] connector initialized

[debug] [2023-06-28T09:23:43.908Z] here in the api

[debug] [2023-06-28T09:23:43.943Z] Initializing file generator

[debug] [2023-06-28T09:23:43.950Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:23:43.955Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:23:43.967Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:23:43.967Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: FINISHING"}}
[debug] [2023-06-28T09:23:43.977Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: exited"}}
[debug] [2023-06-28T09:23:43.977Z] [worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83fc0473-514e-40fb-84ee-a557bc6865f5]: FINISHED"}}
[debug] [2023-06-28T09:23:45.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:23:46.681Z] Validating nodejs source
[debug] [2023-06-28T09:23:47.544Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:23:47.545Z] Building nodejs source
[debug] [2023-06-28T09:23:47.545Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:23:47.546Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:23:47.548Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:23:47.955Z] Serving at port 8273

[debug] [2023-06-28T09:23:48.348Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:23:48.348Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:23:48.425Z] Setting up firebase config

[debug] [2023-06-28T09:23:48.426Z] connector initialized

[debug] [2023-06-28T09:23:48.427Z] here in the api

[debug] [2023-06-28T09:23:48.469Z] Initializing file generator

[debug] [2023-06-28T09:23:48.479Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:23:48.485Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:23:55.340Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.340Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.340Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.340Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.341Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.341Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.341Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.341Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.341Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.342Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.342Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.342Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.342Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.342Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.342Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:23:55.343Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:23:56.346Z] Validating nodejs source
[debug] [2023-06-28T09:23:57.087Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:23:57.088Z] Building nodejs source
[debug] [2023-06-28T09:23:57.088Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:23:57.089Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:23:57.090Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:23:57.327Z] Serving at port 8257

[debug] [2023-06-28T09:23:57.673Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:23:57.673Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:23:57.744Z] Setting up firebase config

[debug] [2023-06-28T09:23:57.745Z] connector initialized

[debug] [2023-06-28T09:23:57.746Z] here in the api

[debug] [2023-06-28T09:23:57.779Z] Initializing file generator

[debug] [2023-06-28T09:23:57.786Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:23:57.791Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:23:59.423Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:23:59.423Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:23:59.423Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:23:59.423Z"],"workRunningCount":1}
[debug] [2023-06-28T09:23:59.423Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:23:59.438Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:23:59.438Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:23:59.438Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:23:59.446Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:23:59.446Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:24:01.038Z] [runtime-status] [16384] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:24:01.039Z] [runtime-status] [16384] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:24:01.039Z] [runtime-status] [16384] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:24:01.040Z] [runtime-status] [16384] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:24:01.041Z] [runtime-status] [16384] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:24:01.256Z] [runtime-status] [16384] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:24:01.256Z] [runtime-status] [16384] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:24:01.260Z] [runtime-status] [16384] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:24:01.261Z] [runtime-status] [16384] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:24:01.263Z] [runtime-status] [16384] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:24:01.264Z] [runtime-status] [16384] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:24:01.592Z] [runtime-status] [16384] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:24:01.592Z] [runtime-status] [16384] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_e7f8957be2c8c066.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16384] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_e7f8957be2c8c066.sock"}}
[debug] [2023-06-28T09:24:01.671Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: IDLE"}}
[debug] [2023-06-28T09:24:01.672Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:24:01.672Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      id: 'root-node' {"user":"    id: 'root-node'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[debug] [2023-06-28T09:24:02.578Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 905.792342ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 905.792342ms"}}
[debug] [2023-06-28T09:24:02.578Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: IDLE"}}
[debug] [2023-06-28T09:24:02.578Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:24:02.578Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:24:02.578Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:24:31.449Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:24:31.449Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:24:31.449Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:24:31.449Z"],"workRunningCount":1}
[debug] [2023-06-28T09:24:31.449Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:24:31.465Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:24:31.465Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:24:31.466Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:24:31.466Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      id: 'root-node', {"user":"    id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node',"}}
[info] >      name: 'root' {"user":"    name: 'root'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  8df32c2a-265e-40e8-9e61-7bc42551839f {"user":"8df32c2a-265e-40e8-9e61-7bc42551839f","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 8df32c2a-265e-40e8-9e61-7bc42551839f"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:24:32.041Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 574.958209ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 574.958209ms"}}
[debug] [2023-06-28T09:24:32.041Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: IDLE"}}
[debug] [2023-06-28T09:24:32.041Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:24:32.041Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:24:32.041Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:25:25.613Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:25:26.614Z] Validating nodejs source
[debug] [2023-06-28T09:25:27.483Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:25:27.486Z] Building nodejs source
[debug] [2023-06-28T09:25:27.486Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:25:27.487Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:25:27.488Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:25:27.822Z] Serving at port 8944

[debug] [2023-06-28T09:25:28.376Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:25:28.376Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:25:28.515Z] Setting up firebase config

[debug] [2023-06-28T09:25:28.516Z] connector initialized

[debug] [2023-06-28T09:25:28.517Z] here in the api

[debug] [2023-06-28T09:25:28.554Z] Initializing file generator

[debug] [2023-06-28T09:25:28.561Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:25:28.565Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:25:28.577Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:25:28.577Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: FINISHING"}}
[debug] [2023-06-28T09:25:28.587Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: exited"}}
[debug] [2023-06-28T09:25:28.587Z] [worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3b278276-4e55-4db0-b267-03187b8cdc7f]: FINISHED"}}
[debug] [2023-06-28T09:25:35.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.665Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:25:35.666Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:25:36.667Z] Validating nodejs source
[debug] [2023-06-28T09:25:37.472Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:25:37.473Z] Building nodejs source
[debug] [2023-06-28T09:25:37.473Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:25:37.474Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:25:37.475Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:25:37.726Z] Serving at port 8523

[debug] [2023-06-28T09:25:38.083Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:25:38.083Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:25:38.156Z] Setting up firebase config

[debug] [2023-06-28T09:25:38.156Z] connector initialized

[debug] [2023-06-28T09:25:38.157Z] here in the api

[debug] [2023-06-28T09:25:38.191Z] Initializing file generator

[debug] [2023-06-28T09:25:38.198Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:25:38.202Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:25:40.885Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:25:40.885Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:25:40.885Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:25:40.885Z"],"workRunningCount":1}
[debug] [2023-06-28T09:25:40.885Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:25:40.899Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:25:40.899Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:25:40.899Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:25:40.906Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:25:40.906Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:25:41.923Z] [runtime-status] [16419] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:25:41.924Z] [runtime-status] [16419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:25:41.925Z] [runtime-status] [16419] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:25:41.925Z] [runtime-status] [16419] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:25:41.926Z] [runtime-status] [16419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:25:42.151Z] [runtime-status] [16419] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:25:42.151Z] [runtime-status] [16419] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:25:42.152Z] [runtime-status] [16419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:25:42.153Z] [runtime-status] [16419] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:25:42.155Z] [runtime-status] [16419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:25:42.155Z] [runtime-status] [16419] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:25:42.480Z] [runtime-status] [16419] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:25:42.481Z] [runtime-status] [16419] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_990174443d8d85ac.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16419] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_990174443d8d85ac.sock"}}
[debug] [2023-06-28T09:25:42.529Z] [worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: IDLE"}}
[debug] [2023-06-28T09:25:42.529Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:25:42.530Z] [worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      id: 'root-node', {"user":"    id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node',"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      name: 'root' {"user":"    name: 'root'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  8df32c2a-265e-40e8-9e61-7bc42551839f {"user":"8df32c2a-265e-40e8-9e61-7bc42551839f","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 8df32c2a-265e-40e8-9e61-7bc42551839f"}}
[info] >  parentType: undefined {"user":"parentType: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: undefined"}}
[debug] [2023-06-28T09:25:43.439Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 909.652328ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 909.652328ms"}}
[debug] [2023-06-28T09:25:43.439Z] [worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: IDLE"}}
[debug] [2023-06-28T09:25:43.440Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:25:43.440Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:25:43.440Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:26:41.746Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:26:42.748Z] Validating nodejs source
[debug] [2023-06-28T09:26:43.547Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:26:43.548Z] Building nodejs source
[debug] [2023-06-28T09:26:43.548Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:26:43.549Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:26:43.550Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:26:43.791Z] Serving at port 8152

[debug] [2023-06-28T09:26:44.137Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:26:44.137Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:26:44.208Z] Setting up firebase config

[debug] [2023-06-28T09:26:44.209Z] connector initialized

[debug] [2023-06-28T09:26:44.210Z] here in the api

[debug] [2023-06-28T09:26:44.243Z] Initializing file generator

[debug] [2023-06-28T09:26:44.250Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:26:44.254Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:26:44.265Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T09:26:44.265Z] [worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: FINISHING"}}
[debug] [2023-06-28T09:26:44.275Z] [worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: exited"}}
[debug] [2023-06-28T09:26:44.275Z] [worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a24f3301-4626-4caa-91d2-5c2e83314b1a]: FINISHED"}}
[debug] [2023-06-28T09:26:51.815Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:26:52.818Z] Validating nodejs source
[debug] [2023-06-28T09:26:53.589Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:26:53.590Z] Building nodejs source
[debug] [2023-06-28T09:26:53.590Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:26:53.592Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:26:53.593Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:26:53.829Z] Serving at port 8019

[debug] [2023-06-28T09:26:54.179Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:26:54.180Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:26:54.253Z] Setting up firebase config

[debug] [2023-06-28T09:26:54.253Z] connector initialized

[debug] [2023-06-28T09:26:54.254Z] here in the api

[debug] [2023-06-28T09:26:54.288Z] Initializing file generator

[debug] [2023-06-28T09:26:54.295Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:26:54.301Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:27:06.002Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.002Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.002Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.003Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.004Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.004Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.004Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.004Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.004Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.004Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:27:06.031Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:27:07.034Z] Validating nodejs source
[debug] [2023-06-28T09:27:08.072Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:27:08.073Z] Building nodejs source
[debug] [2023-06-28T09:27:08.073Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:27:08.074Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:27:08.075Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:27:08.082Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:27:08.082Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:27:08.082Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:27:08.082Z"],"workRunningCount":1}
[debug] [2023-06-28T09:27:08.082Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:27:08.097Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:27:08.097Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:27:08.097Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:27:08.103Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:27:08.103Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:27:08.391Z] Serving at port 8726

[debug] [2023-06-28T09:27:08.880Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:27:08.880Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:27:08.987Z] Setting up firebase config

[debug] [2023-06-28T09:27:08.988Z] connector initialized

[debug] [2023-06-28T09:27:08.989Z] here in the api

[debug] [2023-06-28T09:27:09.047Z] Initializing file generator

[debug] [2023-06-28T09:27:09.054Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:27:09.058Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:27:09.614Z] [runtime-status] [16463] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:27:09.615Z] [runtime-status] [16463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:27:09.616Z] [runtime-status] [16463] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:27:09.616Z] [runtime-status] [16463] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:27:09.617Z] [runtime-status] [16463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:27:09.829Z] [runtime-status] [16463] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:27:09.829Z] [runtime-status] [16463] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:27:09.830Z] [runtime-status] [16463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:27:09.831Z] [runtime-status] [16463] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:27:09.833Z] [runtime-status] [16463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:27:09.833Z] [runtime-status] [16463] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:27:10.162Z] [runtime-status] [16463] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:27:10.162Z] [runtime-status] [16463] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b36d1710b81983b7.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16463] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b36d1710b81983b7.sock"}}
[debug] [2023-06-28T09:27:10.228Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE"}}
[debug] [2023-06-28T09:27:10.228Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:27:10.229Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      id: 'root-node' {"user":"    id: 'root-node'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  8df32c2a-265e-40e8-9e61-7bc42551839f {"user":"8df32c2a-265e-40e8-9e61-7bc42551839f","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m 8df32c2a-265e-40e8-9e61-7bc42551839f"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: folder {"user":"parentType: folder","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: folder"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: asas {"user":"preantName: asas","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: asas"}}
[info] >  asas {"user":"asas","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m asas"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'asdasdadadadsd', {"user":"  name: 'asdasdadadadsd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'asdasdadadadsd',"}}
[info] >    id: 'aa0f39ee-834a-43dd-a022-5c62487de347', {"user":"  id: 'aa0f39ee-834a-43dd-a022-5c62487de347',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'aa0f39ee-834a-43dd-a022-5c62487de347',"}}
[info] >    type: 'folder' {"user":"  type: 'folder'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'folder'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T09:27:12.888Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2659.813403ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2659.813403ms"}}
[debug] [2023-06-28T09:27:12.889Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE"}}
[debug] [2023-06-28T09:27:12.889Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:27:12.889Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:27:12.889Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:27:27.049Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:27:27.049Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:27:27.050Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:27:27.049Z"],"workRunningCount":1}
[debug] [2023-06-28T09:27:27.050Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:27:27.065Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:27:27.065Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:27:27.065Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:27:27.065Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      id: 'root-node', {"user":"    id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node',"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      type: 'folder' {"user":"    type: 'folder'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  aa0f39ee-834a-43dd-a022-5c62487de347 {"user":"aa0f39ee-834a-43dd-a022-5c62487de347","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m aa0f39ee-834a-43dd-a022-5c62487de347"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: folder {"user":"parentType: folder","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: folder"}}
[info] >  preantName: asdasdadadadsd {"user":"preantName: asdasdadadadsd","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: asdasdadadadsd"}}
[info] >  asdasdadadadsd {"user":"asdasdadadadsd","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m asdasdadadadsd"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'itworks', {"user":"  name: 'itworks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'itworks',"}}
[info] >    id: 'c0c9c057-a8bc-4a22-be05-8ac3fb77a679', {"user":"  id: 'c0c9c057-a8bc-4a22-be05-8ac3fb77a679',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'c0c9c057-a8bc-4a22-be05-8ac3fb77a679',"}}
[info] >    type: 'folder' {"user":"  type: 'folder'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'folder'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T09:27:29.032Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1966.837051ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1966.837051ms"}}
[debug] [2023-06-28T09:27:29.033Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE"}}
[debug] [2023-06-28T09:27:29.033Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:27:29.033Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:27:29.033Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:27:45.073Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:27:45.073Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:27:45.074Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:27:45.073Z"],"workRunningCount":1}
[debug] [2023-06-28T09:27:45.074Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:27:45.087Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:27:45.087Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:27:45.087Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:27:45.088Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      id: 'root-node', {"user":"    id: 'root-node',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node',"}}
[info] >      name: 'root' {"user":"    name: 'root'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  aa0f39ee-834a-43dd-a022-5c62487de347 {"user":"aa0f39ee-834a-43dd-a022-5c62487de347","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m aa0f39ee-834a-43dd-a022-5c62487de347"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: folder {"user":"parentType: folder","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: folder"}}
[info] >  preantName: asdasdadadadsd {"user":"preantName: asdasdadadadsd","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: asdasdadadadsd"}}
[info] >  asdasdadadadsd {"user":"asdasdadadadsd","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m asdasdadadadsd"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'itworks1', {"user":"  name: 'itworks1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'itworks1',"}}
[info] >    id: 'c688be1b-5d5f-41c5-865f-f75cb850eca7', {"user":"  id: 'c688be1b-5d5f-41c5-865f-f75cb850eca7',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'c688be1b-5d5f-41c5-865f-f75cb850eca7',"}}
[info] >    type: 'folder' {"user":"  type: 'folder'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'folder'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T09:27:47.180Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2092.239027ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2092.239027ms"}}
[debug] [2023-06-28T09:27:47.180Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: IDLE"}}
[debug] [2023-06-28T09:27:47.180Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:27:47.180Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:27:47.180Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:29:09.990Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:29:09.990Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:29:09.990Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:29:09.990Z"],"workRunningCount":1}
[debug] [2023-06-28T09:29:09.990Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:29:10.003Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:29:10.003Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:29:10.003Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:29:10.003Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109"}}
[info] >      if (!data.project[0]) { {"user":"    if (!data.project[0]) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     if (!data.project[0]) {"}}
[info] >                       ^ {"user":"                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading '0') {"user":"TypeError: Cannot read properties of undefined (reading '0')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading '0')"}}
[info] >      at getProjectJson (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109:22) {"user":"    at getProjectJson (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109:22)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at getProjectJson (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:109:22)"}}
[info] >      at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:26) {"user":"    at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:26)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:125:26)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T09:29:10.568Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:29:10.569Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: exited"}}
[debug] [2023-06-28T09:29:10.569Z] [worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4e57c401-f508-47a3-ab46-a58d0e7bcbee]: FINISHED"}}
[debug] [2023-06-28T09:29:40.619Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T09:29:41.620Z] Validating nodejs source
[debug] [2023-06-28T09:29:43.397Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:29:43.397Z] Building nodejs source
[debug] [2023-06-28T09:29:43.397Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:29:43.398Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:29:43.399Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:29:43.646Z] Serving at port 8508

[debug] [2023-06-28T09:29:43.998Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:29:43.998Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:29:44.071Z] Setting up firebase config

[debug] [2023-06-28T09:29:44.072Z] connector initialized

[debug] [2023-06-28T09:29:44.073Z] here in the api

[debug] [2023-06-28T09:29:44.107Z] Initializing file generator

[debug] [2023-06-28T09:29:44.113Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:29:44.118Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:29:52.991Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.991Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.992Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.993Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.995Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.995Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.995Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.995Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.996Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.996Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.996Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.996Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.996Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T09:29:52.996Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T09:29:53.998Z] Validating nodejs source
[debug] [2023-06-28T09:29:54.957Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T09:29:54.957Z] Building nodejs source
[debug] [2023-06-28T09:29:54.957Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T09:29:54.960Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T09:29:54.963Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T09:29:55.321Z] Serving at port 8143

[debug] [2023-06-28T09:29:55.685Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T09:29:55.685Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T09:29:55.760Z] Setting up firebase config

[debug] [2023-06-28T09:29:55.761Z] connector initialized

[debug] [2023-06-28T09:29:55.762Z] here in the api

[debug] [2023-06-28T09:29:55.797Z] Initializing file generator

[debug] [2023-06-28T09:29:55.803Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T09:29:55.813Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T09:29:57.008Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:29:57.008Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:29:57.008Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:29:57.008Z"],"workRunningCount":1}
[debug] [2023-06-28T09:29:57.008Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:29:57.023Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:29:57.023Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:29:57.023Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T09:29:57.041Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T09:29:57.042Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T09:29:58.710Z] [runtime-status] [16524] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:29:58.711Z] [runtime-status] [16524] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:29:58.712Z] [runtime-status] [16524] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T09:29:58.712Z] [runtime-status] [16524] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T09:29:58.713Z] [runtime-status] [16524] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:29:58.927Z] [runtime-status] [16524] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T09:29:58.928Z] [runtime-status] [16524] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T09:29:58.928Z] [runtime-status] [16524] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:29:58.930Z] [runtime-status] [16524] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T09:29:58.931Z] [runtime-status] [16524] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T09:29:58.932Z] [runtime-status] [16524] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T09:29:59.268Z] [runtime-status] [16524] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T09:29:59.269Z] [runtime-status] [16524] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b0dce01994a99888.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [16524] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b0dce01994a99888.sock"}}
[debug] [2023-06-28T09:29:59.368Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE"}}
[debug] [2023-06-28T09:29:59.368Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:29:59.368Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  There was no root {} {"user":"There was no root {}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m There was no root {}"}}
[info] >  projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ] {"user":"projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson [ { name: 'root', id: 'root-node', type: 'folder', children: [] } ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  root-node {"user":"root-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root-node"}}
[info] >  idroot-node {"user":"idroot-node","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m idroot-node"}}
[info] >  adding to root {"user":"adding to root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m adding to root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  preantName: root {"user":"preantName: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: root"}}
[info] >  root {"user":"root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m root"}}
[debug] [2023-06-28T09:30:01.596Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2227.305151ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2227.305151ms"}}
[debug] [2023-06-28T09:30:01.596Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE"}}
[debug] [2023-06-28T09:30:01.596Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:30:01.596Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:30:01.596Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:30:11.273Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:30:11.273Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:30:11.273Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:30:11.273Z"],"workRunningCount":1}
[debug] [2023-06-28T09:30:11.273Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:30:11.286Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:30:11.286Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:30:11.286Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:30:11.287Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      id: 'root-node' {"user":"    id: 'root-node'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  abf39e5b-b031-453e-a645-bb3233afaa5a {"user":"abf39e5b-b031-453e-a645-bb3233afaa5a","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m abf39e5b-b031-453e-a645-bb3233afaa5a"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: folder {"user":"parentType: folder","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: folder"}}
[info] >  preantName: folder1 {"user":"preantName: folder1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: folder1"}}
[info] >  folder1 {"user":"folder1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m folder1"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'file1', {"user":"  name: 'file1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'file1',"}}
[info] >    id: 'eb05fb37-8146-46e4-ba18-4e49e5f4680b', {"user":"  id: 'eb05fb37-8146-46e4-ba18-4e49e5f4680b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'eb05fb37-8146-46e4-ba18-4e49e5f4680b',"}}
[info] >    type: 'file' {"user":"  type: 'file'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'file'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T09:30:15.732Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 4445.671946ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 4445.671946ms"}}
[debug] [2023-06-28T09:30:15.733Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE"}}
[debug] [2023-06-28T09:30:15.733Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:30:15.733Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:30:15.733Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:30:26.946Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:30:26.945Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:30:26.946Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:30:26.945Z"],"workRunningCount":1}
[debug] [2023-06-28T09:30:26.946Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:30:26.959Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:30:26.959Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:30:26.959Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:30:26.960Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      id: 'root-node' {"user":"    id: 'root-node'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  eb05fb37-8146-46e4-ba18-4e49e5f4680b {"user":"eb05fb37-8146-46e4-ba18-4e49e5f4680b","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m eb05fb37-8146-46e4-ba18-4e49e5f4680b"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: file {"user":"parentType: file","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: file"}}
[debug] [2023-06-28T09:30:27.499Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 539.068755ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 539.068755ms"}}
[debug] [2023-06-28T09:30:27.499Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE"}}
[debug] [2023-06-28T09:30:27.499Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:30:27.499Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:30:27.499Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:30:43.855Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:30:43.855Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T09:30:43.855Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T09:30:43.855Z"],"workRunningCount":1}
[debug] [2023-06-28T09:30:43.855Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T09:30:43.868Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T09:30:43.868Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T09:30:43.868Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T09:30:43.868Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  projectJson [ {"user":"projectJson [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m projectJson ["}}
[info] >    { {"user":"  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   {"}}
[info] >      children: [ [Object] ], {"user":"    children: [ [Object] ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     children: [ [Object] ],"}}
[info] >      type: 'folder', {"user":"    type: 'folder',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'folder',"}}
[info] >      name: 'root', {"user":"    name: 'root',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'root',"}}
[info] >      id: 'root-node' {"user":"    id: 'root-node'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     id: 'root-node'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  abf39e5b-b031-453e-a645-bb3233afaa5a {"user":"abf39e5b-b031-453e-a645-bb3233afaa5a","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m abf39e5b-b031-453e-a645-bb3233afaa5a"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  parentType: folder {"user":"parentType: folder","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentType: folder"}}
[info] >  preantName: folder1 {"user":"preantName: folder1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m preantName: folder1"}}
[info] >  folder1 {"user":"folder1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m folder1"}}
[info] >  found node children {"user":"found node children","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m found node children"}}
[info] >  Added page: { {"user":"Added page: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Added page: {"}}
[info] >    name: 'file12', {"user":"  name: 'file12',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   name: 'file12',"}}
[info] >    id: '602b4e80-5f7c-4f69-9267-ec9c31332a63', {"user":"  id: '602b4e80-5f7c-4f69-9267-ec9c31332a63',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: '602b4e80-5f7c-4f69-9267-ec9c31332a63',"}}
[info] >    type: 'folder' {"user":"  type: 'folder'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'folder'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-06-28T09:30:45.710Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1842.082399ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1842.082399ms"}}
[debug] [2023-06-28T09:30:45.711Z] [worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2fe6e9e2-76c1-485d-b885-773e7afba1c7]: IDLE"}}
[debug] [2023-06-28T09:30:45.711Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T09:30:45.711Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T09:30:45.711Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
