[debug] [2023-06-28T03:40:41.303Z] ----------------------------------------------------------------------
[debug] [2023-06-28T03:40:41.305Z] Command:       /Users/maxadam/.nvm/versions/node/v18.0.0/bin/node /usr/local/bin/firebase emulators:start
[debug] [2023-06-28T03:40:41.305Z] CLI Version:   12.4.0
[debug] [2023-06-28T03:40:41.306Z] Platform:      darwin
[debug] [2023-06-28T03:40:41.306Z] Node Version:  v18.0.0
[debug] [2023-06-28T03:40:41.307Z] Time:          Wed Jun 28 2023 13:40:41 GMT+1000 (Australian Eastern Standard Time)
[debug] [2023-06-28T03:40:41.307Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-06-28T03:40:41.491Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-06-28T03:40:41.492Z] > authorizing via signed-in user (max@v3rv.com)
[debug] [2023-06-28T03:40:41.634Z] openjdk version "11.0.17" 2022-10-18
OpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)
OpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)

[debug] [2023-06-28T03:40:41.636Z] Parsed Java major version: 11
[info] i  emulators: Starting emulators: functions, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, storage"}}
[debug] [2023-06-28T03:40:43.103Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.103Z] [storage] Storage Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.104Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-06-28T03:40:43.134Z] [hub] writing locator at /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/hub-v3rv-notionaios.json
[debug] [2023-06-28T03:40:43.872Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.872Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-06-28T03:40:43.872Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"storage":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, hosting, pubsub {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, hosting, pubsub\u001b[22m"}}
[debug] [2023-06-28T03:40:43.890Z] defaultcredentials: writing to file /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json
[debug] [2023-06-28T03:40:43.893Z] Setting GAC to /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/maxadam/.config/firebase/max_v3rv_com_application_default_credentials.json"}}
[debug] [2023-06-28T03:40:43.895Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig [none]
[debug] [2023-06-28T03:40:44.521Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig 200
[debug] [2023-06-28T03:40:44.521Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/v3rv-notionaios/adminSdkConfig {"projectId":"v3rv-notionaios","storageBucket":"v3rv-notionaios.appspot.com","locationId":"us-central"}
[debug] [2023-06-28T03:40:44.581Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-06-28T03:40:45.718Z] Temp file directory for storage emulator: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/firebase/storage/blobs"}}
[debug] [2023-06-28T03:40:45.755Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-06-28T03:40:45.756Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-06-28T03:40:45.756Z] Starting Emulator UI with command {"binary":"node","args":["/Users/maxadam/.cache/firebase/emulators/ui-v1.11.6/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/maxadam/.cache/firebase/emulators/ui-v1.11.6/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-06-28T03:40:45.936Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-06-28T03:40:45.936Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/Users/maxadam/Desktop/Code/notionOS/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/maxadam/Desktop/Code/notionOS/functions\" for Cloud Functions..."}}
[debug] [2023-06-28T03:40:46.025Z] Validating nodejs source
[debug] [2023-06-28T03:40:47.251Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:40:47.252Z] Building nodejs source
[debug] [2023-06-28T03:40:47.252Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:40:47.256Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:40:47.265Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:40:47.568Z] Serving at port 8223

[debug] [2023-06-28T03:40:48.029Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:40:48.029Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:40:48.030Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:40:48.038Z] Setting up firebase config

[debug] [2023-06-28T03:40:48.043Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:40:48.048Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:40:48.051Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├───────────┼────────────────┼─────────────────────────────────┤
│ Storage   │ 127.0.0.1:9199 │ http://127.0.0.1:4000/storage   │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-06-28T03:41:38.133Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:41:39.137Z] Validating nodejs source
[debug] [2023-06-28T03:41:39.973Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:41:39.974Z] Building nodejs source
[debug] [2023-06-28T03:41:39.974Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:41:39.976Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:41:39.978Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:41:40.233Z] Serving at port 8263

[debug] [2023-06-28T03:41:40.769Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:41:40.770Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:41:40.770Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:41:40.778Z] Setting up firebase config

[debug] [2023-06-28T03:41:40.789Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:41:40.790Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:41:40.794Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:41:49.481Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.481Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.481Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.483Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:41:49.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:41:50.488Z] Validating nodejs source
[debug] [2023-06-28T03:41:51.403Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:41:51.403Z] Building nodejs source
[debug] [2023-06-28T03:41:51.403Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:41:51.404Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:41:51.406Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:41:51.667Z] Serving at port 8037

[debug] [2023-06-28T03:41:51.976Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:41:51.976Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:41:51.976Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:41:51.983Z] Setting up firebase config

[debug] [2023-06-28T03:41:51.988Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:41:51.988Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:41:51.994Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:43:01.287Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:43:02.288Z] Validating nodejs source
[debug] [2023-06-28T03:43:03.170Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:43:03.171Z] Building nodejs source
[debug] [2023-06-28T03:43:03.171Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:43:03.172Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:43:03.172Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:43:03.174Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:43:03.456Z] Serving at port 8100

[debug] [2023-06-28T03:43:03.997Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:43:03.998Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:43:03.999Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:43:04.007Z] Setting up firebase config

[debug] [2023-06-28T03:43:04.012Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:43:04.012Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:43:04.023Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:43:04.173Z] Validating nodejs source
[debug] [2023-06-28T03:43:05.160Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:43:05.160Z] Building nodejs source
[debug] [2023-06-28T03:43:05.160Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:43:05.161Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:43:05.162Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:43:05.454Z] Serving at port 8776

[debug] [2023-06-28T03:43:05.899Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD
Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:43:05.900Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:43:05.907Z] Setting up firebase config

[debug] [2023-06-28T03:43:05.916Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:43:05.917Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:43:05.940Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.201Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.202Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.203Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:43:12.204Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:43:13.206Z] Validating nodejs source
[debug] [2023-06-28T03:43:14.027Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:43:14.027Z] Building nodejs source
[debug] [2023-06-28T03:43:14.027Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:43:14.028Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:43:14.030Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:43:14.257Z] Serving at port 8778

[debug] [2023-06-28T03:43:14.570Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:43:14.570Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:43:14.571Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:43:14.576Z] Setting up firebase config

[debug] [2023-06-28T03:43:14.582Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:43:14.582Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:43:14.588Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:51:02.958Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/generateFiles.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:51:03.962Z] Validating nodejs source
[debug] [2023-06-28T03:51:05.099Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:51:05.100Z] Building nodejs source
[debug] [2023-06-28T03:51:05.100Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:51:05.101Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:51:05.102Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:51:05.389Z] Serving at port 8628

[debug] [2023-06-28T03:51:05.858Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:51:05.858Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:51:05.859Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:51:05.867Z] Setting up firebase config

[debug] [2023-06-28T03:51:05.872Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:51:05.873Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:51:05.879Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:51:08.502Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:51:09.504Z] Validating nodejs source
[debug] [2023-06-28T03:51:10.244Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:51:10.245Z] Building nodejs source
[debug] [2023-06-28T03:51:10.245Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:51:10.246Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:51:10.248Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:51:10.475Z] Serving at port 8779

[debug] [2023-06-28T03:51:10.805Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:51:10.805Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:51:10.805Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:51:10.811Z] Setting up firebase config

[debug] [2023-06-28T03:51:10.817Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:51:10.817Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:51:10.823Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:51:14.320Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:51:15.322Z] Validating nodejs source
[debug] [2023-06-28T03:51:16.073Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:51:16.073Z] Building nodejs source
[debug] [2023-06-28T03:51:16.074Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:51:16.075Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:51:16.076Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:51:16.331Z] Serving at port 8871

[debug] [2023-06-28T03:51:16.771Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:51:16.771Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:51:16.771Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:51:16.777Z] Setting up firebase config

[debug] [2023-06-28T03:51:16.783Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:51:16.783Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:51:16.790Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:52:24.225Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/index.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:52:25.227Z] Validating nodejs source
[debug] [2023-06-28T03:52:26.062Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:52:26.062Z] Building nodejs source
[debug] [2023-06-28T03:52:26.063Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:52:26.065Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:52:26.067Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:52:26.287Z] Serving at port 8167

[debug] [2023-06-28T03:52:26.628Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:52:26.629Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:52:26.629Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:52:26.635Z] Setting up firebase config

[debug] [2023-06-28T03:52:26.640Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:52:26.641Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:52:26.646Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:52:26.843Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:52:27.846Z] Validating nodejs source
[debug] [2023-06-28T03:52:28.577Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:52:28.577Z] Building nodejs source
[debug] [2023-06-28T03:52:28.577Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:52:28.578Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:52:28.579Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:52:28.806Z] Serving at port 8022

[debug] [2023-06-28T03:52:29.134Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:52:29.134Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:52:29.135Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:52:29.141Z] Setting up firebase config

[debug] [2023-06-28T03:52:29.146Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:52:29.146Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:52:29.152Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:53:53.123Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:53:54.125Z] Validating nodejs source
[debug] [2023-06-28T03:53:55.083Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:53:55.083Z] Building nodejs source
[debug] [2023-06-28T03:53:55.083Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:53:55.084Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:53:55.086Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:53:55.378Z] Serving at port 8188

[debug] [2023-06-28T03:53:55.845Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:53:55.846Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:53:55.846Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:53:55.854Z] Setting up firebase config

[debug] [2023-06-28T03:53:55.859Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:53:55.860Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:53:55.866Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:57:31.214Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:57:32.217Z] Validating nodejs source
[debug] [2023-06-28T03:57:33.160Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:57:33.160Z] Building nodejs source
[debug] [2023-06-28T03:57:33.161Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:57:33.162Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:57:33.163Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:57:33.497Z] Serving at port 8003

[debug] [2023-06-28T03:57:33.950Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:57:33.950Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:57:33.950Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:57:33.959Z] Setting up firebase config

[debug] [2023-06-28T03:57:33.964Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:57:33.965Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:57:33.971Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:57:36.723Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:57:37.724Z] Validating nodejs source
[debug] [2023-06-28T03:57:38.469Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:57:38.469Z] Building nodejs source
[debug] [2023-06-28T03:57:38.469Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:57:38.470Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:57:38.472Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:57:38.734Z] Serving at port 8203

[debug] [2023-06-28T03:57:39.092Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:57:39.092Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:57:39.093Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:57:39.099Z] Setting up firebase config

[debug] [2023-06-28T03:57:39.104Z] Got response from /__/functions.yaml Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).
[debug] [2023-06-28T03:57:39.105Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:
     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app).\n\u0000","position":63,"line":0,"column":63},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 64:\n     ... m function source: FirebaseError: Firebase: No Firebase App '[DE ... \n                                         ^"}
[debug] [2023-06-28T03:57:39.111Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app). {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: FirebaseError: Firebase: No Firebase App '[DEFAULT]' has been created - call initializeApp() first (app/no-app)."}}
[debug] [2023-06-28T03:58:24.144Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.145Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.146Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.147Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:24.148Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:25.151Z] Validating nodejs source
[debug] [2023-06-28T03:58:27.153Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:58:27.154Z] Building nodejs source
[debug] [2023-06-28T03:58:27.155Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:58:27.158Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:58:27.161Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:58:27.481Z] Serving at port 8653

[debug] [2023-06-28T03:58:27.576Z] Got response from /__/functions.yaml Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'
[debug] [2023-06-28T03:58:27.578Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:
     ... rom function source: SyntaxError: The requested module 'firebase ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'\n\u0000","position":61,"line":0,"column":61},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:\n     ... rom function source: SyntaxError: The requested module 'firebase ... \n                                         ^"}
[debug] [2023-06-28T03:58:27.581Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default' {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'"}}
[debug] [2023-06-28T03:58:41.950Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T03:58:42.951Z] Validating nodejs source
[debug] [2023-06-28T03:58:43.744Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:58:43.744Z] Building nodejs source
[debug] [2023-06-28T03:58:43.744Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:58:43.745Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:58:43.747Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:58:44.024Z] Serving at port 8256

[debug] [2023-06-28T03:58:44.176Z] Got response from /__/functions.yaml Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'
[debug] [2023-06-28T03:58:44.176Z] Failed to parse functions.yaml incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:
     ... rom function source: SyntaxError: The requested module 'firebase ... 
                                         ^ {"name":"YAMLException","reason":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line","mark":{"name":null,"buffer":"Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'\n\u0000","position":61,"line":0,"column":61},"message":"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 1, column 62:\n     ... rom function source: SyntaxError: The requested module 'firebase ... \n                                         ^"}
[debug] [2023-06-28T03:58:44.195Z] shutdown requested via /__/quitquitquit

[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default' {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Failed to load function definition from source: Failed to generate manifest from function source: SyntaxError: The requested module 'firebase/app' does not provide an export named 'default'"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.449Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.450Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.451Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T03:58:53.452Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T03:58:54.455Z] Validating nodejs source
[debug] [2023-06-28T03:58:55.361Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T03:58:55.361Z] Building nodejs source
[debug] [2023-06-28T03:58:55.361Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T03:58:55.364Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T03:58:55.365Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T03:58:55.605Z] Serving at port 8509

[debug] [2023-06-28T03:58:56.058Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T03:58:56.058Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T03:58:56.058Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T03:58:56.063Z] Setting up firebase config

[debug] [2023-06-28T03:58:56.065Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T03:58:56.066Z] here in the api

[debug] [2023-06-28T03:58:56.142Z] Initializing file generator

[debug] [2023-06-28T03:58:56.149Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T03:58:56.157Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/api)."}}
[info] ✔  functions[us-central1-generateFiles]: http function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/generateFiles). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/v3rv-notionaios/us-central1/generateFiles)."}}
[debug] [2023-06-28T04:00:11.368Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T04:00:11.751Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T04:00:12.753Z] Validating nodejs source
[debug] [2023-06-28T04:00:13.511Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:13.511Z] Building nodejs source
[debug] [2023-06-28T04:00:13.511Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:13.512Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:13.514Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:13.737Z] Serving at port 8143

[debug] [2023-06-28T04:00:14.074Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:14.074Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:14.075Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:14.082Z] Setting up firebase config

[debug] [2023-06-28T04:00:14.084Z] Initialized and ready to roll

[debug] [2023-06-28T04:00:14.085Z] connector initialized

[debug] [2023-06-28T04:00:14.086Z] here in the api

[debug] [2023-06-28T04:00:14.138Z] Initializing file generator

[debug] [2023-06-28T04:00:14.145Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:14.153Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:00:27.333Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.333Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.334Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.335Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:27.336Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:28.338Z] Validating nodejs source
[debug] [2023-06-28T04:00:29.232Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:29.232Z] Building nodejs source
[debug] [2023-06-28T04:00:29.232Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:29.233Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:29.234Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:29.519Z] Serving at port 8825

[debug] [2023-06-28T04:00:30.046Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:30.046Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:30.047Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:30.186Z] Setting up firebase config

[debug] [2023-06-28T04:00:30.186Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T04:00:30.187Z] here in the api

[debug] [2023-06-28T04:00:30.259Z] Initializing file generator

[debug] [2023-06-28T04:00:30.266Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:30.270Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:00:44.051Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T04:00:45.053Z] Validating nodejs source
[debug] [2023-06-28T04:00:45.885Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:45.886Z] Building nodejs source
[debug] [2023-06-28T04:00:45.886Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:45.887Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:45.889Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:46.268Z] Serving at port 8802

[debug] [2023-06-28T04:00:46.616Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:46.617Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:46.617Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:46.688Z] Setting up firebase config

[debug] [2023-06-28T04:00:46.689Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T04:00:46.690Z] here in the api

[debug] [2023-06-28T04:00:46.723Z] Initializing file generator

[debug] [2023-06-28T04:00:46.730Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:46.734Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:00:54.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.482Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.484Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.485Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.486Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T04:00:54.583Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T04:00:55.585Z] Validating nodejs source
[debug] [2023-06-28T04:00:56.315Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T04:00:56.316Z] Building nodejs source
[debug] [2023-06-28T04:00:56.316Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T04:00:56.318Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T04:00:56.320Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T04:00:56.549Z] Serving at port 8833

[debug] [2023-06-28T04:00:56.896Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T04:00:56.896Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T04:00:56.897Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T04:00:56.966Z] Setting up firebase config

[debug] [2023-06-28T04:00:56.967Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T04:00:56.968Z] here in the api

[debug] [2023-06-28T04:00:57.001Z] Initializing file generator

[debug] [2023-06-28T04:00:57.007Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T04:00:57.011Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T04:01:07.274Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T04:01:07.274Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T04:01:07.274Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T04:01:07.274Z"],"workRunningCount":1}
[debug] [2023-06-28T04:01:07.275Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T04:01:07.294Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T04:01:07.294Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T04:01:07.303Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T04:01:07.304Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T04:01:08.826Z] [runtime-status] [9148] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T04:01:08.826Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:08.827Z] [runtime-status] [9148] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T04:01:08.827Z] [runtime-status] [9148] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T04:01:08.828Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:09.040Z] [runtime-status] [9148] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T04:01:09.041Z] [runtime-status] [9148] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T04:01:09.041Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:09.043Z] [runtime-status] [9148] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T04:01:09.044Z] [runtime-status] [9148] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T04:01:09.045Z] [runtime-status] [9148] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T04:01:09.368Z] [runtime-status] [9148] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T04:01:09.368Z] [runtime-status] [9148] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_79a451ede202c315.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [9148] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_79a451ede202c315.sock"}}
[debug] [2023-06-28T04:01:09.436Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: IDLE"}}
[debug] [2023-06-28T04:01:09.437Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T04:01:09.438Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97"}}
[info] >      const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get(); {"user":"    const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();"}}
[info] >                                    ^ {"user":"                                  ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                   ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: db.collection is not a function {"user":"TypeError: db.collection is not a function","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: db.collection is not a function"}}
[info] >      at Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97:35) {"user":"    at Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:97:35)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T04:01:09.476Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T04:01:09.476Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: exited"}}
[debug] [2023-06-28T04:01:09.477Z] [worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bab4e1c0-22b7-4484-9e62-80b7e1903ceb]: FINISHED"}}
[debug] [2023-06-28T05:47:56.323Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:47:57.325Z] Validating nodejs source
[debug] [2023-06-28T05:47:58.366Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:47:58.366Z] Building nodejs source
[debug] [2023-06-28T05:47:58.366Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:47:58.367Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:47:58.371Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:47:58.751Z] Serving at port 8882

[debug] [2023-06-28T05:47:59.332Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:47:59.332Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:47:59.333Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:47:59.457Z] Setting up firebase config

[debug] [2023-06-28T05:47:59.463Z] Initialized and ready to roll
connector initialized
here in the api

[debug] [2023-06-28T05:47:59.572Z] Initializing file generator

[debug] [2023-06-28T05:47:59.580Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:47:59.588Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:48:02.149Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:48:03.163Z] Validating nodejs source
[debug] [2023-06-28T05:48:04.200Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:48:04.200Z] Building nodejs source
[debug] [2023-06-28T05:48:04.200Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:48:04.201Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:48:04.203Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:48:04.582Z] Serving at port 8470

[debug] [2023-06-28T05:48:05.080Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:48:05.081Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:48:05.081Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:48:05.186Z] Setting up firebase config

[debug] [2023-06-28T05:48:05.187Z] Initialized and ready to roll

[debug] [2023-06-28T05:48:05.187Z] connector initialized

[debug] [2023-06-28T05:48:05.188Z] here in the api

[debug] [2023-06-28T05:48:05.245Z] Initializing file generator

[debug] [2023-06-28T05:48:05.253Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:48:05.258Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.986Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.987Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:48:10.988Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:48:11.989Z] Validating nodejs source
[debug] [2023-06-28T05:48:13.026Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:48:13.026Z] Building nodejs source
[debug] [2023-06-28T05:48:13.026Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:48:13.028Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:48:13.029Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:48:13.336Z] Serving at port 8092

[debug] [2023-06-28T05:48:13.852Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:48:13.852Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:48:13.966Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:48:13.973Z] Setting up firebase config

[debug] [2023-06-28T05:48:13.974Z] Initialized and ready to roll

[debug] [2023-06-28T05:48:13.974Z] connector initialized

[debug] [2023-06-28T05:48:13.975Z] here in the api

[debug] [2023-06-28T05:48:14.043Z] Initializing file generator

[debug] [2023-06-28T05:48:14.050Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:48:14.056Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:48:20.624Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:48:20.624Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:48:20.624Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:48:20.624Z"],"workRunningCount":1}
[debug] [2023-06-28T05:48:20.624Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:48:20.639Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:48:20.640Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:48:20.640Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:48:20.646Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:48:20.647Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:48:22.397Z] [runtime-status] [11432] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:48:22.398Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.398Z] [runtime-status] [11432] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:48:22.399Z] [runtime-status] [11432] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:48:22.400Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.612Z] [runtime-status] [11432] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:48:22.612Z] [runtime-status] [11432] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:48:22.613Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.614Z] [runtime-status] [11432] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:48:22.616Z] [runtime-status] [11432] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:48:22.616Z] [runtime-status] [11432] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:48:22.951Z] [runtime-status] [11432] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:48:22.952Z] [runtime-status] [11432] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_5ab7d2732f13df5e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11432] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_5ab7d2732f13df5e.sock"}}
[debug] [2023-06-28T05:48:22.979Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: IDLE"}}
[debug] [2023-06-28T05:48:22.979Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:48:22.980Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  [2023-06-28T05:48:24.088Z]  @firebase/firestore: Firestore (9.23.0): GrpcConnection RPC 'Write' stream 0x49ebb4bb error. Code: 7 Message: 7 PERMISSION_DENIED: Missing or insufficient permissions. {"user":"[2023-06-28T05:48:24.088Z]  @firebase/firestore: Firestore (9.23.0): GrpcConnection RPC 'Write' stream 0x49ebb4bb error. Code: 7 Message: 7 PERMISSION_DENIED: Missing or insufficient permissions.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [2023-06-28T05:48:24.088Z]  @firebase/firestore: Firestore (9.23.0): GrpcConnection RPC 'Write' stream 0x49ebb4bb error. Code: 7 Message: 7 PERMISSION_DENIED: Missing or insufficient permissions."}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  [FirebaseError: 7 PERMISSION_DENIED: Missing or insufficient permissions.] { {"user":"[FirebaseError: 7 PERMISSION_DENIED: Missing or insufficient permissions.] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m [FirebaseError: 7 PERMISSION_DENIED: Missing or insufficient permissions.] {"}}
[info] >    code: 'permission-denied', {"user":"  code: 'permission-denied',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'permission-denied',"}}
[info] >    customData: undefined, {"user":"  customData: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customData: undefined,"}}
[info] >    toString: [Function (anonymous)] {"user":"  toString: [Function (anonymous)]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   toString: [Function (anonymous)]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T05:48:24.108Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:48:24.109Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: exited"}}
[debug] [2023-06-28T05:48:24.109Z] [worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3fcd1675-e4cd-4d50-b9fa-e99020656d53]: FINISHED"}}
[debug] [2023-06-28T05:50:12.265Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:50:13.267Z] Validating nodejs source
[debug] [2023-06-28T05:50:14.166Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:50:14.166Z] Building nodejs source
[debug] [2023-06-28T05:50:14.167Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:50:14.168Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:50:14.170Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:50:14.546Z] Serving at port 8031

[debug] [2023-06-28T05:50:15.212Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:50:15.212Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:50:15.332Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:50:15.338Z] Setting up firebase config

[debug] [2023-06-28T05:50:15.339Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:50:15.340Z] here in the api

[debug] [2023-06-28T05:50:15.413Z] Initializing file generator

[debug] [2023-06-28T05:50:15.420Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:50:15.431Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:50:23.380Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.381Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.382Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:50:23.383Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:50:24.384Z] Validating nodejs source
[debug] [2023-06-28T05:50:25.275Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:50:25.275Z] Building nodejs source
[debug] [2023-06-28T05:50:25.275Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:50:25.276Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:50:25.278Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:50:25.592Z] Serving at port 8310

[debug] [2023-06-28T05:50:26.122Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:50:26.122Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:50:26.236Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:50:26.243Z] Setting up firebase config

[debug] [2023-06-28T05:50:26.244Z] Initialized and ready to roll

[debug] [2023-06-28T05:50:26.244Z] connector initialized

[debug] [2023-06-28T05:50:26.245Z] here in the api

[debug] [2023-06-28T05:50:26.309Z] Initializing file generator

[debug] [2023-06-28T05:50:26.316Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:50:26.320Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:50:32.877Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:50:32.877Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:50:32.877Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:50:32.877Z"],"workRunningCount":1}
[debug] [2023-06-28T05:50:32.878Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:50:32.894Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:50:32.895Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:50:32.895Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:50:32.902Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:50:32.903Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:50:34.445Z] [runtime-status] [11491] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:50:34.446Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.447Z] [runtime-status] [11491] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:50:34.447Z] [runtime-status] [11491] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:50:34.448Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.665Z] [runtime-status] [11491] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:50:34.665Z] [runtime-status] [11491] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:50:34.669Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.670Z] [runtime-status] [11491] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:50:34.672Z] [runtime-status] [11491] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:50:34.672Z] [runtime-status] [11491] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:50:35.007Z] [runtime-status] [11491] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:50:35.007Z] [runtime-status] [11491] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_a7456f37a7c0f74e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11491] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_a7456f37a7c0f74e.sock"}}
[debug] [2023-06-28T05:50:35.031Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE"}}
[debug] [2023-06-28T05:50:35.032Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:50:35.032Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T05:50:35.971Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 939.153613ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 939.153613ms"}}
[debug] [2023-06-28T05:50:35.972Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: IDLE"}}
[debug] [2023-06-28T05:50:35.972Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T05:50:35.972Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T05:50:35.972Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:53:06.701Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:53:07.703Z] Validating nodejs source
[debug] [2023-06-28T05:53:08.661Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:53:08.661Z] Building nodejs source
[debug] [2023-06-28T05:53:08.661Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:53:08.662Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:53:08.663Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:53:09.133Z] Serving at port 8420

[debug] [2023-06-28T05:53:09.674Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:53:09.674Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:53:09.782Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:53:09.789Z] Setting up firebase config

[debug] [2023-06-28T05:53:09.790Z] Initialized and ready to roll

[debug] [2023-06-28T05:53:09.790Z] connector initialized

[debug] [2023-06-28T05:53:09.790Z] here in the api

[debug] [2023-06-28T05:53:09.853Z] Initializing file generator

[debug] [2023-06-28T05:53:09.861Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:53:09.865Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:53:09.877Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T05:53:09.877Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHING"}}
[debug] [2023-06-28T05:53:09.892Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: exited"}}
[debug] [2023-06-28T05:53:09.892Z] [worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49361971-7e1a-4705-af3a-68ffaea3df1d]: FINISHED"}}
[debug] [2023-06-28T05:53:13.713Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:53:14.715Z] Validating nodejs source
[debug] [2023-06-28T05:53:15.510Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:53:15.510Z] Building nodejs source
[debug] [2023-06-28T05:53:15.510Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:53:15.511Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:53:15.513Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:53:15.726Z] Serving at port 8853

[debug] [2023-06-28T05:53:16.075Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:53:16.076Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:53:16.144Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:53:16.150Z] Setting up firebase config

[debug] [2023-06-28T05:53:16.151Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:53:16.151Z] here in the api

[debug] [2023-06-28T05:53:16.185Z] Initializing file generator

[debug] [2023-06-28T05:53:16.192Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:53:16.196Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:53:31.775Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:53:32.777Z] Validating nodejs source
[debug] [2023-06-28T05:53:33.574Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:53:33.574Z] Building nodejs source
[debug] [2023-06-28T05:53:33.575Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:53:33.576Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:53:33.577Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:53:33.841Z] Serving at port 8209

[debug] [2023-06-28T05:53:34.203Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:53:34.204Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:53:34.271Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:53:34.276Z] Setting up firebase config

[debug] [2023-06-28T05:53:34.277Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:53:34.278Z] here in the api

[debug] [2023-06-28T05:53:34.311Z] Initializing file generator

[debug] [2023-06-28T05:53:34.318Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:53:34.323Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:54:42.917Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:54:43.919Z] Validating nodejs source
[debug] [2023-06-28T05:54:44.688Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:54:44.688Z] Building nodejs source
[debug] [2023-06-28T05:54:44.689Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:54:44.690Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:54:44.692Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:54:45.016Z] Serving at port 8666

[debug] [2023-06-28T05:54:45.387Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:54:45.387Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:54:45.452Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:54:45.457Z] Setting up firebase config

[debug] [2023-06-28T05:54:45.457Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:54:45.458Z] here in the api

[debug] [2023-06-28T05:54:45.491Z] Initializing file generator

[debug] [2023-06-28T05:54:45.497Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:54:45.502Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:54:58.082Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:54:59.083Z] Validating nodejs source
[debug] [2023-06-28T05:54:59.835Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:54:59.835Z] Building nodejs source
[debug] [2023-06-28T05:54:59.835Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:54:59.836Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:54:59.838Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:55:00.074Z] Serving at port 8399

[debug] [2023-06-28T05:55:00.430Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:55:00.430Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:55:00.496Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:55:00.501Z] Setting up firebase config

[debug] [2023-06-28T05:55:00.502Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:55:00.503Z] here in the api

[debug] [2023-06-28T05:55:00.536Z] Initializing file generator

[debug] [2023-06-28T05:55:00.543Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:55:00.548Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:55:43.749Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:55:44.750Z] Validating nodejs source
[debug] [2023-06-28T05:55:45.526Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:55:45.526Z] Building nodejs source
[debug] [2023-06-28T05:55:45.526Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:55:45.527Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:55:45.528Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:55:45.761Z] Serving at port 8223

[debug] [2023-06-28T05:55:46.158Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:55:46.159Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:55:46.226Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:55:46.231Z] Setting up firebase config

[debug] [2023-06-28T05:55:46.232Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:55:46.233Z] here in the api

[debug] [2023-06-28T05:55:46.267Z] Initializing file generator

[debug] [2023-06-28T05:55:46.274Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:55:46.279Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:55:56.680Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:55:57.683Z] Validating nodejs source
[debug] [2023-06-28T05:55:58.587Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:55:58.587Z] Building nodejs source
[debug] [2023-06-28T05:55:58.587Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:55:58.588Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:55:58.589Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:55:58.870Z] Serving at port 8446

[debug] [2023-06-28T05:55:59.398Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:55:59.398Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:55:59.524Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:55:59.530Z] Setting up firebase config

[debug] [2023-06-28T05:55:59.530Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:55:59.531Z] here in the api

[debug] [2023-06-28T05:55:59.604Z] Initializing file generator

[debug] [2023-06-28T05:55:59.611Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:55:59.615Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:56:15.080Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:56:16.082Z] Validating nodejs source
[debug] [2023-06-28T05:56:16.917Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:56:16.918Z] Building nodejs source
[debug] [2023-06-28T05:56:16.918Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:56:16.919Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:56:16.921Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:56:17.323Z] Serving at port 8139

[debug] [2023-06-28T05:56:17.694Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:56:17.695Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:56:17.763Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:56:17.768Z] Setting up firebase config

[debug] [2023-06-28T05:56:17.769Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:56:17.770Z] here in the api

[debug] [2023-06-28T05:56:17.803Z] Initializing file generator

[debug] [2023-06-28T05:56:17.809Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:56:17.814Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:56:24.475Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.476Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.477Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.477Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.477Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.577Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:56:24.578Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:56:25.580Z] Validating nodejs source
[debug] [2023-06-28T05:56:26.321Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:56:26.321Z] Building nodejs source
[debug] [2023-06-28T05:56:26.321Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:56:26.322Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:56:26.323Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:56:26.554Z] Serving at port 8964

[debug] [2023-06-28T05:56:26.907Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:56:26.907Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:56:26.976Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:56:26.981Z] Setting up firebase config

[debug] [2023-06-28T05:56:26.982Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:56:26.983Z] here in the api

[debug] [2023-06-28T05:56:27.017Z] Initializing file generator

[debug] [2023-06-28T05:56:27.024Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:56:27.028Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:56:41.552Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:56:41.552Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:56:41.553Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:56:41.552Z"],"workRunningCount":1}
[debug] [2023-06-28T05:56:41.553Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:56:41.570Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:56:41.570Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:56:41.571Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:56:41.578Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:56:41.578Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:56:43.147Z] [runtime-status] [11641] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:56:43.148Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.148Z] [runtime-status] [11641] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:56:43.149Z] [runtime-status] [11641] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:56:43.149Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.367Z] [runtime-status] [11641] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:56:43.367Z] [runtime-status] [11641] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:56:43.368Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.370Z] [runtime-status] [11641] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:56:43.372Z] [runtime-status] [11641] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:56:43.372Z] [runtime-status] [11641] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:56:43.699Z] [runtime-status] [11641] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:56:43.699Z] [runtime-status] [11641] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0a40200165b4e81f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11641] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0a40200165b4e81f.sock"}}
[debug] [2023-06-28T05:56:43.711Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: IDLE"}}
[debug] [2023-06-28T05:56:43.711Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:56:43.713Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151"}}
[info] >      const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get(); {"user":"    const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();"}}
[info] >                                    ^ {"user":"                                  ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                   ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: db.collection is not a function {"user":"TypeError: db.collection is not a function","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: db.collection is not a function"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T05:56:43.752Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:56:43.753Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: exited"}}
[debug] [2023-06-28T05:56:43.754Z] [worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d64522a0-bd7e-45d6-bc8f-28764017a99d]: FINISHED"}}
[debug] [2023-06-28T05:59:13.246Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:14.248Z] Validating nodejs source
[debug] [2023-06-28T05:59:15.024Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:15.024Z] Building nodejs source
[debug] [2023-06-28T05:59:15.024Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:15.025Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:15.027Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:15.292Z] Serving at port 8624

[debug] [2023-06-28T05:59:15.664Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:15.664Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:15.736Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:15.742Z] Setting up firebase config

[debug] [2023-06-28T05:59:15.743Z] Initialized and ready to roll

[debug] [2023-06-28T05:59:15.743Z] connector initialized

[debug] [2023-06-28T05:59:15.744Z] here in the api

[debug] [2023-06-28T05:59:15.803Z] Initializing file generator

[debug] [2023-06-28T05:59:15.810Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:15.815Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:20.507Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:20.607Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:21.610Z] Validating nodejs source
[debug] [2023-06-28T05:59:22.344Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:22.344Z] Building nodejs source
[debug] [2023-06-28T05:59:22.345Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:22.346Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:22.347Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:22.585Z] Serving at port 8575

[debug] [2023-06-28T05:59:22.936Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:22.936Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:23.004Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:23.010Z] Setting up firebase config

[debug] [2023-06-28T05:59:23.011Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:59:23.011Z] here in the api

[debug] [2023-06-28T05:59:23.053Z] Initializing file generator

[debug] [2023-06-28T05:59:23.054Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:23.059Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:26.895Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:26.995Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T05:59:27.997Z] Validating nodejs source
[debug] [2023-06-28T05:59:28.745Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:28.746Z] Building nodejs source
[debug] [2023-06-28T05:59:28.746Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:28.747Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:28.748Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:29.011Z] Serving at port 8028

[debug] [2023-06-28T05:59:29.358Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:29.358Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:29.428Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:29.434Z] Setting up firebase config

[debug] [2023-06-28T05:59:29.434Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:59:29.435Z] here in the api

[debug] [2023-06-28T05:59:29.469Z] Initializing file generator

[debug] [2023-06-28T05:59:29.475Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:29.480Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:39.675Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.675Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.676Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.677Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.678Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T05:59:39.679Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T05:59:40.681Z] Validating nodejs source
[debug] [2023-06-28T05:59:41.659Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T05:59:41.660Z] Building nodejs source
[debug] [2023-06-28T05:59:41.660Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T05:59:41.661Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T05:59:41.663Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T05:59:41.950Z] Serving at port 8175

[debug] [2023-06-28T05:59:42.453Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T05:59:42.454Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T05:59:42.575Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T05:59:42.580Z] Setting up firebase config

[debug] [2023-06-28T05:59:42.581Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T05:59:42.582Z] here in the api

[debug] [2023-06-28T05:59:42.654Z] Initializing file generator

[debug] [2023-06-28T05:59:42.661Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T05:59:42.670Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T05:59:46.706Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:59:46.706Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T05:59:46.706Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T05:59:46.706Z"],"workRunningCount":1}
[debug] [2023-06-28T05:59:46.706Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T05:59:46.724Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T05:59:46.724Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T05:59:46.725Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T05:59:46.732Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T05:59:46.733Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T05:59:48.375Z] [runtime-status] [11716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:59:48.376Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.376Z] [runtime-status] [11716] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T05:59:48.377Z] [runtime-status] [11716] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T05:59:48.378Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.595Z] [runtime-status] [11716] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T05:59:48.595Z] [runtime-status] [11716] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T05:59:48.596Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.598Z] [runtime-status] [11716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T05:59:48.599Z] [runtime-status] [11716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T05:59:48.600Z] [runtime-status] [11716] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T05:59:48.932Z] [runtime-status] [11716] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T05:59:48.933Z] [runtime-status] [11716] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_bcf010199fefcce8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11716] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_bcf010199fefcce8.sock"}}
[debug] [2023-06-28T05:59:48.963Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE"}}
[debug] [2023-06-28T05:59:48.963Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T05:59:48.964Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T05:59:49.912Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 948.296698ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 948.296698ms"}}
[debug] [2023-06-28T05:59:49.912Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: IDLE"}}
[debug] [2023-06-28T05:59:49.913Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T05:59:49.913Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T05:59:49.913Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:00:59.813Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:00:59.813Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:00:59.813Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:00:59.813Z"],"workRunningCount":1}
[debug] [2023-06-28T06:00:59.813Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:00:59.827Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:00:59.827Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:00:59.828Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:00:59.828Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"root"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"root"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"root\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"root\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16) {"user":"    at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:01:01 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:01:01 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:01:01 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '240' ], {"user":"      'content-length': [ '240' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '240' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8"' ], {"user":"      etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=bBZmI29uenOatK3O9I12cF.O8gZVd0Hc8gGKF4lVDZ0-1687932061-0-AbuF1VAKcEvIa1YRzI3fspYc9fEbvK8oZOEUlkDSKIR6Ohx/NnLmq3KgBNFpvFqyXXL1ftBAXEvF2TvpFJy3+zo=; path=/; expires=Wed, 28-Jun-23 06:31:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=bBZmI29uenOatK3O9I12cF.O8gZVd0Hc8gGKF4lVDZ0-1687932061-0-AbuF1VAKcEvIa1YRzI3fspYc9fEbvK8oZOEUlkDSKIR6Ohx/NnLmq3KgBNFpvFqyXXL1ftBAXEvF2TvpFJy3+zo=; path=/; expires=Wed, 28-Jun-23 06:31:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=bBZmI29uenOatK3O9I12cF.O8gZVd0Hc8gGKF4lVDZ0-1687932061-0-AbuF1VAKcEvIa1YRzI3fspYc9fEbvK8oZOEUlkDSKIR6Ohx/NnLmq3KgBNFpvFqyXXL1ftBAXEvF2TvpFJy3+zo=; path=/; expires=Wed, 28-Jun-23 06:31:01 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3b6730c072e94-MEL' ] {"user":"      'cf-ray': [ '7de3b6730c072e94-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3b6730c072e94-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"root\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:01:01.428Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:01:01.428Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: exited"}}
[debug] [2023-06-28T06:01:01.429Z] [worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa87978-d828-4b1c-9c2c-a7d6c864b467]: FINISHED"}}
[debug] [2023-06-28T06:02:02.097Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:02:02.097Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:02:02.097Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:02:02.097Z"],"workRunningCount":1}
[debug] [2023-06-28T06:02:02.097Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:02:02.111Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:02:02.111Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:02:02.111Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:02:02.118Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:02:02.118Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:02:03.869Z] [runtime-status] [11753] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:02:03.871Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:03.871Z] [runtime-status] [11753] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:02:03.872Z] [runtime-status] [11753] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:02:03.873Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:04.225Z] [runtime-status] [11753] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:02:04.225Z] [runtime-status] [11753] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:02:04.226Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:04.228Z] [runtime-status] [11753] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:02:04.231Z] [runtime-status] [11753] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:02:04.231Z] [runtime-status] [11753] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:02:04.710Z] [runtime-status] [11753] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:02:04.711Z] [runtime-status] [11753] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_f0b3bb9135214e50.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11753] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_f0b3bb9135214e50.sock"}}
[debug] [2023-06-28T06:02:04.750Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: IDLE"}}
[debug] [2023-06-28T06:02:04.751Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:02:04.751Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16) {"user":"    at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:02:06 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:02:06 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:02:06 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '256' ], {"user":"      'content-length': [ '256' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '256' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"100-MNtleM2Y9bevYOfEyKimA9N2L9s"' ], {"user":"      etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=TL6slLn0W8O60aciAXDZaPffLV0J6sEwyRqw4vpkKlQ-1687932126-0-ARMAg6UXaT9LmzOzIvillSuE+srC0edAs9UQ3uiaSLaUJ+KKE8Gx7eK7UM6deYDqjbX58D6a1bQk04sPowwMmY8=; path=/; expires=Wed, 28-Jun-23 06:32:06 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=TL6slLn0W8O60aciAXDZaPffLV0J6sEwyRqw4vpkKlQ-1687932126-0-ARMAg6UXaT9LmzOzIvillSuE+srC0edAs9UQ3uiaSLaUJ+KKE8Gx7eK7UM6deYDqjbX58D6a1bQk04sPowwMmY8=; path=/; expires=Wed, 28-Jun-23 06:32:06 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=TL6slLn0W8O60aciAXDZaPffLV0J6sEwyRqw4vpkKlQ-1687932126-0-ARMAg6UXaT9LmzOzIvillSuE+srC0edAs9UQ3uiaSLaUJ+KKE8Gx7eK7UM6deYDqjbX58D6a1bQk04sPowwMmY8=; path=/; expires=Wed, 28-Jun-23 06:32:06 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3b80b5cc73772-MEL' ] {"user":"      'cf-ray': [ '7de3b80b5cc73772-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3b80b5cc73772-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"V9LxiYXUeTklJ7Op5HKU\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:02:06.751Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:02:06.751Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: exited"}}
[debug] [2023-06-28T06:02:06.751Z] [worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-438c08e2-57b8-4ee9-bd12-4091fa878227]: FINISHED"}}
[debug] [2023-06-28T06:04:00.945Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:04:00.945Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:04:00.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:04:00.945Z"],"workRunningCount":1}
[debug] [2023-06-28T06:04:00.945Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:04:00.959Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:04:00.959Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:04:00.959Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:04:00.965Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:04:00.965Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:04:01.979Z] [runtime-status] [11773] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:04:01.981Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:01.981Z] [runtime-status] [11773] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:04:01.981Z] [runtime-status] [11773] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:04:01.982Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:02.201Z] [runtime-status] [11773] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:04:02.201Z] [runtime-status] [11773] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:04:02.202Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:02.203Z] [runtime-status] [11773] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:04:02.205Z] [runtime-status] [11773] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:04:02.205Z] [runtime-status] [11773] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:04:02.516Z] [runtime-status] [11773] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:04:02.517Z] [runtime-status] [11773] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0b160c73015058da.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11773] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_0b160c73015058da.sock"}}
[debug] [2023-06-28T06:04:02.588Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: IDLE"}}
[debug] [2023-06-28T06:04:02.588Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:04:02.589Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"V9LxiYXUeTklJ7Op5HKU"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"V9LxiYXUeTklJ7Op5HKU\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16) {"user":"    at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.addToFirebase (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:113:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:04:04 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:04:04 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:04:04 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '256' ], {"user":"      'content-length': [ '256' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '256' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"100-MNtleM2Y9bevYOfEyKimA9N2L9s"' ], {"user":"      etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"100-MNtleM2Y9bevYOfEyKimA9N2L9s\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=Uz7C0mUQTgdkn4qU6.6QvG.6B3moeeIMNbzB4OgUxmE-1687932244-0-ASS9zLOSIDj5UHMbJy1d6TigVXyx3BPVKsLEXc/Ws+eDf6RW0qcXKxDRRdnjNqePdFt0NhtcQtJwc8EL7iIEHjg=; path=/; expires=Wed, 28-Jun-23 06:34:04 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=Uz7C0mUQTgdkn4qU6.6QvG.6B3moeeIMNbzB4OgUxmE-1687932244-0-ASS9zLOSIDj5UHMbJy1d6TigVXyx3BPVKsLEXc/Ws+eDf6RW0qcXKxDRRdnjNqePdFt0NhtcQtJwc8EL7iIEHjg=; path=/; expires=Wed, 28-Jun-23 06:34:04 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=Uz7C0mUQTgdkn4qU6.6QvG.6B3moeeIMNbzB4OgUxmE-1687932244-0-ASS9zLOSIDj5UHMbJy1d6TigVXyx3BPVKsLEXc/Ws+eDf6RW0qcXKxDRRdnjNqePdFt0NhtcQtJwc8EL7iIEHjg=; path=/; expires=Wed, 28-Jun-23 06:34:04 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3baeb88082b38-MEL' ] {"user":"      'cf-ray': [ '7de3baeb88082b38-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3baeb88082b38-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"V9LxiYXUeTklJ7Op5HKU\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"V9LxiYXUeTklJ7Op5HKU\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:04:04.630Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:04:04.631Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: exited"}}
[debug] [2023-06-28T06:04:04.631Z] [worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ef9ba60-5482-436b-8afa-b796d6af8cd2]: FINISHED"}}
[debug] [2023-06-28T06:06:21.849Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:06:22.850Z] Validating nodejs source
[debug] [2023-06-28T06:06:23.820Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:06:23.820Z] Building nodejs source
[debug] [2023-06-28T06:06:23.820Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:06:23.821Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:06:23.823Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:06:24.054Z] Serving at port 8539

[debug] [2023-06-28T06:06:24.421Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:06:24.421Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:06:24.491Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:06:24.496Z] Setting up firebase config

[debug] [2023-06-28T06:06:24.498Z] Initialized and ready to roll

[debug] [2023-06-28T06:06:24.498Z] connector initialized

[debug] [2023-06-28T06:06:24.498Z] here in the api

[debug] [2023-06-28T06:06:24.536Z] Initializing file generator

[debug] [2023-06-28T06:06:24.542Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:06:24.547Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:07:09.092Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/controllers/notionController.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:07:10.093Z] Validating nodejs source
[debug] [2023-06-28T06:07:10.989Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:07:10.990Z] Building nodejs source
[debug] [2023-06-28T06:07:10.990Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:07:10.991Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:07:10.992Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:07:11.264Z] Serving at port 8076

[debug] [2023-06-28T06:07:11.617Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:07:11.618Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:07:11.685Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:07:11.690Z] Setting up firebase config

[debug] [2023-06-28T06:07:11.691Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:07:11.692Z] here in the api

[debug] [2023-06-28T06:07:11.726Z] Initializing file generator

[debug] [2023-06-28T06:07:11.732Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:07:11.737Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:08:21.562Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.562Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.563Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.564Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:08:21.565Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:08:22.568Z] Validating nodejs source
[debug] [2023-06-28T06:08:23.500Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:08:23.500Z] Building nodejs source
[debug] [2023-06-28T06:08:23.500Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:08:23.501Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:08:23.502Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:08:23.829Z] Serving at port 8557

[debug] [2023-06-28T06:08:24.355Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:08:24.356Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:08:24.483Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:08:24.489Z] Setting up firebase config

[debug] [2023-06-28T06:08:24.490Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:08:24.491Z] here in the api

[debug] [2023-06-28T06:08:24.562Z] Initializing file generator

[debug] [2023-06-28T06:08:24.568Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:08:24.573Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:08:28.714Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:08:28.714Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:08:28.714Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:08:28.714Z"],"workRunningCount":1}
[debug] [2023-06-28T06:08:28.714Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:08:28.729Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:08:28.730Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:08:28.730Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:08:28.736Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:08:28.736Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:08:30.328Z] [runtime-status] [11861] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:08:30.329Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.329Z] [runtime-status] [11861] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:08:30.330Z] [runtime-status] [11861] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:08:30.331Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.560Z] [runtime-status] [11861] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:08:30.561Z] [runtime-status] [11861] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:08:30.561Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.562Z] [runtime-status] [11861] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:08:30.564Z] [runtime-status] [11861] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:08:30.564Z] [runtime-status] [11861] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:08:30.922Z] [runtime-status] [11861] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:08:30.922Z] [runtime-status] [11861] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b232095aa8e21cc0.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11861] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b232095aa8e21cc0.sock"}}
[debug] [2023-06-28T06:08:30.968Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: IDLE"}}
[debug] [2023-06-28T06:08:30.968Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:08:30.969Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151 {"user":"file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151"}}
[info] >      const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get(); {"user":"    const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const pageSnapshot = await db.collection('pages').where('name', '==', pageName).get();"}}
[info] >                                    ^ {"user":"                                  ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                   ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: db.collection is not a function {"user":"TypeError: db.collection is not a function","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: db.collection is not a function"}}
[info] >      at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35) {"user":"    at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:151:35)"}}
[info] >      at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54) {"user":"    at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:54)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3) {"user":"    at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.handle (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/express/lib/router/index.js:175:3)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:08:31.012Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:08:31.012Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: exited"}}
[debug] [2023-06-28T06:08:31.012Z] [worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ba229637-2fbc-4f17-8bed-3e92ba356534]: FINISHED"}}
[debug] [2023-06-28T06:08:40.048Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:08:41.049Z] Validating nodejs source
[debug] [2023-06-28T06:08:41.921Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:08:41.921Z] Building nodejs source
[debug] [2023-06-28T06:08:41.921Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:08:41.922Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:08:41.923Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:08:42.182Z] Serving at port 8592

[debug] [2023-06-28T06:08:42.567Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:08:42.567Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:08:42.634Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:08:42.639Z] Setting up firebase config

[debug] [2023-06-28T06:08:42.640Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:08:42.640Z] here in the api

[debug] [2023-06-28T06:08:42.674Z] Initializing file generator

[debug] [2023-06-28T06:08:42.681Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:08:42.685Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:09:17.358Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:18.359Z] Validating nodejs source
[debug] [2023-06-28T06:09:19.188Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:09:19.188Z] Building nodejs source
[debug] [2023-06-28T06:09:19.188Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:09:19.190Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:09:19.191Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:09:19.433Z] Serving at port 8890

[debug] [2023-06-28T06:09:19.781Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:09:19.782Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:09:19.847Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:09:19.852Z] Setting up firebase config

[debug] [2023-06-28T06:09:19.853Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:09:19.854Z] here in the api

[debug] [2023-06-28T06:09:19.887Z] Initializing file generator

[debug] [2023-06-28T06:09:19.894Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:09:19.898Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:09:24.238Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:25.240Z] Validating nodejs source
[debug] [2023-06-28T06:09:26.006Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:09:26.007Z] Building nodejs source
[debug] [2023-06-28T06:09:26.007Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:09:26.008Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:09:26.009Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:09:26.256Z] Serving at port 8961

[debug] [2023-06-28T06:09:26.610Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:09:26.610Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:09:26.682Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:09:26.688Z] Setting up firebase config

[debug] [2023-06-28T06:09:26.689Z] Initialized and ready to roll

[debug] [2023-06-28T06:09:26.689Z] connector initialized

[debug] [2023-06-28T06:09:26.690Z] here in the api

[debug] [2023-06-28T06:09:26.729Z] Initializing file generator

[debug] [2023-06-28T06:09:26.736Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:09:26.741Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:09:29.990Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:30.089Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:09:31.090Z] Validating nodejs source
[debug] [2023-06-28T06:09:31.856Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:09:31.856Z] Building nodejs source
[debug] [2023-06-28T06:09:31.856Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:09:31.858Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:09:31.860Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:09:32.161Z] Serving at port 8741

[debug] [2023-06-28T06:09:32.526Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:09:32.527Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:09:32.594Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:09:32.599Z] Setting up firebase config

[debug] [2023-06-28T06:09:32.600Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:09:32.600Z] here in the api

[debug] [2023-06-28T06:09:32.633Z] Initializing file generator

[debug] [2023-06-28T06:09:32.640Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:09:32.644Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:10:33.524Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:10:34.525Z] Validating nodejs source
[debug] [2023-06-28T06:10:35.522Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:10:35.522Z] Building nodejs source
[debug] [2023-06-28T06:10:35.522Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:10:35.523Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:10:35.525Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:10:35.812Z] Serving at port 8383

[debug] [2023-06-28T06:10:36.376Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:10:36.376Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:10:36.465Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:10:36.471Z] Setting up firebase config

[debug] [2023-06-28T06:10:36.473Z] Initialized and ready to roll

[debug] [2023-06-28T06:10:36.473Z] connector initialized

[debug] [2023-06-28T06:10:36.474Z] here in the api

[debug] [2023-06-28T06:10:36.516Z] Initializing file generator

[debug] [2023-06-28T06:10:36.523Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:10:36.528Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.571Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.572Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.573Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:10:42.574Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:10:43.576Z] Validating nodejs source
[debug] [2023-06-28T06:10:44.417Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:10:44.418Z] Building nodejs source
[debug] [2023-06-28T06:10:44.418Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:10:44.419Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:10:44.420Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:10:44.643Z] Serving at port 8982

[debug] [2023-06-28T06:10:44.986Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:10:44.987Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:10:45.052Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:10:45.057Z] Setting up firebase config

[debug] [2023-06-28T06:10:45.058Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:10:45.058Z] here in the api

[debug] [2023-06-28T06:10:45.091Z] Initializing file generator

[debug] [2023-06-28T06:10:45.098Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:10:45.102Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:10:47.893Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:10:47.893Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:10:47.893Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:10:47.893Z"],"workRunningCount":1}
[debug] [2023-06-28T06:10:47.894Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:10:47.910Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:10:47.910Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:10:47.911Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:10:47.918Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:10:47.919Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:10:49.480Z] [runtime-status] [11927] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:10:49.481Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.481Z] [runtime-status] [11927] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:10:49.482Z] [runtime-status] [11927] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:10:49.483Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.696Z] [runtime-status] [11927] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:10:49.696Z] [runtime-status] [11927] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:10:49.697Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.698Z] [runtime-status] [11927] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:10:49.700Z] [runtime-status] [11927] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:10:49.700Z] [runtime-status] [11927] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:10:50.028Z] [runtime-status] [11927] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:10:50.028Z] [runtime-status] [11927] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9b45d6098d53da6b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11927] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_9b45d6098d53da6b.sock"}}
[debug] [2023-06-28T06:10:50.044Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE"}}
[debug] [2023-06-28T06:10:50.045Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:10:50.046Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:10:50.995Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 949.964941ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 949.964941ms"}}
[debug] [2023-06-28T06:10:50.996Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: IDLE"}}
[debug] [2023-06-28T06:10:50.996Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:10:50.996Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:10:50.996Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:11:32.222Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:11:33.224Z] Validating nodejs source
[debug] [2023-06-28T06:11:34.010Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:11:34.011Z] Building nodejs source
[debug] [2023-06-28T06:11:34.011Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:11:34.012Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:11:34.014Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:11:34.264Z] Serving at port 8755

[debug] [2023-06-28T06:11:34.624Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:11:34.625Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:11:34.694Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:11:34.700Z] Setting up firebase config

[debug] [2023-06-28T06:11:34.701Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:11:34.702Z] here in the api

[debug] [2023-06-28T06:11:34.775Z] Initializing file generator

[debug] [2023-06-28T06:11:34.782Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:11:34.786Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:11:34.799Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:11:34.799Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHING"}}
[debug] [2023-06-28T06:11:34.809Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: exited"}}
[debug] [2023-06-28T06:11:34.809Z] [worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-49f24c8b-7122-43dd-aa05-8b5254800ee5]: FINISHED"}}
[debug] [2023-06-28T06:11:44.882Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.882Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.883Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.884Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:11:44.885Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:11:45.887Z] Validating nodejs source
[debug] [2023-06-28T06:11:46.813Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:11:46.813Z] Building nodejs source
[debug] [2023-06-28T06:11:46.813Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:11:46.814Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:11:46.816Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:11:47.103Z] Serving at port 8470

[debug] [2023-06-28T06:11:47.725Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:11:47.726Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:11:47.850Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:11:47.856Z] Setting up firebase config

[debug] [2023-06-28T06:11:47.857Z] Initialized and ready to roll

[debug] [2023-06-28T06:11:47.857Z] connector initialized

[debug] [2023-06-28T06:11:47.857Z] here in the api

[debug] [2023-06-28T06:11:47.930Z] Initializing file generator

[debug] [2023-06-28T06:11:47.937Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:11:47.941Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:11:49.029Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:11:49.029Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:11:49.029Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:11:49.029Z"],"workRunningCount":1}
[debug] [2023-06-28T06:11:49.030Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:11:49.048Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:11:49.049Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:11:49.049Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:11:49.058Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:11:49.059Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:11:50.606Z] [runtime-status] [11966] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:11:50.608Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.608Z] [runtime-status] [11966] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:11:50.608Z] [runtime-status] [11966] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:11:50.609Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.821Z] [runtime-status] [11966] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:11:50.821Z] [runtime-status] [11966] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:11:50.822Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.823Z] [runtime-status] [11966] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:11:50.825Z] [runtime-status] [11966] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:11:50.825Z] [runtime-status] [11966] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:11:51.159Z] [runtime-status] [11966] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:11:51.159Z] [runtime-status] [11966] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_7a49e3d841177147.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [11966] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_7a49e3d841177147.sock"}}
[debug] [2023-06-28T06:11:51.188Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:11:51.189Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:11:51.189Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:11:52.228Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1038.644523ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1038.644523ms"}}
[debug] [2023-06-28T06:11:52.228Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:11:52.228Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:11:52.228Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:11:52.228Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:22.211Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:22.211Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:22.212Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:22.211Z"],"workRunningCount":1}
[debug] [2023-06-28T06:12:22.212Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:12:22.225Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:12:22.226Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:12:22.226Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:12:22.226Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:12:23.031Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 805.367672ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 805.367672ms"}}
[debug] [2023-06-28T06:12:23.032Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:12:23.032Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:12:23.032Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:12:23.032Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:28.285Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:28.285Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:28.286Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:12:28.285Z"],"workRunningCount":1}
[debug] [2023-06-28T06:12:28.286Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:12:28.299Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:12:28.299Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:12:28.299Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:12:28.299Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:12:28.872Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 572.61838ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 572.61838ms"}}
[debug] [2023-06-28T06:12:28.872Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: IDLE"}}
[debug] [2023-06-28T06:12:28.872Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:12:28.872Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:12:28.872Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:12:55.567Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:12:56.568Z] Validating nodejs source
[debug] [2023-06-28T06:12:57.606Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:12:57.606Z] Building nodejs source
[debug] [2023-06-28T06:12:57.606Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:12:57.607Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:12:57.608Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:12:57.845Z] Serving at port 8290

[debug] [2023-06-28T06:12:58.361Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:12:58.362Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:12:58.487Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:12:58.496Z] Setting up firebase config

[debug] [2023-06-28T06:12:58.498Z] Initialized and ready to roll

[debug] [2023-06-28T06:12:58.499Z] connector initialized

[debug] [2023-06-28T06:12:58.503Z] here in the api

[debug] [2023-06-28T06:12:58.569Z] Initializing file generator

[debug] [2023-06-28T06:12:58.582Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:12:58.590Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:12:58.611Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:12:58.611Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHING"}}
[debug] [2023-06-28T06:12:58.628Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: exited"}}
[debug] [2023-06-28T06:12:58.628Z] [worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-93e864ee-549d-4bd9-9038-cd1419155bf1]: FINISHED"}}
[debug] [2023-06-28T06:13:05.227Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.228Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.229Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.231Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.231Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.231Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.232Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.233Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.233Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:13:05.233Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:13:06.234Z] Validating nodejs source
[debug] [2023-06-28T06:13:07.046Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:13:07.047Z] Building nodejs source
[debug] [2023-06-28T06:13:07.047Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:13:07.048Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:13:07.049Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:13:07.279Z] Serving at port 8404

[debug] [2023-06-28T06:13:07.625Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:13:07.626Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:13:07.693Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:13:07.698Z] Setting up firebase config

[debug] [2023-06-28T06:13:07.699Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:13:07.699Z] here in the api

[debug] [2023-06-28T06:13:07.733Z] Initializing file generator

[debug] [2023-06-28T06:13:07.739Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:13:07.745Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:13:11.147Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:13:11.147Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:13:11.147Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:13:11.147Z"],"workRunningCount":1}
[debug] [2023-06-28T06:13:11.147Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:13:11.161Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:13:11.161Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:13:11.161Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:13:11.167Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:13:11.168Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:13:12.156Z] [runtime-status] [12006] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:13:12.158Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.158Z] [runtime-status] [12006] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:13:12.158Z] [runtime-status] [12006] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:13:12.159Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.373Z] [runtime-status] [12006] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:13:12.373Z] [runtime-status] [12006] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:13:12.374Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.375Z] [runtime-status] [12006] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:13:12.377Z] [runtime-status] [12006] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:13:12.377Z] [runtime-status] [12006] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:13:12.634Z] [runtime-status] [12006] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:13:12.634Z] [runtime-status] [12006] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_d7f8b7d1893c573a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12006] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_d7f8b7d1893c573a.sock"}}
[debug] [2023-06-28T06:13:12.729Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: IDLE"}}
[debug] [2023-06-28T06:13:12.729Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:13:12.730Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  @notionhq/client warn: request fail { {"user":"@notionhq/client warn: request fail {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m @notionhq/client warn: request fail {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    message: 'body failed validation. Fix one:\n' + {"user":"  message: 'body failed validation. Fix one:\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'body failed validation. Fix one:\\n' +"}}
[info] >      'body.parent.database_id should be defined, instead was `undefined`.\n' + {"user":"    'body.parent.database_id should be defined, instead was `undefined`.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.database_id should be defined, instead was `undefined`.\\n' +"}}
[info] >      'body.parent.page_id should be a valid uuid, instead was `"root"`.' {"user":"    'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'body.parent.page_id should be a valid uuid, instead was `\"root\"`.'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162 {"user":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162"}}
[info] >          return new APIResponseError({ {"user":"        return new APIResponseError({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new APIResponseError({"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  APIResponseError: body failed validation. Fix one: {"user":"APIResponseError: body failed validation. Fix one:","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m APIResponseError: body failed validation. Fix one:"}}
[info] >  body.parent.database_id should be defined, instead was `undefined`. {"user":"body.parent.database_id should be defined, instead was `undefined`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.database_id should be defined, instead was `undefined`."}}
[info] >  body.parent.page_id should be a valid uuid, instead was `"root"`. {"user":"body.parent.page_id should be a valid uuid, instead was `\"root\"`.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m body.parent.page_id should be a valid uuid, instead was `\"root\"`."}}
[info] >      at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16) {"user":"    at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at buildRequestError (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/errors.js:162:16)"}}
[info] >      at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54) {"user":"    at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Client.request (/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/@notionhq/client/build/src/Client.js:347:54)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:167:16) {"user":"    at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:167:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async Object.testDB (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js:167:16)"}}
[info] >      at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) { {"user":"    at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async createPage (file:///Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js:57:29) {"}}
[info] >    code: 'validation_error', {"user":"  code: 'validation_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'validation_error',"}}
[info] >    status: 400, {"user":"  status: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 400,"}}
[info] >    headers: Headers { {"user":"  headers: Headers {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: Headers {"}}
[info] >      [Symbol(map)]: [Object: null prototype] { {"user":"    [Symbol(map)]: [Object: null prototype] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     [Symbol(map)]: [Object: null prototype] {"}}
[info] >        date: [ 'Wed, 28 Jun 2023 06:13:14 GMT' ], {"user":"      date: [ 'Wed, 28 Jun 2023 06:13:14 GMT' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: [ 'Wed, 28 Jun 2023 06:13:14 GMT' ],"}}
[info] >        'content-type': [ 'application/json; charset=utf-8' ], {"user":"      'content-type': [ 'application/json; charset=utf-8' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': [ 'application/json; charset=utf-8' ],"}}
[info] >        'content-length': [ '240' ], {"user":"      'content-length': [ '240' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': [ '240' ],"}}
[info] >        connection: [ 'close' ], {"user":"      connection: [ 'close' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: [ 'close' ],"}}
[info] >        'x-powered-by': [ 'Express' ], {"user":"      'x-powered-by': [ 'Express' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-powered-by': [ 'Express' ],"}}
[info] >        etag: [ 'W/"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8"' ], {"user":"      etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       etag: [ 'W/\"f0-/GgUihG6uwdYW5P3QKdj/Ddem/8\"' ],"}}
[info] >        vary: [ 'Accept-Encoding' ], {"user":"      vary: [ 'Accept-Encoding' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: [ 'Accept-Encoding' ],"}}
[info] >        'cf-cache-status': [ 'DYNAMIC' ], {"user":"      'cf-cache-status': [ 'DYNAMIC' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-cache-status': [ 'DYNAMIC' ],"}}
[info] >        'set-cookie': [ {"user":"      'set-cookie': [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'set-cookie': ["}}
[info] >          '__cf_bm=RIeYCfv8Q8jJvhv7HxaZ09SkT.QOTcjpqzwpDxRwDdQ-1687932794-0-ATbdsEyEgPjVVWZOLwZCR1pAtA1DyObxRmVNo3YySidhxjiw87snbIAGppjOpTJgaYc9JtKJipQN/hznEmkDhWo=; path=/; expires=Wed, 28-Jun-23 06:43:14 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None' {"user":"        '__cf_bm=RIeYCfv8Q8jJvhv7HxaZ09SkT.QOTcjpqzwpDxRwDdQ-1687932794-0-ATbdsEyEgPjVVWZOLwZCR1pAtA1DyObxRmVNo3YySidhxjiw87snbIAGppjOpTJgaYc9JtKJipQN/hznEmkDhWo=; path=/; expires=Wed, 28-Jun-23 06:43:14 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         '__cf_bm=RIeYCfv8Q8jJvhv7HxaZ09SkT.QOTcjpqzwpDxRwDdQ-1687932794-0-ATbdsEyEgPjVVWZOLwZCR1pAtA1DyObxRmVNo3YySidhxjiw87snbIAGppjOpTJgaYc9JtKJipQN/hznEmkDhWo=; path=/; expires=Wed, 28-Jun-23 06:43:14 GMT; domain=.notion.com; HttpOnly; Secure; SameSite=None'"}}
[info] >        ], {"user":"      ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       ],"}}
[info] >        server: [ 'cloudflare' ], {"user":"      server: [ 'cloudflare' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: [ 'cloudflare' ],"}}
[info] >        'cf-ray': [ '7de3c85b4d132e9a-MEL' ] {"user":"      'cf-ray': [ '7de3c85b4d132e9a-MEL' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cf-ray': [ '7de3c85b4d132e9a-MEL' ]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    body: '{"object":"error","status":400,"code":"validation_error","message":"body failed validation. Fix one:\\nbody.parent.database_id should be defined, instead was `undefined`.\\nbody.parent.page_id should be a valid uuid, instead was `\\"root\\"`."}' {"user":"  body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   body: '{\"object\":\"error\",\"status\":400,\"code\":\"validation_error\",\"message\":\"body failed validation. Fix one:\\\\nbody.parent.database_id should be defined, instead was `undefined`.\\\\nbody.parent.page_id should be a valid uuid, instead was `\\\\\"root\\\\\"`.\"}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.0.0 {"user":"Node.js v18.0.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.0.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-06-28T06:13:14.188Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:13:14.189Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: exited"}}
[debug] [2023-06-28T06:13:14.189Z] [worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-083dce54-72bd-4614-8c0f-9771402335f2]: FINISHED"}}
[debug] [2023-06-28T06:15:58.629Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:15:59.631Z] Validating nodejs source
[debug] [2023-06-28T06:16:00.601Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:16:00.601Z] Building nodejs source
[debug] [2023-06-28T06:16:00.601Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:16:00.602Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:16:00.604Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:16:00.889Z] Serving at port 8989

[debug] [2023-06-28T06:16:01.264Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:16:01.264Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:16:01.334Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:16:01.339Z] Setting up firebase config

[debug] [2023-06-28T06:16:01.340Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:16:01.341Z] here in the api

[debug] [2023-06-28T06:16:01.376Z] Initializing file generator

[debug] [2023-06-28T06:16:01.382Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:16:01.388Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:18:16.723Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:18:17.724Z] Validating nodejs source
[debug] [2023-06-28T06:18:19.657Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:18:19.658Z] Building nodejs source
[debug] [2023-06-28T06:18:19.658Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:18:19.659Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:18:19.660Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:18:19.983Z] Serving at port 8288

[debug] [2023-06-28T06:18:20.512Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:18:20.513Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:18:20.628Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:18:20.634Z] Setting up firebase config

[debug] [2023-06-28T06:18:20.635Z] Initialized and ready to roll

[debug] [2023-06-28T06:18:20.635Z] connector initialized

[debug] [2023-06-28T06:18:20.636Z] here in the api

[debug] [2023-06-28T06:18:20.730Z] Initializing file generator

[debug] [2023-06-28T06:18:20.741Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:18:20.757Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.785Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.786Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.787Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:18:29.788Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:18:30.791Z] Validating nodejs source
[debug] [2023-06-28T06:18:31.740Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:18:31.740Z] Building nodejs source
[debug] [2023-06-28T06:18:31.741Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:18:31.744Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:18:31.745Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:18:32.035Z] Serving at port 8782

[debug] [2023-06-28T06:18:32.560Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:18:32.560Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:18:32.685Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:18:32.691Z] Setting up firebase config

[debug] [2023-06-28T06:18:32.692Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:18:32.692Z] here in the api

[debug] [2023-06-28T06:18:32.764Z] Initializing file generator

[debug] [2023-06-28T06:18:32.771Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:18:32.775Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:18:48.481Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:18:48.481Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:18:48.481Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:18:48.481Z"],"workRunningCount":1}
[debug] [2023-06-28T06:18:48.481Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:18:48.495Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:18:48.496Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:18:48.496Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:18:48.503Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:18:48.503Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:18:50.099Z] [runtime-status] [12500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:18:50.101Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.101Z] [runtime-status] [12500] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:18:50.101Z] [runtime-status] [12500] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:18:50.102Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.318Z] [runtime-status] [12500] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:18:50.319Z] [runtime-status] [12500] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:18:50.319Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.321Z] [runtime-status] [12500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:18:50.323Z] [runtime-status] [12500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:18:50.323Z] [runtime-status] [12500] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:18:50.648Z] [runtime-status] [12500] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:18:50.648Z] [runtime-status] [12500] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_df0b9cf43f79788f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12500] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_df0b9cf43f79788f.sock"}}
[debug] [2023-06-28T06:18:50.731Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE"}}
[debug] [2023-06-28T06:18:50.731Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:18:50.731Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:18:52.966Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2234.942609ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2234.942609ms"}}
[debug] [2023-06-28T06:18:52.966Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: IDLE"}}
[debug] [2023-06-28T06:18:52.966Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:18:52.967Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:18:52.967Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:19:42.625Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:19:43.626Z] Validating nodejs source
[debug] [2023-06-28T06:19:44.901Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:19:44.901Z] Building nodejs source
[debug] [2023-06-28T06:19:44.901Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:19:44.902Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:19:44.903Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:19:45.320Z] Serving at port 8799

[debug] [2023-06-28T06:19:45.862Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:19:45.862Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:19:45.980Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:19:45.986Z] Setting up firebase config

[debug] [2023-06-28T06:19:45.987Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:19:45.988Z] here in the api

[debug] [2023-06-28T06:19:46.045Z] Initializing file generator

[debug] [2023-06-28T06:19:46.052Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:19:46.057Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:19:46.070Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:19:46.070Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHING"}}
[debug] [2023-06-28T06:19:46.085Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: exited"}}
[debug] [2023-06-28T06:19:46.085Z] [worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6235ea5-00b7-4c0e-8be5-6eb1bb9be432]: FINISHED"}}
[debug] [2023-06-28T06:19:52.105Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.105Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.105Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.106Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.106Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.108Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.108Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.109Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.110Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:19:52.111Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:19:53.112Z] Validating nodejs source
[debug] [2023-06-28T06:19:53.912Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:19:53.912Z] Building nodejs source
[debug] [2023-06-28T06:19:53.912Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:19:53.913Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:19:53.914Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:19:54.149Z] Serving at port 8369

[debug] [2023-06-28T06:19:54.495Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:19:54.495Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:19:54.560Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:19:54.566Z] Setting up firebase config

[debug] [2023-06-28T06:19:54.566Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:19:54.567Z] here in the api

[debug] [2023-06-28T06:19:54.601Z] Initializing file generator

[debug] [2023-06-28T06:19:54.607Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:19:54.612Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:19:55.375Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:19:55.375Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:19:55.375Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:19:55.375Z"],"workRunningCount":1}
[debug] [2023-06-28T06:19:55.375Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:19:55.389Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:19:55.390Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:19:55.390Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:19:55.396Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:19:55.396Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:19:56.953Z] [runtime-status] [12533] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:19:56.958Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:57.170Z] [runtime-status] [12533] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:19:57.171Z] [runtime-status] [12533] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:19:57.171Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:57.173Z] [runtime-status] [12533] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:19:57.175Z] [runtime-status] [12533] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:19:57.175Z] [runtime-status] [12533] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:19:57.510Z] [runtime-status] [12533] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:19:57.510Z] [runtime-status] [12533] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b14b0e575a4b07b8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12533] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_b14b0e575a4b07b8.sock"}}
[debug] [2023-06-28T06:19:57.522Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:19:57.522Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:19:57.523Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:19:58.444Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 921.575266ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 921.575266ms"}}
[debug] [2023-06-28T06:19:58.444Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:19:58.444Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:19:58.444Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:19:58.445Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:09.822Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:09.822Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:09.823Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:09.822Z"],"workRunningCount":1}
[debug] [2023-06-28T06:20:09.823Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:20:09.837Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:20:09.837Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:20:09.837Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:20:09.838Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:20:10.159Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 321.097799ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 321.097799ms"}}
[debug] [2023-06-28T06:20:10.159Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:20:10.159Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:20:10.159Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:20:10.159Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:18.777Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:18.777Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:18.778Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:18.777Z"],"workRunningCount":1}
[debug] [2023-06-28T06:20:18.778Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:20:18.791Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:20:18.792Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:20:18.792Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:20:18.792Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  parentID: root {"user":"parentID: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentID: root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:20:21.284Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2491.751246ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2491.751246ms"}}
[debug] [2023-06-28T06:20:21.284Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: IDLE"}}
[debug] [2023-06-28T06:20:21.284Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:20:21.284Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:20:21.284Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:39.775Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:20:40.777Z] Validating nodejs source
[debug] [2023-06-28T06:20:41.615Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:20:41.615Z] Building nodejs source
[debug] [2023-06-28T06:20:41.615Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:20:41.617Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:20:41.619Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:20:41.873Z] Serving at port 8817

[debug] [2023-06-28T06:20:42.264Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:20:42.266Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:20:42.335Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:20:42.341Z] Setting up firebase config

[debug] [2023-06-28T06:20:42.342Z] Initialized and ready to roll

[debug] [2023-06-28T06:20:42.342Z] connector initialized

[debug] [2023-06-28T06:20:42.343Z] here in the api

[debug] [2023-06-28T06:20:42.412Z] Initializing file generator

[debug] [2023-06-28T06:20:42.419Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:20:42.424Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:20:42.435Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:20:42.435Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHING"}}
[debug] [2023-06-28T06:20:42.446Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: exited"}}
[debug] [2023-06-28T06:20:42.446Z] [worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d40752ac-8b61-478c-9fc2-97f9dd65d243]: FINISHED"}}
[debug] [2023-06-28T06:20:47.662Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:47.662Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:20:47.662Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:20:47.662Z"],"workRunningCount":1}
[debug] [2023-06-28T06:20:47.662Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:20:47.676Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:20:47.676Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:20:47.676Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:20:47.683Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:20:47.684Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:20:49.216Z] [runtime-status] [12551] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:20:49.217Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.217Z] [runtime-status] [12551] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:20:49.218Z] [runtime-status] [12551] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:20:49.219Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.434Z] [runtime-status] [12551] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:20:49.435Z] [runtime-status] [12551] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:20:49.435Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.437Z] [runtime-status] [12551] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:20:49.438Z] [runtime-status] [12551] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:20:49.439Z] [runtime-status] [12551] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:20:49.778Z] [runtime-status] [12551] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:20:49.779Z] [runtime-status] [12551] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ff22b36508e5d894.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12551] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_ff22b36508e5d894.sock"}}
[debug] [2023-06-28T06:20:49.814Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE"}}
[debug] [2023-06-28T06:20:49.814Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:20:49.815Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  parentID: root {"user":"parentID: root","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parentID: root"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:20:52.702Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 2887.593342ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 2887.593342ms"}}
[debug] [2023-06-28T06:20:52.702Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: IDLE"}}
[debug] [2023-06-28T06:20:52.702Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:20:52.702Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:20:52.703Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:21:50.085Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:21:51.087Z] Validating nodejs source
[debug] [2023-06-28T06:21:52.034Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:21:52.034Z] Building nodejs source
[debug] [2023-06-28T06:21:52.034Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:21:52.035Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:21:52.036Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:21:52.414Z] Serving at port 8920

[debug] [2023-06-28T06:21:52.973Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:21:52.973Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:21:53.106Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:21:53.112Z] Setting up firebase config

[debug] [2023-06-28T06:21:53.113Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:21:53.114Z] here in the api

[debug] [2023-06-28T06:21:53.189Z] Initializing file generator

[debug] [2023-06-28T06:21:53.196Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:21:53.201Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:21:53.213Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-06-28T06:21:53.213Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHING"}}
[debug] [2023-06-28T06:21:53.225Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: exited"}}
[debug] [2023-06-28T06:21:53.225Z] [worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3d2e5ff5-09b6-4979-99c8-d441f3dcda6b]: FINISHED"}}
[debug] [2023-06-28T06:22:20.997Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:22:21.998Z] Validating nodejs source
[debug] [2023-06-28T06:22:22.757Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:22:22.758Z] Building nodejs source
[debug] [2023-06-28T06:22:22.758Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:22:22.759Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:22:22.760Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:22:22.996Z] Serving at port 8253

[debug] [2023-06-28T06:22:23.342Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:22:23.342Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:22:23.407Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:22:23.412Z] Setting up firebase config

[debug] [2023-06-28T06:22:23.413Z] Initialized and ready to roll

[debug] [2023-06-28T06:22:23.413Z] connector initialized

[debug] [2023-06-28T06:22:23.414Z] here in the api

[debug] [2023-06-28T06:22:23.447Z] Initializing file generator

[debug] [2023-06-28T06:22:23.453Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:22:23.458Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:22:44.311Z] File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/src/services/pageServices.ts changed, reloading triggers"}}
[debug] [2023-06-28T06:22:45.311Z] Validating nodejs source
[debug] [2023-06-28T06:22:46.167Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:22:46.168Z] Building nodejs source
[debug] [2023-06-28T06:22:46.168Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:22:46.169Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:22:46.170Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:22:46.563Z] Serving at port 8250

[debug] [2023-06-28T06:22:47.035Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:22:47.036Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:22:47.160Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:22:47.170Z] Setting up firebase config

[debug] [2023-06-28T06:22:47.171Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:22:47.173Z] here in the api

[debug] [2023-06-28T06:22:47.215Z] Initializing file generator

[debug] [2023-06-28T06:22:47.224Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:22:47.231Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:22:54.560Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/interfaces.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/codeBlockFunctions.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.561Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/notionManager/notion.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/projecthandler/PageTree.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/blockServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.662Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/services/pageServices.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/controllers/notionController.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/routes/routes.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.663Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/api.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/generateFiles.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js.map changed, reloading triggers"}}
[debug] [2023-06-28T06:22:54.664Z] File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/maxadam/Desktop/Code/notionOS/functions/lib/index.js changed, reloading triggers"}}
[debug] [2023-06-28T06:22:55.666Z] Validating nodejs source
[debug] [2023-06-28T06:22:56.441Z] > [functions] package.json contents: {
  "name": "functions",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/storage": "^6.11.0",
    "@notionhq/client": "^2.2.5",
    "@types/archiver": "^5.3.2",
    "archiver": "^5.3.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "firebase": "^9.23.0",
    "firebase-admin": "^11.9.0",
    "firebase-functions": "^4.4.1",
    "jszip": "^3.10.1",
    "notion-client": "^6.16.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2023-06-28T06:22:56.441Z] Building nodejs source
[debug] [2023-06-28T06:22:56.441Z] Failed to find version of module node: reached end of search path /Users/maxadam/Desktop/Code/notionOS/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-06-28T06:22:56.444Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-06-28T06:22:56.445Z] Found firebase-functions binary at '/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/.bin/firebase-functions'
[debug] [2023-06-28T06:22:56.678Z] Serving at port 8762

[debug] [2023-06-28T06:22:57.033Z] Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD

[debug] [2023-06-28T06:22:57.033Z] Database ID: 244fbd2336dc46d5a2612c7dc9609f67

[debug] [2023-06-28T06:22:57.101Z] parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib

[debug] [2023-06-28T06:22:57.106Z] Setting up firebase config

[debug] [2023-06-28T06:22:57.107Z] Initialized and ready to roll
connector initialized

[debug] [2023-06-28T06:22:57.108Z] here in the api

[debug] [2023-06-28T06:22:57.141Z] Initializing file generator

[debug] [2023-06-28T06:22:57.147Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"},"generateFiles":{"platform":"gcfv1","labels":{},"availableMemoryMb":null,"timeoutSeconds":20,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"callableTrigger":{},"entryPoint":"generateFiles"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-06-28T06:22:57.152Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api, generateFiles. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api, generateFiles."}}
[debug] [2023-06-28T06:23:06.638Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:06.638Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:23:06.638Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:06.638Z"],"workRunningCount":1}
[debug] [2023-06-28T06:23:06.638Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:23:06.654Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:23:06.654Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:23:06.654Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-06-28T06:23:06.660Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-06-28T06:23:06.661Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-06-28T06:23:08.298Z] [runtime-status] [12710] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:23:08.299Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.299Z] [runtime-status] [12710] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Found local functions config: /Users/maxadam/Desktop/Code/notionOS/functions/.runtimeconfig.json"}}
[debug] [2023-06-28T06:23:08.300Z] [runtime-status] [12710] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-06-28T06:23:08.301Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.513Z] [runtime-status] [12710] Checked functions.config() {"config":{"notion":{"token":"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","database_id":"244fbd2336dc46d5a2612c7dc9609f67"},"fb":{"api_key":"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Checked functions.config() {\"config\":{\"notion\":{\"token\":\"secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD\",\"database_id\":\"244fbd2336dc46d5a2612c7dc9609f67\"},\"fb\":{\"api_key\":\"AIzaSyBxFwxDaQjoc-6FJnOHmnKwzYNu6UsrrXY\"}}}"}}
[debug] [2023-06-28T06:23:08.513Z] [runtime-status] [12710] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-06-28T06:23:08.514Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.515Z] [runtime-status] [12710] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-06-28T06:23:08.517Z] [runtime-status] [12710] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-06-28T06:23:08.517Z] [runtime-status] [12710] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.9.0","resolution":"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.9.0\",\"resolution\":\"/Users/maxadam/Desktop/Code/notionOS/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD {"user":"Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Notion token: secret_AbmXiGrw7QSeX3SsTGB8vAELrSFB1b4eIVtii7TTkMD"}}
[info] >  Database ID: 244fbd2336dc46d5a2612c7dc9609f67 {"user":"Database ID: 244fbd2336dc46d5a2612c7dc9609f67","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Database ID: 244fbd2336dc46d5a2612c7dc9609f67"}}
[info] >  parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib {"user":"parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m parent : /Users/maxadam/Desktop/Code/notionOS/functions/lib"}}
[info] >  Setting up firebase config {"user":"Setting up firebase config","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Setting up firebase config"}}
[info] >  Initialized and ready to roll {"user":"Initialized and ready to roll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initialized and ready to roll"}}
[info] >  connector initialized {"user":"connector initialized","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m connector initialized"}}
[info] >  here in the api {"user":"here in the api","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m here in the api"}}
[info] >  Initializing file generator {"user":"Initializing file generator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Initializing file generator"}}
[debug] [2023-06-28T06:23:08.848Z] [runtime-status] [12710] Functions runtime initialized. {"cwd":"/Users/maxadam/Desktop/Code/notionOS/functions","node_version":"18.0.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Functions runtime initialized. {\"cwd\":\"/Users/maxadam/Desktop/Code/notionOS/functions\",\"node_version\":\"18.0.0\"}"}}
[debug] [2023-06-28T06:23:08.848Z] [runtime-status] [12710] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_accf3a2d743228fb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [12710] Listening to port: /var/folders/q_/sys0lmm9567_nr7sq_0m31jh0000gp/T/fire_emu_accf3a2d743228fb.sock"}}
[debug] [2023-06-28T06:23:08.892Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE"}}
[debug] [2023-06-28T06:23:08.892Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:23:08.893Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[debug] [2023-06-28T06:23:09.630Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 737.098487ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 737.098487ms"}}
[debug] [2023-06-28T06:23:09.631Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE"}}
[debug] [2023-06-28T06:23:09.631Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:23:09.631Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:23:09.632Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:23:19.916Z] [work-queue] {"queuedWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:19.916Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-06-28T06:23:19.916Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/v3rv-notionaios/us-central1/api/notion_manager/pages-2023-06-28T06:23:19.916Z"],"workRunningCount":1}
[debug] [2023-06-28T06:23:19.916Z] Accepted request POST /v3rv-notionaios/us-central1/api/notion_manager/pages --> us-central1-api
[debug] [2023-06-28T06:23:19.929Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-06-28T06:23:19.930Z] [functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/v3rv-notionaios/us-central1/api/notion_manager/pages, mapping to path=/notion_manager/pages"}}
[debug] [2023-06-28T06:23:19.930Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-06-28T06:23:19.930Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: BUSY"}}
[info] >  trying to create page {"user":"trying to create page","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m trying to create page"}}
[info] >  notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa {"user":"notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m notionParentID: 02188417-8fa3-4e47-b4dd-1c464c00baaa"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.notion.com/v1/pages"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.notion.com/v1/pages\"\n - Be careful, this may be a production service."}}
[info] >  made it all the way here {"user":"made it all the way here","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m made it all the way here"}}
[debug] [2023-06-28T06:23:21.524Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 1594.374839ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 1594.374839ms"}}
[debug] [2023-06-28T06:23:21.524Z] [worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f06de63a-4898-41e2-bd01-77d9591fc93c]: IDLE"}}
[debug] [2023-06-28T06:23:21.525Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-06-28T06:23:21.525Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-06-28T06:23:21.525Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
